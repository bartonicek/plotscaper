var plotscape=function(n){"use strict";var Te=document.createElement("style");Te.textContent=`*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.left-0{left:0}.right-0{right:0}.top-0{top:0}.z-0{z-index:0}.z-10{z-index:10}.z-30{z-index:30}.z-50{z-index:50}.m-1{margin:.25rem}.mb-6{margin-bottom:1.5rem}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.grid{display:grid}.hidden{display:none}.size-full{width:100%;height:100%}.h-1\\/2{height:50%}.h-5\\/6{height:83.333333%}.h-full{height:100%}.h-screen{height:100vh}.w-5\\/6{width:83.333333%}.w-8{width:2rem}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.shrink{flex-shrink:1}.grow{flex-grow:1}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize{resize:both}.columns-2{-moz-columns:2;columns:2}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-rows-1{grid-template-rows:repeat(1,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.content-center{align-content:center}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.gap-5{gap:1.25rem}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.rounded-bl-md{border-bottom-left-radius:.375rem}.border{border-width:1px}.border-gray-400{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity))}.border-b-black{--tw-border-opacity: 1;border-bottom-color:rgb(0 0 0 / var(--tw-border-opacity))}.border-l-black{--tw-border-opacity: 1;border-left-color:rgb(0 0 0 / var(--tw-border-opacity))}.bg-\\[\\#deded9\\]{--tw-bg-opacity: 1;background-color:rgb(222 222 217 / var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.bg-gray-300{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity))}.bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.bg-slate-200{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity))}.bg-slate-800{--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-opacity-80{--tw-bg-opacity: .8}.p-1{padding:.25rem}.p-10{padding:2.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-bold{font-weight:700}.uppercase{text-transform:uppercase}.lowercase{text-transform:lowercase}.capitalize{text-transform:capitalize}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.outline-2{outline-width:2px}.outline-slate-600{outline-color:#475569}.drop-shadow-md{--tw-drop-shadow: drop-shadow(0 4px 3px rgb(0 0 0 / .07)) drop-shadow(0 2px 2px rgb(0 0 0 / .06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:bg-gray-400:hover{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.hover\\:bg-gray-500:hover{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity))}.hover\\:bg-slate-200:hover{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity))}
`,document.head.appendChild(Te);const Nt=Symbol("name"),ue=Symbol("length"),Yt=Symbol("min"),Kt=Symbol("max"),fe=Symbol("queryable"),pn=Symbol("parentValues"),Qt={name:Nt,length:ue,min:Yt,max:Kt,queryable:fe,parent:pn};var N;(t=>{function a(h,u,d){const y=d??Object.keys(Qt);for(const k of y)u[Qt[k]]=h[Qt[k]]}t.copy=a;function e(h,u){return!!h[Qt[u]]}t.has=e;function i(h){return!!h[Nt]}t.hasName=i;function c(h){return h[Nt]??"unknown"}t.getName=c;function r(h,u){h[Nt]=u}t.setName=r;function g(h,u){u[Nt]=h[Nt]}t.copyName=g;function o(h){return rt(h)?h.length:h[ue]}t.getLength=o;function b(h,u){h[ue]=u}t.setLength=b;function l(h){return!!h[Yt]&&!!h[Kt]}t.hasMinMax=l;function m(h){return l(h)?[h[Yt],h[Kt]]:void 0}t.getMinMax=m;function f(h,u,d){h[Yt]=u,h[Kt]=d}t.setMinMax=f;function s(h){return h[fe]}t.isQueryable=s;function v(h,u){h[fe]=u}t.setQueryable=v})(N||(N={}));var gt;(t=>{function a(r){if(typeof r=="function")return r;if(rt(r)){const g=o=>r[o];return N.setLength(g,r.length),g}else return()=>r}t.of=a;function e(r){return()=>r}t.constant=e;function i(r,g){const o=t.of(r),b=l=>o(g[l]);return N.copy(r,b),N.setLength(b,g.length),b}t.proxy=i;function c(r){const g=r.map(t.of),o=b=>g.map(l=>l(b));return N.setLength(o,N.getLength(r[0])),o}t.multi=c})(gt||(gt={}));function Gt(t){return t}const de=t=>()=>t,yt=de(0),vt=de(1);function zn(t){return t+1}function Mn(t){return t-1}function An(t){return t()}function he(t){return t**2}const Ft=Math.sqrt,En=Math.log10;function _n(t){return 10**t}const It=Math.max;function ft(t,a){return t-a}function Pn(t,a){return t+a}function xn(t,a){return t*a}function Dt(t,a=0,e=1){return Math.min(Math.max(t,a),e)}function Lt(t,a){return 1/(a-t)}function Vt(t,a){const e=Lt(t,a);return[-t*e,e-t*e]}function qt(t,a=0){return Math.round(t*10**a)/10**a}function Tt(t,a){return t.localeCompare(a,"en",{numeric:!0})}function me(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Nn(t){return t.toLocaleLowerCase()}function Ln(t){return t.toLocaleUpperCase()}function Tn(t){return t.replace(/\s/g,"")}function zt(t){return t[t.length-1]}function Cn(t,a){return Array(a).fill(t)}function Rn(t,a,e){const i=Math.abs(a-t);e=e??Math.ceil(i)+1;const c=i/(e-1),r=a>=t?1:-1;return Array.from(Array(e),(g,o)=>t+r*c*o)}function kt(t,a){const e=Array(a.length);for(let i=0;i<a.length;i++)e[i]=t[a[i]];return e}function St(t,a){t.splice(t.indexOf(a),1)}function Mt(t,a){const e=Array(a.length);for(let i=0;i<a.length;i++)e[a[i]]=t[i];return e}function Ce(t){const a=t.toSorted(ft),e={},i={};for(let c=0;c<a.length;c++){const r=t[c];i[r]=i[r]+1||0,e[c]=a.indexOf(r)+i[r]}return Object.values(e)}function On(t,a){const e=Array(t.length);for(let i=0;i<t.length;i++)e[i]=t[a[i]];for(let i=0;i<t.length;i++)t[i]=e[i]}function Re(t,a){const e=Array(t.length);for(let i=0;i<t.length;i++)e[i]=a.indexOf(t[i]);return e}function At(t){let[a,e]=[1/0,-1/0];for(let i=0;i<t.length;i++)a=Math.min(a,t[i]),e=Math.max(e,t[i]);return[a,e]}function Et(t){const a=Array(t.length);a[0]=t[0];for(let e=1;e<t.length;e++)a[e]=t[e]+a[e-1];return a}function ge(t,a){return Math.floor(t+Math.random()*a)}function Fn(t,a,e=a-t){const i=a-t,c=[],r=new Set;for(;c.length<Math.min(e,i);){let g=ge(t,a);for(;r.has(g);)g=ge(t,a);c.push(g),r.add(g)}return c}async function In(t){return await(await fetch(t)).json()}function Oe(t,a){return{...t,...a}}function J(t,a){if(t!==a){a.length=0;for(let e=0;e<t.length;e++)a.push(t[e])}}function be(t,a){for(const[e,i]of Object.entries(t))rt(i)&&rt(t[e])?J(i,t[e]):a[e]=i}function Ct(t,a){return .5*(1-a)+a*t}function Fe(t,a,e=4){const i=(a-t)/e,c=Math.floor(Math.log10(i)),r=[1,2,4,5,10];let[g,o]=[1/0,0];for(let v=0;v<r.length;v++){const h=(r[v]*10**c-i)**2;h<g&&([g,o]=[h,r[v]])}const b=10**c*o,l=Math.ceil(t/b)*b,m=Math.floor(a/b)*b,f=Math.round((m-l)/b),s=[];for(let v=0;v<f+1;v++){const h=l+v*b;s.push(h)}return s}function Ie(t,a){let{width:e,anchor:i,nBins:c}=a||{};const[r,g]=At(t),o=g-r;c=c??(e?Math.ceil(o/e)+1:10),e=e??o/(c-1),i=i??r;const b=r-e+(i-r)%e,l=g+e-(g-i)%e,m=Array(c+2);m[0]=b,m[m.length-1]=l;for(let f=1;f<m.length-1;f++)m[f]=b+f*e;return m}function ye(t,a){for(const e of a.split(" "))t.classList.add(e)}function we(t,a){for(const e of a.split(" "))t.classList.remove(e)}function ve(t,a){let e=0;return function(...i){const c=new Date().getTime();c-e<a||(e=c,t(...i))}}function Dn(t){const a=performance.now();return t(),performance.now()-a}function Rt(t){return typeof t=="function"?t:rt(t)?a=>t[a]:()=>t}function De(t){const[a,e,i,c]=t;return[a,e,i-a,c-e]}function qe(t,a,e){return!(t<a)&&!(t>e)}function jt(t,a){let[e,i,c,r]=De(t),[g,o,b,l]=De(a);const m=b*r-c*l,f=((e-g)*r-(i-o)*c)/m,s=-(-(e-g)*l+(i-o)*b)/m;return qe(f,0,1)&&qe(s,0,1)}function ke(t,a){const[e,i,c,r]=t;return jt([e,i,c,i],a)||jt([e,i,e,r],a)||jt([c,i,c,r],a)||jt([e,r,c,r],a)}function Zt(t,a){const[e,i]=t,[c,r,g,o]=a;return!(e<c||e>g||i<r||i>o)}function Jt(t,a){const[e,i]=[t[0],t[2]].sort(ft),[c,r]=[t[1],t[3]].sort(ft),[g,o]=[a[0],a[2]].sort(ft),[b,l]=[a[1],a[3]].sort(ft);return!(i<g||e>o||r<b||c>l)}function qn(t,a,e){const c=Object.keys(t).filter(o=>o.replace(/[0-9]*$/,"")===a);if(c.length===0){t[`${a}1`]=e;return}const r=c.map(o=>parseInt(o.match(/[0-9]*$/)[0],10)),g=Math.max(...r);t[`${a}${g+1}`]=e}function je(t){let a=1/0;for(let e=0;e<t.length;e++)t[e]!==0&&(a=Math.min(a,Math.log10(Math.abs(t[e]))));return a>3?0:Math.floor(Math.abs(a))+2}function jn(t,a={lowercase:!0,capitalize:!0,split:!0}){return a!=null&&a.split&&(t=t.replace(/_/g," ")),a!=null&&a.lowercase&&(t=t.toLocaleLowerCase()),a!=null&&a.capitalize&&(t=me(t)),t}function He(t){if(typeof t=="string")return t;if(t===0)return t.toString();const a=Math.floor(Math.log10(Math.abs(t)));return a>=3?qt(t).toString():a<=-3?qt(t,-a+1).toString():qt(t,2).toString()}function Se(t,a){if(!pe(t))return t;const e=(a==null?void 0:a.tens)??4,i=o=>o!=0&&Math.abs(Math.log10(o))>e,c=(a==null?void 0:a.decimals)??je(t);t=t.map(o=>qt(o,c));const g=At(t).some(i)?Hn:$n;return t.map(g)}function Hn(t){return t===0?"0":$e(t.toExponential())}function $n(t){return t===0?"0":parseFloat(t.toPrecision(12)).toString()}function $e(t){let[a,e]=t.split("e");return e=Be(e),a+"×10"+e}const Bn={"-":"⁻","+":"",0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹"};function Be(t){return t.split("").map(a=>Bn[a]).join("")}const Wn=["string","number","boolean","undefined"];function Un(t){return t===null||Wn.includes(typeof t)}const rt=Array.isArray;function Xn(t){return typeof t=="number"}function We(t){return/^[0-9]+/.test(t)}function pe(t){return typeof t[0]=="number"&&typeof zt(t)=="number"}function Ue(t){return typeof t[0]=="string"&&typeof zt(t)=="string"}function lt(t){for(const e of t){if(!e)continue;const i=N.getLength(e);if(i)return i}const a="At least one variable needs to be of fixed length";throw new Error(a)}function Yn(...t){return function(a){return a(...t)}}function Kn(t,a){const e={};for(const[i,c]of Object.entries(t))e[i]=gt.of(c)(a);return e}function Qn(t){return function(a){return a[t]}}function ze(t){return function(a){return t.map(e=>a[e])}}function Xe(t){let a=t.length-1;for(;a>0&&/[0-9]/.test(t[a]);)a--;return a+=1,[t.substring(0,a),t.substring(a,t.length)]}function Me(t,a){const e=[];for(let i=0;i<t.length;i++)a(t[i])&&e.push(i);return e}function Ye(t,a){if(t.length!==a.length)return!1;const e=t.toSorted(Tt).join(""),i=a.toSorted(Tt).join("");return e===i}function Ke(t){t.innerHTML=""}var te=(t=>(t[t.Forwards=1]="Forwards",t[t.Backwards=-1]="Backwards",t))(te||{}),Ht=(t=>(t[t.Middle=.5]="Middle",t[t.Top=1]="Top",t[t.Bottom=0]="Bottom",t))(Ht||{}),ee=(t=>(t[t.Center=.5]="Center",t[t.Left=1]="Left",t[t.Right=0]="Right",t))(ee||{}),$t=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))($t||{});const Gn=[0,1,2,3,4,5,6,7],Ae=[4,5,6,7];var j;(t=>{function a(d,y){if(!Vn(d))throw new Error("Node must be a HTML5 canvas element");const k=d.getContext("2d"),{clientWidth:p,clientHeight:M,clientLeft:E,clientTop:S}=d,w=p-E,z=M-S;return{canvas:d,context:k,width:w,height:z,margins:[0,0,0,0],scalingFactor:2,contextProps:{},options:y}}t.of=a;function e(d,y){y.appendChild(d.canvas),d.parent=y}t.append=e;function i(d,y){for(const[k,p]of Object.entries(y))d.contextProps[k]=p,d.context[k]=p}t.setContext=i;function c(d){const{context:y,canvas:k,scalingFactor:p}=d,{clientWidth:M,clientHeight:E,clientLeft:S,clientTop:w}=k,z=M-S,_=E-w;d.width=z,d.height=_,d.canvas.width=z*p,d.canvas.height=_*p;for(const[T,P]of Object.entries(d.contextProps))d.context[T]=P;y.scale(p,p),t.clip(d)}t.resize=c;function r(d){const{context:y}=d;let{width:k,height:p}=d;const[M,E,S,w]=d.margins;k=Math.max(k-E-w,0),p=Math.max(p-S-M,0),y.beginPath(),y.rect(E,S,k,p),y.clip()}t.clip=r;function g(d){d.context.clearRect(0,0,d.width,d.height)}t.clear=g;function o(d,y){d.context.globalAlpha=y(d.context.globalAlpha)}t.setAlpha=o;function b(d){d.context.globalAlpha=1}t.resetAlpha=b;function l(d,y){return d.context.measureText(y).width}t.textWidth=l;function m(d,y){const k=d.context.measureText(y);return k.actualBoundingBoxAscent+k.actualBoundingBoxDescent}t.textHeight=m;function f(d,y,k,p){const{context:M}=d,E=d.canvas.clientHeight,S=(p==null?void 0:p.radius)??d.options.size,w=(p==null?void 0:p.hAnchor)??ee.Center,z=(p==null?void 0:p.vAnchor)??Ht.Middle;y=y+2*(w-.5)*S,k=E-k+2*(.5-z)*S,M.beginPath(),M.arc(y,k,S,0,Math.PI*2),M.fill()}t.point=f;function s(d,y,k,p,M){const{context:E,height:S}=d;E.fillRect(y,S-k,p-y,k-M)}t.rectangleXY=s;function v(d,y,k,p,M,E){const{context:S,height:w}=d,z=(E==null?void 0:E.hAnchor)??ee.Center,_=(E==null?void 0:E.vAnchor)??Ht.Middle;y=y-z*p,k=w-k+_*M,S.fillRect(y,k,p,-M)}t.rectangleWH=v;function h(d,y,k){const{context:p,height:M}=d;p.beginPath(),p.moveTo(y[0],M-k[0]);for(let E=0;E<y.length;E++)p.lineTo(y[E],M-k[E]);p.stroke()}t.line=h;function u(d,y,k,p,M){const{context:E,height:S}=d;E.save(),E.translate(y,S-k),M!=null&&M.vertical&&E.rotate(-Math.PI/2),E.fillText(p,0,0),E.translate(-y,-(S-k)),E.restore()}t.text=u})(j||(j={}));function Vn(t){return t.nodeName==="CANVAS"}const Ee=Symbol("listeners"),Qe=Symbol("deferred");var F;(t=>{function a(s){const v={},h={};return{...s,[Ee]:v,[Qe]:h}}t.of=a,t.listen=m(),t.dispatch=f();function e(s){return s[Ee]}t.getListeners=e;function i(s){return s[Qe]}t.getDeferred=i;function c(s,v,h){const u=()=>t.dispatch(v,"changed");t.listen(s,"changed",u,h)}t.propagateChange=c;function r(s){return s[Ee]!==void 0}t.isReactive=r;function g(s,v){v(s),t.dispatch(s,"changed")}t.set=g;function o(s,v,h){if(!r(s))return;const[u,d]=[e(s)[v],i(s)[v]];St(u,h),St(d,h)}t.removeListener=o;function b(s,v){if(!r(s))return;const[h,u]=[e(s)[v],i(s)[v]];if(h)for(const d of h)St(h,d);if(u)for(const d of u)St(u,d)}t.removeListeners=b;function l(s){if(!r(s))return;const[v,h]=[e(s),i(s)];if(v)for(const u of Object.values(v))u.length=0;if(h)for(const u of Object.values(h))u.length=0}t.removeAllListeners=l;function m(){return function(s,v,h,u){if(!r(s))return;u!=null&&u.throttle&&(h=ve(h,u.throttle));const y=!!(u!=null&&u.deferred)?i(s):e(s);y[v]||(y[v]=[]),y[v].includes(h)||y[v].push(h)}}t.makeListenFn=m;function f(){return function(s,v,h){if(!r(s))return;const[u,d]=[e(s)[v],i(s)[v]];if(u)for(const y of u)y(h);if(d)for(const y of d)y(h)}}t.makeDispatchFn=f})(F||(F={}));var pt;(t=>{function a(f=[],s){const v="",h="band",u=n.Expanse.base(s),{zero:d,one:y,direction:k}=u,p=Array.from(Array(f.length),(z,_)=>_),M=(s==null?void 0:s.weights)??Array(f.length).fill(1),E=Et(M),S=!1,w={ordered:S,labels:[...f],order:[...p],weights:[...M],cumulativeWeights:[...E],zero:d,one:y,direction:k};return{value:v,type:h,ordered:S,labels:f,order:p,weights:M,cumulativeWeights:E,...u,defaults:w}}t.of=a;function e(f,s){const{order:v,cumulativeWeights:h}=f;s=v[s];const u=h[s-1]??0,d=h[s],y=zt(h);return(u+d)/2/y}function i(f,s){if(s=s??Array(f.labels.length).fill(1),s.length!=f.labels.length){const u="The length of the weights must match the length of labels";throw new Error(u)}const{order:v}=f,h=Et(Mt(s,v));J(s,f.weights),J(s,f.defaults.weights),J(h,f.cumulativeWeights),J(h,f.defaults.cumulativeWeights),n.Expanse.dispatch(f,"changed")}t.setWeights=i;function c(f,s){const{labels:v,zero:h,one:u,direction:d}=f,y=v.indexOf(s);if(y===-1)throw new Error(`Label ${s} not found in: ${v}`);const k=e(f,y),p=h+k*(u-h);return Ct(p,d)}t.normalize=c;function r(f,s){const{labels:v,zero:h,one:u,direction:d}=f;s=Ct(s,d);const y=(s-h)/(u-h),k=Math.round((2*y*v.length-1)/2);return v[k]}t.unnormalize=r;function g(f,s,v){const{order:h}=f,u=Array.from(new Set(s)).sort(Tt);if(!h.length){for(let p=0;p<u.length;p++)h[p]=p;f.defaults.order=[...h],f.ordered=!1}const d=Array(u.length).fill(1),y=Et(Mt(d,h)),k={labels:u,weights:d,cumulativeWeights:y};for(const[p,M]of Object.entries(k))rt(f[p])&&J(M,f[p]),v!=null&&v.default&&J(M,f.defaults[p])}t.train=g;function o(f,s){const{order:v,weights:h,cumulativeWeights:u,defaults:d}=f;if(!s){J(d.order,v),J(Et(Mt(h,v)),u),f.ordered=!1,n.Expanse.dispatch(f,"changed");return}J(s,v),J(Et(Mt(h,s)),u),f.ordered=!0,n.Expanse.dispatch(f,"changed")}t.reorder=o;function b(f){return Mt(f.labels,f.order)}t.breaks=b;function l(){return!1}t.isContinuous=l;function m(){return!0}t.isDiscrete=m})(pt||(pt={}));var _t;(t=>{function a(o=0,b=1,l){const f="continuous",s=n.Expanse.base(l),[v,h]=[Gt,Gt],u=(l==null?void 0:l.scale)??1,d=(l==null?void 0:l.mult)??1,y=(l==null?void 0:l.offset)??0,k=(l==null?void 0:l.ratio)??!1,p={min:o,max:b,scale:u,mult:d,...s,offset:y,trans:v,inv:h};return{value:0,type:f,min:o,max:b,scale:u,mult:d,offset:y,ratio:k,...s,trans:v,inv:h,defaults:p}}t.of=a;function e(o,b){const{min:l,max:m,zero:f,one:s}=o,{direction:v,scale:h,mult:u,offset:d,trans:y}=o;b=b/(h*u)-d;const k=y(m)-y(l);let p=(y(b-d)-y(l))/k;return p=f+p*(s-f),Ct(p,v)}t.normalize=e;function i(o,b){const{min:l,max:m,zero:f,one:s}=o,{scale:v,mult:h,offset:u,trans:d,inv:y}=o,k=(b-f)/(s-f),p=d(m)-d(l);return y(d(l)+k*p)*(v*h)+u}t.unnormalize=i;function c(o){const{min:b,max:l}=o;return l-b}t.range=c;function r(o,b,l){let[m,f]=N.getMinMax(b)??At(b);m=o.ratio||l!=null&&l.ratio?0:m,n.Expanse.set(o,s=>(s.min=m,s.max=f),l)}t.train=r;function g(o,b=4){const[l,m]=[0,1].map(s=>t.unnormalize(o,s)).sort(ft);return Fe(l,m,b)}t.breaks=g})(_t||(_t={}));var ne;(t=>{function a(o=[],b){const l=[],m="compound",f=n.Expanse.continuous(0,1,b),{zero:s,one:v,direction:h}=f,u={zero:s,one:v,direction:h};for(const y of o)Object.assign(y,{zero:s,one:v,direction:h}),Object.assign(y.defaults,{zero:s,one:v,direction:h});const d={expanses:o,...f,value:l,type:m,defaults:u};return n.Expanse.listen(d,"changed",()=>{const{zero:y,one:k,direction:p}=d;for(const M of o)Object.assign(M,{zero:y,one:k,direction:p}),Object.assign(M.defaults,{zero:y,one:k,direction:p})}),d}t.of=a;function e(o,b){const{expanses:l}=o;return b.map((m,f)=>n.Expanse.normalize(l[f],m))}t.normalize=e;function i(o,b){const{expanses:l}=o;return b.map((m,f)=>n.Expanse.unnormalize(l[f],m))}t.unnormalize=i;function c(o,b){const{expanses:l}=o;if(b.length!=l.length){const m="The number of arrays does not match the number of expanses.";throw new Error(m)}for(let m=0;m<b.length;m++)n.Expanse.train(l[m],b[m])}t.train=c;function r(o){return _t.breaks(o)}t.breaks=r;function g(o){for(const b of o.expanses)n.Expanse.restoreDefaults(b)}t.restoreDefaults=g})(ne||(ne={}));var ae;(t=>{function a(o=[],b){const l="",m="point",f=n.Expanse.base(b),{zero:s,one:v,direction:h}=f,u=Array.from(Array(o.length),(k,p)=>p),d=!1,y={ordered:d,labels:[...o],order:[...u],zero:s,one:v,direction:h};return{value:l,type:m,ordered:d,labels:o,order:u,...f,defaults:y}}t.of=a;function e(o,b){const{labels:l,order:m,zero:f,one:s,direction:v}=o,h=m[l.indexOf(b)];if(h===-1)return h;const u=f+h/(l.length-1)*(s-f);return Ct(u,v)}t.normalize=e;function i(o,b){const{labels:l,order:m,zero:f,one:s,direction:v}=o;b=Ct(b,v);const h=(b-f)/(s-f),u=Math.round(h*(l.length-1));return l[m[u]]}t.unnormalize=i;function c(o,b,l){const{order:m}=o,f=Array.from(new Set(b)).sort(Tt);if(!m.length){for(let s=0;s<f.length;s++)m[s]=s;o.defaults.order=[...m],o.ordered=!1}J(f,o.labels),l!=null&&l.default&&J(f,o.defaults.labels)}t.train=c;function r(o,b){const{order:l,defaults:m}=o;if(!b){J(m.order,l),o.ordered=!1,n.Expanse.dispatch(o,"changed");return}J(b,l),o.ordered=!0,n.Expanse.dispatch(o,"changed")}t.reorder=r;function g(o){return Mt(o.labels,o.order)}t.breaks=g})(ae||(ae={}));var re;(t=>{function a(g){const o=[],b="split",l=g.type;return{...g,value:o,type:b,innerType:l}}t.of=a;function e(g,o){return rt(o)?o.map(b=>n.Expanse.methods[g.innerType].normalize(g,b)):n.Expanse.methods[g.innerType].normalize(g,o)}t.normalize=e;function i(g,o){return rt(o)?o.map(b=>n.Expanse.methods[g.innerType].unnormalize(g,b)):n.Expanse.methods[g.innerType].unnormalize(g,o)}t.unnormalize=i;function c(g,o){n.Expanse.methods[g.innerType].train(g,o)}t.train=c;function r(g){return n.Expanse.methods[g.innerType].breaks(g)}t.breaks=r})(re||(re={})),n.Expanse=void 0,(t=>{t.methods={continuous:_t,point:ae,band:pt,compound:ne,split:re},t.continuous=_t.of,t.point=ae.of,t.band=pt.of,t.compound=ne.of,t.split=re.of;function a(w){const z=(w==null?void 0:w.zero)??0,_=(w==null?void 0:w.one)??1,T=(w==null?void 0:w.direction)??te.Forwards,P=[],C=[];return F.of({zero:z,one:_,direction:T,frozen:P,linked:C})}t.base=a;function e(w,z,_){const{linked:T,frozen:P}=w,C={...w};z(C);for(const R of P)delete C[R];for(const R of Object.keys(C))C[R]===w[R]&&delete C[R];be(C,w);for(const R of T)t.set(R,z);_!=null&&_.default&&be(C,w.defaults),_!=null&&_.silent||t.dispatch(w,"changed")}t.set=e;function i(w,z={train:!0}){const _=pe(w)?t.continuous():t.point();return z.train&&t.train(_,w),_}t.infer=i;function c(w,z){for(const _ of z)w.frozen.includes(_)||w.frozen.push(_)}t.freeze=c;function r(w,z){w.linked.includes(z)||w.linked.push(z)}t.linkTo=r;function g(w){const{defaults:z}=w;for(const[_,T]of Object.entries(z))rt(T)&&rt(w[_])?J(T,w[_]):w[_]=T;t.dispatch(w,"changed")}t.restoreDefaults=g,t.dispatch=F.makeDispatchFn(),t.listen=F.makeListenFn();function o(w,z){return t.methods[w.type].normalize(w,z)}t.normalize=o;function b(w,z){return t.methods[w.type].unnormalize(w,z)}t.unnormalize=b;function l(w,z,_){return t.methods[w.type].train(w,z,_)}t.train=l;function m(w){return t.methods[w.type].breaks(w)}t.breaks=m;function f(w,z){const{direction:_}=w,T=z;t.set(w,P=>(P.zero+=_*T,P.one+=_*T))}t.move=f;function s(w,z,_,T){const{zero:P,one:C,direction:R}=w,V=C-P;R===te.Backwards&&([z,_]=[1-z,1-_]);let[Y,A]=[z,_].map(x=>(x-P)/V);[Y,A]=Vt(Y,A),R===te.Backwards&&([Y,A]=[1-Y,1-A]),t.set(w,x=>(x.zero=Y,x.one=A),T)}t.expand=s;function v(w){t.set(w,z=>z.direction*=-1)}t.flip=v;function h(w,z){if(!p(w))throw new Error("Expanse must be discrete");t.methods[w.type].reorder(w,z)}t.reorder=h;function u(w){return w.one-w.zero}t.unitRange=u;function d(w){if(!y(w))throw new Error("Can only compute range on a continuous expanse");return _t.range(w)}t.range=d;function y(w){return w.type==="continuous"||w.type==="split"}t.isContinuous=y;function k(w){return w.type==="point"}t.isPoint=k;function p(w){return w.type==="point"||w.type==="band"}t.isDiscrete=p;function M(w){return w.type==="band"}t.isBand=M;function E(w){return w.type==="compound"}t.isCompound=E;function S(w){return w.type==="split"}t.isSplit=S})(n.Expanse||(n.Expanse={})),n.Scale=void 0,(t=>{function a(u,d){const y=F.of({domain:u,codomain:d});return n.Expanse.listen(u,"changed",()=>t.dispatch(y,"changed")),n.Expanse.listen(d,"changed",()=>t.dispatch(y,"changed")),y}t.of=a,t.dispatch=F.makeDispatchFn(),t.listen=F.makeListenFn();function e(u,d){u.domain=d,n.Expanse.listen(d,"changed",()=>t.dispatch(u,"changed"))}t.setDomain=e;function i(u,d){u.codomain=d,n.Expanse.listen(d,"changed",()=>t.dispatch(u,"changed"))}t.setCoomain=i;function c(u,d){const{domain:y,codomain:k}=u;return n.Expanse.unnormalize(k,n.Expanse.normalize(y,d))}t.pushforward=c;function r(u,d){const{domain:y,codomain:k}=u;return n.Expanse.unnormalize(y,n.Expanse.normalize(k,d))}t.pullback=r;function g(u,d,y,k){n.Expanse.expand(u.domain,d,y,k)}t.expand=g;function o(u,d,y){if(((y==null?void 0:y.name)??!0)&&N.hasName(d)&&N.copy(d,u),typeof d[0]=="string"&&n.Expanse.isContinuous(u.domain)){const p=Array.from(new Set(d));u.domain=n.Expanse.band(p)}n.Expanse.train(u.domain,d,y)}t.train=o;function b(u){n.Expanse.restoreDefaults(u.domain),n.Expanse.restoreDefaults(u.codomain)}t.restoreDefaults=b;function l(u){const d=n.Expanse.breaks(u.domain);let y=Se(d);if(n.Expanse.isCompound(u.domain)){y=Se(d,{decimals:1});const p=d.map(M=>n.Expanse.unnormalize(u.codomain,_t.normalize(u.domain,M)));return{labels:y,positions:p}}else if(n.Expanse.isSplit(u.codomain)){const p=t.pushforward(u,d);return{labels:y,positions:p}}const k=d.map(p=>t.pushforward(u,p));return{labels:y,positions:k}}t.breaks=l;function m(u,d){n.Expanse.move(u.domain,d)}t.move=m;function f(u,d){d.codomain=u.codomain}t.shareCodomain=f;function s(u){return n.Expanse.range(u.domain)/n.Expanse.unitRange(u.domain)}t.domainRange=s;function v(u){return n.Expanse.range(u.codomain)*n.Expanse.unitRange(u.codomain)}t.codomainRange=v;function h(u){const{domain:d,codomain:y}=u;if([d,y].map(n.Expanse.isContinuous).includes(!1))throw new Error("Both domain and codomain need to be continuous");const k=n.Expanse.range(d);return n.Expanse.range(y)*n.Expanse.unitRange(y)/k}t.unitRatio=h})(n.Scale||(n.Scale={}));const dt=Symbol("positions");n.Factor=void 0,(t=>{(l=>{l[l.Constant=0]="Constant",l[l.Bijection=1]="Bijection",l[l.Surjection=2]="Surjection"})(t.Type||(t.Type={}));function a(l,m,f,s){return F.of({type:l,cardinality:m,indices:f,data:s})}t.of=a,t.listen=F.makeListenFn(),t.dispatch=F.makeDispatchFn();function e(l,m){m.cardinality=l.cardinality,J(l.indices,m.indices);for(const f of Reflect.ownKeys(l.data))rt(l.data[f])&&rt(m.data[f])?(J(l.data[f],m.data[f]),N.copy(l.data[f],m.data[f])):m.data[f]=l.data[f]}t.copyFrom=e;function i(l){const f=[],s=u=>[u],h={...l,[dt]:s};return a(1,1/0,f,h)}t.bijection=i;function c(l){const f=Array(l).fill(0),s=()=>f,v=0,h={[dt]:s};return a(v,1,f,h)}t.mono=c;function r(l,m){const f=l.map(d=>d.toString());m=m??Array.from(new Set(f)).sort(Tt),N.hasName(l)&&N.copy(l,m);const s=[],v={};for(let d=0;d<f.length;d++){const y=m.indexOf(f[d]);v[y]||(v[y]=[]),s.push(y),v[y].push(d)}const h=2,u={label:m,[dt]:Object.values(v)};return a(h,m.length,s,u)}t.from=r;function g(l,m){function f(){const v=(m==null?void 0:m.breaks)??Ie(l,m),h=new Set,u=[],d={};for(let z=0;z<l.length;z++){const _=v.findIndex(T=>T>=l[z])-1;d[_]||(d[_]=[]),u.push(_),d[_].push(z),h.add(_)}const y=Array.from(h).sort(ft);for(let z=0;z<u.length;z++)u[z]=y.indexOf(u[z]);const[k,p]=[[],[]];for(let z=0;z<y.length;z++)k.push(v[y[z]]),p.push(v[y[z]+1]);const[M,E]=[v[y[0]],v[zt(y)+1]];N.setMinMax(k,M,E),N.setMinMax(p,M,E),N.setName(k,`min of ${N.getName(l)}`),N.setName(p,`max of ${N.getName(l)}`),N.setName(v,N.getName(l));const S=2,w={binMin:k,binMax:p,breaks:v,[dt]:Object.values(d)};return a(S,y.length,u,w)}const s=f();return m&&F.isReactive(m)&&F.listen(m,"changed",()=>{const v=f();t.copyFrom(v,s),t.dispatch(s,"changed")}),s}t.bin=g;function o(l,m){function f(){if(l.type===1){const P={};for(const A of Reflect.ownKeys(l.data))P[A]=gt.of(l.data[A]);for(const A of Reflect.ownKeys(m.data))P[A]=gt.proxy(m.data[A],m.indices);const C=1,R=m.indices.length,Y=a(C,R,[],P);return Y.parent=l,Y}if(l.type===0){const{type:P,data:C,cardinality:R,indices:V}=m,Y=a(P,R,V,C);return Y.parent=l,Y}const v=Math.max(l.cardinality,m.cardinality)+1,h=new Set,u=[],d={},y={},k={},p=Rt(l.indices),M=Rt(m.indices);for(let P=0;P<l.indices.length;P++){const[C,R]=[p(P),M(P)],V=v*C+R;V in y||(y[V]=C,k[V]=R,d[V]=[]),u.push(V),d[V].push(P),h.add(V)}const E=Array.from(h).sort(ft);for(let P=0;P<u.length;P++)u[P]=E.indexOf(u[P]);const S=Object.values(y),w=Object.values(k),z={};for(let P of Reflect.ownKeys(l.data)){let C=P;if(typeof P=="string")for(;C in z;)P+="$";const[R,V]=[l.data[P],S],Y=rt(R)?kt(R,V):gt.proxy(R,V);N.copy(R,Y),z[C]=Y}for(let P of Reflect.ownKeys(m.data)){let C=P;if(typeof P=="string")for(;C in z;)C+="$";const[R,V]=[m.data[P],w],Y=rt(R)?kt(R,V):gt.proxy(R,V);N.copy(R,Y),z[C]=Y}const _=2;z[dt]=Object.values(d);const T=a(_,E.length,u,z);return T.parent=l,T}const s=f();return t.listen(l,"changed",()=>{const v=f();t.copyFrom(v,s)}),t.listen(m,"changed",()=>{const v=f();t.copyFrom(v,s)}),F.propagateChange(l,s,{deferred:!0}),F.propagateChange(m,s,{deferred:!0}),s}t.product=o;function b(l,m){const f={};for(let s=0;s<m.indices.length&&(f[m.indices[s]]=l.indices[s],!(Object.keys(f).length>=m.cardinality));s++);return Object.values(f)}t.parentIndices=b})(n.Factor||(n.Factor={}));const _e=255;var ie=(t=>(t[t.Base=7]="Base",t[t.First=6]="First",t[t.Second=5]="Second",t[t.Third=4]="Third",t[t.BaseTransient=3]="BaseTransient",t[t.FirstTransient=2]="FirstTransient",t[t.SecondTransient=1]="SecondTransient",t[t.ThirdTransient=0]="ThirdTransient",t))(ie||{}),ot;(t=>{function a(m){const f=_e,s=Array(m).fill(7),v=[],h=n.Factor.Type.Surjection,u=n.Factor.of(h,8,s,{[Ot]:[0,1,2,3,4,5,6,7]}),d=F.of({group:f,indices:s,transientIndices:v,factor:u});return t.listen(d,"updated",()=>n.Factor.dispatch(u,"changed")),t.listen(d,"cleared",()=>n.Factor.dispatch(u,"changed")),d}t.of=a,t.listen=F.makeListenFn(),t.dispatch=F.makeDispatchFn();function e(m,f){m.group=f}t.setGroup=e;function i(m,f,s){const v=(s==null?void 0:s.group)??m.group;if(r(m,{silent:!0}),v===_e){for(let h=0;h<f.length;h++){const u=f[h];m.indices[u]=b(m.indices[u])}m.transientIndices=f}else for(let h=0;h<f.length;h++){const u=f[h];m.indices[u]=v}s!=null&&s.silent||t.dispatch(m,"updated")}t.update=i;function c(m,f){for(let s=0;s<m.indices.length;s++)m.indices[s]=7;f!=null&&f.silent||t.dispatch(m,"cleared")}t.clearAll=c;function r(m,f){for(let s=0;s<m.transientIndices.length;s++){const v=m.transientIndices[s];m.indices[v]=l(m.indices[v])}f!=null&&f.silent||t.dispatch(m,"cleared")}t.clearTransient=r;function g(m){const{factor:f,indices:s}=m;return v=>f.data[Ot][s[v]]}t.getLayer=g;function o(m){return!(m&4)}t.isTransient=o;function b(m){return m&-5}function l(m){return m|4}})(ot||(ot={}));const Ot=Symbol("layer");var Bt;(t=>{function a(r){const g={},o=[],b=$.Type.Bars,l=(r==null?void 0:r.vAnchor)??Ht.Bottom,m=(r==null?void 0:r.hAnchor)??ee.Center,f=(r==null?void 0:r.postfn)??Gt;return{type:b,data:o,scales:g,postfn:f,vAnchor:l,hAnchor:m}}t.of=a;function e(r,g){const{scales:o,postfn:b,hAnchor:l,vAnchor:m}=r,f=$.groupedData(r),s=lt(Object.values(f)),v=["x","y","width","height",Ot],[h,u,d,y,k]=$.getters(f,v);for(let p=0;p<s;p++){let M=n.Scale.pushforward(o.x,h(p)),E=n.Scale.pushforward(o.y,u(p)),S=n.Scale.pushforward(o.width,d(p)),w=n.Scale.pushforward(o.height,y(p));const z=g[k(p)],_=[M,E,S,w];b(_),j.rectangleWH(z,..._,{hAnchor:l,vAnchor:m})}}t.render=e;function i(r,g){const{scales:o,postfn:b,hAnchor:l,vAnchor:m}=r,f=$.flatData(r),s=lt(Object.values(f)),v=["x","y","width","height",dt],[h,u,d,y,k]=$.getters(f,v),p=[];for(let M=0;M<s;M++){let E=n.Scale.pushforward(o.x,h(M)),S=n.Scale.pushforward(o.y,u(M)),w=n.Scale.pushforward(o.width,d(M)),z=n.Scale.pushforward(o.height,y(M));const _=[E,S,w,z];b(_),[E,S,w,z]=_;const T=[E-w*l,S-z*m,E+w*l,S+z*(1-m)];if(Jt(g,T)){const P=k(M);for(let C=0;C<P.length;C++)p.push(P[C])}}return p}t.check=i;function c(r,g){const{scales:o,postfn:b,hAnchor:l,vAnchor:m}=r,f=$.flatData(r),s=lt(Object.values(f)),v=["x","y","width","height"],[h,u,d,y]=$.getters(f,v);for(let k=0;k<s;k++){let p=n.Scale.pushforward(o.x,h(k)),M=n.Scale.pushforward(o.y,u(k)),E=n.Scale.pushforward(o.width,d(k)),S=n.Scale.pushforward(o.height,y(k));const w=[p,M,E,S];b(w),[p,M,E,S]=w;const z=[p-E*l,M-S*m,p+E*l,M+S*(1-m)];if(Zt(g,z)){const _={};N.hasName(f.x)&&(_[N.getName(f.x)]=h(k)),N.hasName(f.y)&&(_[N.getName(f.y)]=u(k)),N.hasName(f.height)&&(_[N.getName(f.height)]=y(k));for(const[T,P]of Object.entries(f))["x","y","width","height"].includes(T)||P&&N.hasName(P)&&(_[N.getName(P)]=$.getter(P)(k));return _}}}t.query=c})(Bt||(Bt={}));var oe;(t=>{function a(){const r={},g=[];return{type:$.Type.Lines,data:g,scales:r}}t.of=a;function e(r,g){const{scales:o}=r,b=$.groupedData(r),l=lt(Object.values(b)),m=["x","y",Ot],[f,s,v]=$.getters(b,m);for(let h=0;h<l;h++){const u=n.Scale.pushforward(o.x,f(h)),d=n.Scale.pushforward(o.y,s(h)),y=g[v(h)];j.line(y,u,d)}}t.render=e;function i(r,g){const{scales:o}=r,b=$.flatData(r),l=lt(Object.values(b)),m=["x","y",dt],[f,s,v]=$.getters(b,m),h=[];for(let u=0;u<l;u++){const d=n.Scale.pushforward(o.x,f(u)),y=n.Scale.pushforward(o.y,s(u));for(let k=1;k<d.length;k++){const p=[d[k-1],y[k-1],d[k],y[k]];if(ke(g,p)){const M=v(u);for(let E=0;E<M.length;E++)h.push(M[E])}}}return h}t.check=i;function c(r,g){let{scales:o}=r;const b=$.flatData(r),l=lt(Object.values(b)),m=["x","y",dt],[f,s]=$.getters(b,m),v=[g[0]-1,g[1]-1,g[0]+1,g[1]+1];for(let h=0;h<l;h++){const u=n.Scale.pushforward(o.x,f(h)),d=n.Scale.pushforward(o.y,s(h));for(let y=1;y<u.length;y++){const k=[u[y-1],d[y-1],u[y],d[y]];if(ke(v,k)){const p={},[M,E]=[f(h),s(h)];for(let S=0;S<M.length;S++)p[M[S]]=E[S];for(const[S,w]of Object.entries(b))S==="x"||S==="y"||w&&N.hasName(w)&&(p[N.getName(w)]=$.getter(w)(h));return p}}}}t.query=c})(oe||(oe={}));var se;(t=>{function a(){const r={},g=[];return{type:$.Type.Points,data:g,scales:r}}t.of=a;function e(r,g){const{scales:o}=r,b=$.groupedData(r),l=lt(Object.values(b)),m=["x","y","size",Ot],[f,s,v,h]=$.getters(b,m);for(let u=0;u<l;u++){const d=n.Scale.pushforward(o.x,f(u)),y=n.Scale.pushforward(o.y,s(u)),k=n.Scale.pushforward(o.size,v(u)),p=g[h(u)];j.point(p,d,y,{radius:k})}}t.render=e;function i(r,g){const{scales:o}=r,b=$.flatData(r),l=lt(Object.values(b)),m=["x","y","size",dt],[f,s,v,h]=$.getters(b,m),u=[];for(let d=0;d<l;d++){const y=n.Scale.pushforward(o.x,f(d)),k=n.Scale.pushforward(o.y,s(d));let p=n.Scale.pushforward(o.size,v(d));p=p/Math.sqrt(2);const M=[y-p,k-p,y+p,k+p];if(Jt(g,M)){const E=h(d);for(let S=0;S<E.length;S++)u.push(E[S])}}return u}t.check=i;function c(r,g){const{scales:o}=r,b=$.flatData(r),l=lt(Object.values(b)),m=["x","y","size"],[f,s,v]=$.getters(b,m);for(let h=0;h<l;h++){const u=n.Scale.pushforward(o.x,f(h)),d=n.Scale.pushforward(o.y,s(h));let y=n.Scale.pushforward(o.size,v(h));y=y/Math.sqrt(2);const k=[u-y,d-y,u+y,d+y];if(Zt(g,k)){const p={};p[N.getName(b.x)]=f(h),p[N.getName(b.y)]=s(h);for(const[M,E]of Object.entries(b))M==="x"||M==="y"||E&&N.hasName(E)&&(p[N.getName(E)]=$.getter(E)(h));return p}}}t.query=c})(se||(se={}));var Wt;(t=>{function a(){const r={},g=[];return{type:$.Type.Rectangles,data:g,scales:r}}t.of=a;function e(r,g){const{scales:o}=r,b=$.groupedData(r),l=lt(Object.values(b)),m=["x0","y0","x1","y1","area",Ot],[f,s,v,h,u,d]=$.getters(b,m);for(let y=0;y<l;y++){let k=n.Scale.pushforward(o.x,f(y)),p=n.Scale.pushforward(o.y,s(y)),M=n.Scale.pushforward(o.x,v(y)),E=n.Scale.pushforward(o.y,h(y));const S=g[d(y)];if(b.area){const w=n.Scale.pushforward(o.area,u(y)),z=M-k,_=E-p;k=k+(1-w)/2*z,M=M-(1-w)/2*z,p=p+(1-w)/2*_,E=E-(1-w)/2*_}j.rectangleXY(S,k,p,M,E)}}t.render=e;function i(r,g){const{scales:o}=r,b=$.flatData(r),l=lt(Object.values(b)),m=["x0","y0","x1","y1","area",dt],[f,s,v,h,u,d]=$.getters(b,m),y=[];for(let k=0;k<l;k++){let p=n.Scale.pushforward(o.x,f(k)),M=n.Scale.pushforward(o.y,s(k)),E=n.Scale.pushforward(o.x,v(k)),S=n.Scale.pushforward(o.y,h(k));if(b.area){const w=n.Scale.pushforward(o.area,u(k)),z=E-p,_=S-M;p=p+(1-w)/2*z,E=E-(1-w)/2*z,M=M+(1-w)/2*_,S=S-(1-w)/2*_}if(Jt(g,[p,M,E,S])){const w=d(k);for(let z=0;z<w.length;z++)y.push(w[z])}}return y}t.check=i;function c(r,g){const{scales:o}=r,b=$.flatData(r),l=lt(Object.values(b)),m=["x0","y0","x1","y1","area"],[f,s,v,h,u]=$.getters(b,m);for(let d=0;d<l;d++){let y=n.Scale.pushforward(o.x,f(d)),k=n.Scale.pushforward(o.y,s(d)),p=n.Scale.pushforward(o.x,v(d)),M=n.Scale.pushforward(o.y,h(d));if(b.area){const E=n.Scale.pushforward(o.area,u(d)),S=p-y,w=M-k;y=y+(1-E)/2*S,p=p-(1-E)/2*S,k=k+(1-E)/2*w,M=M-(1-E)/2*w}if(Zt(g,[y,k,p,M])){const E={};for(const S of Object.values(b))S&&N.hasName(S)&&(E[N.getName(S)]=$.getter(S)(d));return E}}}t.query=c})(Wt||(Wt={}));var $;(t=>{(l=>{l[l.Points=0]="Points",l[l.Bars=1]="Bars",l[l.Rectangles=2]="Rectangles",l[l.Lines=3]="Lines"})(t.Type||(t.Type={}));const a={0:se,1:Bt,2:Wt,3:oe};function e(l){return l.data[l.data.length-2]}t.flatData=e;function i(l){return l.data[l.data.length-1]}t.groupedData=i;function c(l,m=()=>.5){return Rt(l??m)}t.getter=c;function r(l,m,f=()=>.5){return m.map(s=>t.getter(l[s],f))}t.getters=r;function g(l,m){a[l.type].render(l,m)}t.render=g;function o(l,m){return a[l.type].check(l,m)}t.check=o;function b(l,m){return a[l.type].query(l,m)}t.query=b})($||($={}));const Pe=Symbol("parent"),xe=Symbol("values"),Ge=Symbol("indices"),Ne=Symbol("factor"),Ve=Symbol("reducer");var X;(t=>{function a(s,v,h,u){const d=s;return d[xe]=s,d[Ne]=v,d[Ve]=h,u&&e(d,u),d}t.of=a,t.listen=F.makeListenFn(),t.dispatch=F.makeDispatchFn();function e(s,v){s[Pe]=v}t.setParent=e;function i(s){const[,v,h,u]=f(s);if(!u)throw new Error("Parent missing");const d=n.Factor.parentIndices(o(u),v),y=kt(u,d),k=a(y,o(u),h,b(u));return l(k,u),m(k,d),N.copyName(s,k),k}t.parent=i;function c(s){const[v,h,u,d,y]=f(s);if(!d)throw new Error("Cannot stack a without a parent");const k=n.Factor.parentIndices(o(d),h),{reducefn:p,initialfn:M}=u,[E,S]=[v.length,[]],w=Array.from(Array(E),()=>M()),z=gt.of(k);for(let P=0;P<v.length;P++){const C=z(P);S[C]===void 0&&(S[C]=M()),S[C]=p(S[C],v[P]),w[P]=S[C]}const _=y?kt(w,y):w,T=t.of(_,h,u,d);return l(T,w),y&&m(T,y),N.copyName(s,T),T}t.stack=c;function r(s,v){const[h,u,d,y,k]=f(s);if(!y)throw new Error("Cannot normalize a without a parent");const p=n.Factor.parentIndices(o(y),u),M=kt(y,p),E=[...h];for(let z=0;z<s.length;z++)E[z]=v(E[z],M[z]);const S=k?kt(E,k):E,w=t.of(S,u,d,y);return l(w,E),k&&m(w,k),N.copyName(s,w),w}t.normalize=r;function g(s){const[v,h,u,d,y]=f(s),k=[];k.push(u.initialfn());for(let E=0;E<v.length-1;E++)k.push(v[E]);const p=y?kt(k,y):k,M=t.of(p,h,u,d);return l(M,k),y&&m(M,y),N.copyName(s,M),M}t.shiftLeft=g;function o(s){return s[Ne]}function b(s){return s[Pe]}t.getParent=b;function l(s,v){s[xe]=v}function m(s,v){s[Ge]=v}function f(s){return[s[xe],s[Ne],s[Ve],s[Pe],s[Ge]]}})(X||(X={})),n.Reducer=void 0,(t=>{t.sum={name:"sum",fallback:"count",initialfn:()=>0,reducefn:(c,r)=>c+r},t.max={name:"max",initialfn:()=>-1/0,reducefn:(c,r)=>Math.max(c,r)},t.product={name:"product",initialfn:()=>1,reducefn:(c,r)=>c*r},t.table={name:"table",initialfn:()=>({}),reducefn:(c,r)=>(c[r]=c[r]+1||0,c)};function a(c){return typeof c=="string"?t[c]:c}t.get=a;function e(c,r,g){const{indices:o,cardinality:b}=r,{initialfn:l,reducefn:m}=g,f=Array.from(Array(b),()=>l()),s=Rt(o),v=Rt(c);for(let u=0;u<o.length;u++)f[s(u)]=m(f[s(u)],v(u));const h=X.of(f,r,g);return N.copy(c,h),N.setName(h,i(f,g)??"[unknown summary]"),h}t.reduce=e;function i(c,r){return N.hasName(c)?`${r.name} of ${N.getName(c)}`:r.fallback}t.getName=i})(n.Reducer||(n.Reducer={}));var et;(t=>{function a(r,g){const o=[];for(let b=0;b<g.length;b++){const l=g[b],m=e(r,l),f=F.of(Oe(m,l.data));if(o.push(f),b>0)for(const s of Object.keys(m)){const v=o[b-1][s];X.setParent(m[s],v)}n.Factor.listen(l,"changed",()=>{const s=e(r,l);for(const v of Object.keys(s))J(s[v],m[v])}),F.propagateChange(l,f,{deferred:!0})}return o}t.of=a;function e(r,g){const o={};for(const[b,l]of Object.entries(r)){const[m,f]=l;o[b]=n.Reducer.reduce(m,g,f)}return o}function i(r,g){const o=[];for(let b=0;b<r.length;b++){let l=function(f){const s=g[b](f),v=Reflect.ownKeys(f);for(const h of v)(typeof h=="symbol"||We(h))&&(s[h]=f[h]);return s};const m=F.of(l(r[b]));o.push(m),F.listen(r[b],"changed",()=>{const f=l(r[b]);for(const s of Reflect.ownKeys(f))rt(f[s])&&rt(m[s])&&J(f[s],m[s]);F.dispatch(m,"changed")})}return o}t.translate=i;function c(r,g){const o={};let b=0;for(const[l,m]of r)o[`q${b++}`]=[l(g),m];return o}t.formatQueries=c})(et||(et={}));function Zn(t,a,e){const{data:i,marker:c}=t;let[r,g]=a(i);const o=g&&(e!=null&&e.reducer)?e.reducer:n.Reducer.sum,b=g||(()=>1),l=n.Factor.from(r),m=n.Factor.product(l,c.factor),f=[l,m],s=e!=null&&e.queries?e.queries(i):{},v=et.of({stat:[b,o],...s},f),h=[],u=0,d={type:"bar",scales:{x:"band"}},y={representation:u,...n.Plot.of(d),summaries:v,coordinates:h};return n.Plot.listen(y,"n",()=>Jn(y)),Je(y),n.Plot.addGeom(y,Bt.of()),y}function Ze(t,a){if(t.ordered)pt.reorder(t);else{const e=Ce(a);pt.reorder(t,e)}}function Jn(t){t.representation===0?ta(t):Je(t)}function Je(t){const{summaries:a,scales:e}=t,i=et.translate(a,[o=>({x:o.label,y:yt,height:o.stat,width:vt}),o=>({x:o.label,y:yt,height:X.stack(o.stat),width:vt})]),[c]=i,r={default:!0,ratio:!0};n.Scale.train(e.x,c.x,r),n.Scale.train(e.y,c.height,r),n.Scale.train(e.width,[0,1],r),n.Scale.train(e.height,c.height,r),n.Expanse.freeze(e.y.domain,["zero"]),n.Expanse.freeze(e.height.domain,["zero"]),pt.setWeights(e.x.domain);const g=1/new Set(c.x).size;n.Expanse.linkTo(e.y.domain,e.height.domain),n.Expanse.set(e.width.codomain,o=>{o.scale=g,o.mult=.9,o.offset=0},{default:!0}),N.setName(e.y,N.getName(c.height)),F.removeListeners(t,"reorder"),n.Plot.listen(t,"reorder",()=>Ze(e.x.domain,c.height)),t.representation=0,n.Plot.setData(t,i),n.Plot.render(t),n.Plot.renderAxes(t)}function ta(t){const{summaries:a,scales:e}=t,i=et.translate(a,[g=>({x:g.label,y:yt,height:vt,width:g.stat}),g=>({x:g.label,y:yt,height:X.normalize(X.stack(g.stat),(o,b)=>o/b),width:X.parent(g.stat)})]),[c]=i,r={default:!0,ratio:!0};n.Scale.train(e.x,c.x,r),n.Scale.train(e.y,[0,1],r),n.Scale.train(e.width,Et(c.width),r),n.Scale.train(e.height,[0,1],r),n.Expanse.freeze(e.y.domain,["zero"]),n.Expanse.freeze(e.height.domain,["zero"]),pt.setWeights(e.x.domain,c.width),n.Expanse.linkTo(e.y.domain,e.height.domain),n.Expanse.set(e.width.codomain,g=>{g.scale=1,g.mult=1,g.offset=-1},{default:!0}),N.setName(e.y,"proportion"),F.removeListeners(t,"reorder"),n.Plot.listen(t,"reorder",()=>Ze(e.x.domain,c.width)),t.representation=1,n.Plot.setData(t,i),n.Plot.render(t),n.Plot.renderAxes(t)}function ea(t,a,e){const{data:i,marker:c}=t;let[r,g,o]=a(i);const b=o&&(e!=null&&e.reducer)?e.reducer:n.Reducer.sum,l=o?[...o]:()=>1,m=n.Factor.product(n.Factor.from(r),n.Factor.from(g)),f=n.Factor.product(m,c.factor),s=[m,f],v=et.formatQueries((e==null?void 0:e.queries)??[],i),h=et.of({stat:[l,b],...v},s),u=[],d=0,y={type:"fluct",scales:{x:"band",y:"band"}},k={representation:d,...n.Plot.of(y),summaries:h,coordinates:u};return n.Scale.shareCodomain(k.scales.area,k.scales.width),n.Scale.shareCodomain(k.scales.area,k.scales.height),n.Plot.listen(k,"n",()=>na(k)),tn(k),n.Plot.addGeom(k,Bt.of({vAnchor:Ht.Middle})),k}function na(t){t.representation===0?aa(t):tn(t)}function tn(t){const{summaries:a,scales:e}=t,i=et.translate(a,[o=>({x:o.label,y:o.label$,height:o.stat,width:o.stat}),o=>({x:o.label,y:o.label$,height:X.stack(o.stat),width:X.stack(o.stat)})]),[c]=i,r={default:!0,ratio:!0};n.Scale.train(e.x,c.x,r),n.Scale.train(e.y,c.y,r),n.Scale.train(e.width,c.width,r),n.Scale.train(e.height,c.height,r);const g=It(new Set(c.x).size,new Set(c.y).size);n.Expanse.set(e.area.codomain,o=>{o.scale=1/g,o.mult=.9,o.offset=0},{default:!0}),n.Plot.setData(t,i),t.representation=0,n.Plot.render(t)}function aa(t){const{summaries:a,scales:e}=t,i=et.translate(a,[o=>({x:o.label,y:o.label$,height:vt,width:vt}),o=>({x:o.label,y:o.label$,height:X.normalize(X.stack(o.stat),(b,l)=>b/l),width:X.normalize(X.stack(o.stat),(b,l)=>b/l)})]),[c]=i,r={default:!0,ratio:!0};n.Scale.train(e.x,c.x,r),n.Scale.train(e.y,c.y,r),n.Scale.train(e.width,[0,1],r),n.Scale.train(e.height,[0,1],r);const g=It(new Set(c.x).size,new Set(c.y).size);n.Expanse.set(e.area.codomain,o=>{o.scale=1/g,o.mult=.9,o.offset=-1},{default:!0}),n.Plot.setData(t,i),t.representation=1,n.Plot.render(t)}function ra(t,a,e){const{data:i,marker:c}=t;let[r,g]=a(i);const o=g&&(e!=null&&e.reducer)?e.reducer:n.Reducer.sum,b=g||(()=>1),[l,m]=At(r),f=m-l,s=F.of({anchor:l,width:f/15}),v=n.Factor.mono(r.length),h=n.Factor.product(v,n.Factor.bin(r,s)),u=n.Factor.product(h,c.factor),d=[v,h,u],y=e!=null&&e.queries?e.queries(i):{},k=et.of({stat:[b,o],...y},d),p=0,M=[],E={type:"histo"},S={representation:p,...n.Plot.of(E),summaries:k,coordinates:M};n.Plot.listen(S,"n",()=>ia(S));const w=f/10;return n.Plot.listen(S,"grow",()=>F.set(s,z=>z.width*=1.1111111111111112)),n.Plot.listen(S,"shrink",()=>F.set(s,z=>z.width*=.9)),n.Plot.listen(S,"'",()=>F.set(s,z=>z.anchor+=w)),n.Plot.listen(S,";",()=>F.set(s,z=>z.anchor-=w)),n.Plot.listen(S,"reset",()=>{F.set(s,z=>(z.anchor=l,z.width=f/15))}),en(S),n.Plot.addGeom(S,Wt.of()),S}function ia(t){t.representation===0?oa(t):en(t)}function en(t){const{summaries:a}=t,e=et.translate(a,[r=>r,r=>({x0:r.binMin,y0:yt,x1:r.binMax,y1:r.stat}),r=>({x0:r.binMin,y0:yt,x1:r.binMax,y1:X.stack(r.stat)})]),{scales:i}=t,[,c]=e;n.Scale.train(i.x,c.x1,{default:!0,name:!1}),n.Scale.train(i.y,c.y1,{default:!0,ratio:!0});for(const r of t.data)F.removeListeners(r,"changed");F.listen(c,"changed",()=>{n.Scale.train(i.x,c.x1,{default:!0,name:!1}),n.Scale.train(i.y,c.y1,{default:!0,ratio:!0})}),n.Expanse.freeze(i.y.domain,["zero"]),N.setName(i.x,N.getName(a[1].breaks)),N.setName(i.y,N.getName(c.y1)),t.representation=0,n.Plot.setData(t,e),n.Plot.render(t),n.Plot.renderAxes(t)}function oa(t){const{summaries:a}=t,e=et.translate(a,[r=>r,r=>({x0:X.shiftLeft(X.stack(r.stat)),y0:yt,x1:X.stack(r.stat),y1:vt,query1:r.binMin,query2:r.binMax}),r=>({x0:X.shiftLeft(X.stack(X.parent(r.stat))),y0:yt,x1:X.stack(X.parent(r.stat)),y1:X.normalize(X.stack(r.stat),(g,o)=>g/o)})]),{scales:i}=t,[,c]=e;n.Scale.train(i.x,[0,...c.x1],{default:!0,name:!1}),n.Scale.train(i.y,[0,1],{default:!0,ratio:!0}),F.listen(c,"changed",()=>{n.Scale.train(i.x,[0,...c.x1],{default:!0,name:!1})}),n.Expanse.freeze(i.y.domain,["zero"]),N.setName(i.x,"cumulative count"),N.setName(i.y,"proportion"),n.Plot.setData(t,e),t.representation=1,n.Plot.render(t),n.Plot.renderAxes(t)}function sa(t,a,e){const{data:i,marker:c}=t;let[r,g,o]=a(i);const b=o&&(e!=null&&e.reducer)?e.reducer:n.Reducer.sum,l=o||(()=>1),[m,f]=At(r),[s,v]=At(g),[h,u]=[f-m,v-s],d=F.of({anchor:m,width:h/15}),y=F.of({anchor:s,width:u/15}),k=n.Factor.bin(r,d),p=n.Factor.bin(g,y),M=n.Factor.product(k,p),E=n.Factor.product(M,c.factor),S=[M,E],w=e!=null&&e.queries?e.queries(i):{},z=et.of({stat:[l,b],...w},S),_=0,T=[],P={type:"histo2d",ratio:e==null?void 0:e.ratio},C={representation:_,...n.Plot.of(P),summaries:z,coordinates:T};return n.Plot.listen(C,"n",()=>ca(C)),n.Plot.listen(C,"=",()=>{F.set(d,R=>R.width*=1.1111111111111112),F.set(y,R=>R.width*=1.1111111111111112)}),n.Plot.listen(C,"-",()=>{F.set(d,R=>R.width*=.9),F.set(y,R=>R.width*=.9)}),n.Plot.listen(C,"r",()=>{F.set(d,R=>(R.anchor=m,R.width=h/15)),F.set(y,R=>(R.anchor=s,R.width=u/15))}),nn(C),n.Plot.addGeom(C,Wt.of()),C}function ca(t){t.representation===0?la(t):nn(t)}function nn(t){const{summaries:a}=t,e=et.translate(a,[r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:r.stat}),r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:X.stack(r.stat)})]),{scales:i}=t,[,c]=e;n.Scale.train(i.x,c.x1,{default:!0}),n.Scale.train(i.y,c.y1,{default:!0}),n.Scale.train(i.area,c.area,{default:!0}),n.Expanse.set(i.area.codomain,r=>(r.min=0,r.max=1),{default:!0}),n.Expanse.freeze(i.area.codomain,["min","max"]);for(const r of t.data)F.removeListeners(r,"changed");F.listen(c,"changed",()=>{n.Scale.train(i.x,c.x1,{default:!0,name:!1}),n.Scale.train(i.y,c.y1,{default:!0,name:!1}),n.Scale.train(i.area,c.area,{default:!0})}),t.representation=0,n.Plot.setData(t,e),N.setName(i.x,N.getName(a[1].breaks)),N.setName(i.y,N.getName(a[1].breaks$)),n.Plot.render(t),n.Plot.renderAxes(t)}function la(t){const{summaries:a}=t,e=et.translate(a,[r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:vt}),r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:X.normalize(X.stack(r.stat),(g,o)=>g/o)})]),{scales:i}=t,[,c]=e;n.Scale.train(i.x,c.x1,{default:!0}),n.Scale.train(i.y,c.y1,{default:!0}),n.Scale.train(i.area,[0,1],{default:!0}),n.Expanse.set(i.area.codomain,r=>(r.min=0,r.max=1),{default:!0}),n.Expanse.freeze(i.area.codomain,["min","max"]);for(const r of t.data)F.removeListeners(r,"changed");F.listen(c,"changed",()=>{n.Scale.train(i.x,c.x1,{default:!0,name:!1}),n.Scale.train(i.y,c.y1,{default:!0,name:!1})}),t.representation=1,n.Plot.setData(t,e),N.setName(i.x,N.getName(a[1].breaks)),N.setName(i.y,N.getName(a[1].breaks$)),n.Plot.render(t),n.Plot.renderAxes(t)}function ua(t,a,e){const{data:i,marker:c}=t,r=a(i),g=r.map(N.getName),o=gt.constant(g),b=gt.multi(r),l=e!=null&&e.queries?e.queries(i):{},m=n.Factor.bijection({x:o,y:b,...l}),f=n.Factor.product(m,c.factor),s=et.of({},[m,f]),v=et.translate(s,[E=>E,E=>E]),h=n.Plot.of({type:"pcoords"}),{scales:u}=h,{expandX:d,expandY:y}=t.options,k={zero:d,one:1-d},p={zero:y,one:1-y};n.Scale.setDomain(u.x,n.Expanse.split(n.Expanse.point(g,k))),n.Scale.setCoomain(u.x,n.Expanse.split(u.x.codomain));const M=r.map(E=>n.Expanse.infer(E));return n.Scale.setDomain(u.y,n.Expanse.compound(M,p)),n.Scale.setCoomain(u.y,n.Expanse.split(u.y.codomain)),N.setName(u.x,"variable"),N.setName(u.y,"value"),n.Plot.setData(h,v),n.Plot.addGeom(h,oe.of()),h}function fa(t,a,e){const{data:i,marker:c}=t,[r,g,o]=a(i),b=e!=null&&e.queries?e==null?void 0:e.queries(i):{},l={x:r,y:g,size:o??(()=>.5),...b},m=n.Factor.bijection(l),f=n.Factor.product(m,c.factor),s=et.of({},[m,f]),v=et.translate(s,[d=>d,d=>d]),h=n.Plot.of({type:"scatter",ratio:e==null?void 0:e.ratio}),{scales:u}=h;return n.Scale.train(u.x,r,{default:!0}),n.Scale.train(u.y,g,{default:!0}),o&&n.Scale.train(u.size,o,{default:!0}),n.Plot.setData(h,v),n.Plot.addGeom(h,se.of()),{...h,summaries:s}}function ce(t){"@babel/helpers - typeof";return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ce(t)}var da=/^\s+/,ha=/\s+$/;function I(t,a){if(t=t||"",a=a||{},t instanceof I)return t;if(!(this instanceof I))return new I(t,a);var e=ma(t);this._originalInput=t,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=Math.round(100*this._a)/100,this._format=a.format||e.format,this._gradientType=a.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=e.ok}I.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(a.r*299+a.g*587+a.b*114)/1e3},getLuminance:function(){var a=this.toRgb(),e,i,c,r,g,o;return e=a.r/255,i=a.g/255,c=a.b/255,e<=.03928?r=e/12.92:r=Math.pow((e+.055)/1.055,2.4),i<=.03928?g=i/12.92:g=Math.pow((i+.055)/1.055,2.4),c<=.03928?o=c/12.92:o=Math.pow((c+.055)/1.055,2.4),.2126*r+.7152*g+.0722*o},setAlpha:function(a){return this._a=ln(a),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var a=rn(this._r,this._g,this._b);return{h:a.h*360,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=rn(this._r,this._g,this._b),e=Math.round(a.h*360),i=Math.round(a.s*100),c=Math.round(a.v*100);return this._a==1?"hsv("+e+", "+i+"%, "+c+"%)":"hsva("+e+", "+i+"%, "+c+"%, "+this._roundA+")"},toHsl:function(){var a=an(this._r,this._g,this._b);return{h:a.h*360,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=an(this._r,this._g,this._b),e=Math.round(a.h*360),i=Math.round(a.s*100),c=Math.round(a.l*100);return this._a==1?"hsl("+e+", "+i+"%, "+c+"%)":"hsla("+e+", "+i+"%, "+c+"%, "+this._roundA+")"},toHex:function(a){return on(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(a){return wa(this._r,this._g,this._b,this._a,a)},toHex8String:function(a){return"#"+this.toHex8(a)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(G(this._r,255)*100)+"%",g:Math.round(G(this._g,255)*100)+"%",b:Math.round(G(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(G(this._r,255)*100)+"%, "+Math.round(G(this._g,255)*100)+"%, "+Math.round(G(this._b,255)*100)+"%)":"rgba("+Math.round(G(this._r,255)*100)+"%, "+Math.round(G(this._g,255)*100)+"%, "+Math.round(G(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Na[on(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var e="#"+sn(this._r,this._g,this._b,this._a),i=e,c=this._gradientType?"GradientType = 1, ":"";if(a){var r=I(a);i="#"+sn(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+c+"startColorstr="+e+",endColorstr="+i+")"},toString:function(a){var e=!!a;a=a||this._format;var i=!1,c=this._a<1&&this._a>=0,r=!e&&c&&(a==="hex"||a==="hex6"||a==="hex3"||a==="hex4"||a==="hex8"||a==="name");return r?a==="name"&&this._a===0?this.toName():this.toRgbString():(a==="rgb"&&(i=this.toRgbString()),a==="prgb"&&(i=this.toPercentageRgbString()),(a==="hex"||a==="hex6")&&(i=this.toHexString()),a==="hex3"&&(i=this.toHexString(!0)),a==="hex4"&&(i=this.toHex8String(!0)),a==="hex8"&&(i=this.toHex8String()),a==="name"&&(i=this.toName()),a==="hsl"&&(i=this.toHslString()),a==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return I(this.toString())},_applyModification:function(a,e){var i=a.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(pa,arguments)},brighten:function(){return this._applyModification(za,arguments)},darken:function(){return this._applyModification(Ma,arguments)},desaturate:function(){return this._applyModification(va,arguments)},saturate:function(){return this._applyModification(ka,arguments)},greyscale:function(){return this._applyModification(Sa,arguments)},spin:function(){return this._applyModification(Aa,arguments)},_applyCombination:function(a,e){return a.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(Pa,arguments)},complement:function(){return this._applyCombination(Ea,arguments)},monochromatic:function(){return this._applyCombination(xa,arguments)},splitcomplement:function(){return this._applyCombination(_a,arguments)},triad:function(){return this._applyCombination(cn,[3])},tetrad:function(){return this._applyCombination(cn,[4])}},I.fromRatio=function(t,a){if(ce(t)=="object"){var e={};for(var i in t)t.hasOwnProperty(i)&&(i==="a"?e[i]=t[i]:e[i]=Ut(t[i]));t=e}return I(t,a)};function ma(t){var a={r:0,g:0,b:0},e=1,i=null,c=null,r=null,g=!1,o=!1;return typeof t=="string"&&(t=Ra(t)),ce(t)=="object"&&(wt(t.r)&&wt(t.g)&&wt(t.b)?(a=ga(t.r,t.g,t.b),g=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):wt(t.h)&&wt(t.s)&&wt(t.v)?(i=Ut(t.s),c=Ut(t.v),a=ya(t.h,i,c),g=!0,o="hsv"):wt(t.h)&&wt(t.s)&&wt(t.l)&&(i=Ut(t.s),r=Ut(t.l),a=ba(t.h,i,r),g=!0,o="hsl"),t.hasOwnProperty("a")&&(e=t.a)),e=ln(e),{ok:g,format:t.format||o,r:Math.min(255,Math.max(a.r,0)),g:Math.min(255,Math.max(a.g,0)),b:Math.min(255,Math.max(a.b,0)),a:e}}function ga(t,a,e){return{r:G(t,255)*255,g:G(a,255)*255,b:G(e,255)*255}}function an(t,a,e){t=G(t,255),a=G(a,255),e=G(e,255);var i=Math.max(t,a,e),c=Math.min(t,a,e),r,g,o=(i+c)/2;if(i==c)r=g=0;else{var b=i-c;switch(g=o>.5?b/(2-i-c):b/(i+c),i){case t:r=(a-e)/b+(a<e?6:0);break;case a:r=(e-t)/b+2;break;case e:r=(t-a)/b+4;break}r/=6}return{h:r,s:g,l:o}}function ba(t,a,e){var i,c,r;t=G(t,360),a=G(a,100),e=G(e,100);function g(l,m,f){return f<0&&(f+=1),f>1&&(f-=1),f<.16666666666666666?l+(m-l)*6*f:f<.5?m:f<.6666666666666666?l+(m-l)*(.6666666666666666-f)*6:l}if(a===0)i=c=r=e;else{var o=e<.5?e*(1+a):e+a-e*a,b=2*e-o;i=g(b,o,t+.3333333333333333),c=g(b,o,t),r=g(b,o,t-.3333333333333333)}return{r:i*255,g:c*255,b:r*255}}function rn(t,a,e){t=G(t,255),a=G(a,255),e=G(e,255);var i=Math.max(t,a,e),c=Math.min(t,a,e),r,g,o=i,b=i-c;if(g=i===0?0:b/i,i==c)r=0;else{switch(i){case t:r=(a-e)/b+(a<e?6:0);break;case a:r=(e-t)/b+2;break;case e:r=(t-a)/b+4;break}r/=6}return{h:r,s:g,v:o}}function ya(t,a,e){t=G(t,360)*6,a=G(a,100),e=G(e,100);var i=Math.floor(t),c=t-i,r=e*(1-a),g=e*(1-c*a),o=e*(1-(1-c)*a),b=i%6,l=[e,g,r,r,o,e][b],m=[o,e,e,g,r,r][b],f=[r,r,o,e,e,g][b];return{r:l*255,g:m*255,b:f*255}}function on(t,a,e,i){var c=[ht(Math.round(t).toString(16)),ht(Math.round(a).toString(16)),ht(Math.round(e).toString(16))];return i&&c[0].charAt(0)==c[0].charAt(1)&&c[1].charAt(0)==c[1].charAt(1)&&c[2].charAt(0)==c[2].charAt(1)?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function wa(t,a,e,i,c){var r=[ht(Math.round(t).toString(16)),ht(Math.round(a).toString(16)),ht(Math.round(e).toString(16)),ht(un(i))];return c&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function sn(t,a,e,i){var c=[ht(un(i)),ht(Math.round(t).toString(16)),ht(Math.round(a).toString(16)),ht(Math.round(e).toString(16))];return c.join("")}I.equals=function(t,a){return!t||!a?!1:I(t).toRgbString()==I(a).toRgbString()},I.random=function(){return I.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function va(t,a){a=a===0?0:a||10;var e=I(t).toHsl();return e.s-=a/100,e.s=le(e.s),I(e)}function ka(t,a){a=a===0?0:a||10;var e=I(t).toHsl();return e.s+=a/100,e.s=le(e.s),I(e)}function Sa(t){return I(t).desaturate(100)}function pa(t,a){a=a===0?0:a||10;var e=I(t).toHsl();return e.l+=a/100,e.l=le(e.l),I(e)}function za(t,a){a=a===0?0:a||10;var e=I(t).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(a/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(a/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(a/100)))),I(e)}function Ma(t,a){a=a===0?0:a||10;var e=I(t).toHsl();return e.l-=a/100,e.l=le(e.l),I(e)}function Aa(t,a){var e=I(t).toHsl(),i=(e.h+a)%360;return e.h=i<0?360+i:i,I(e)}function Ea(t){var a=I(t).toHsl();return a.h=(a.h+180)%360,I(a)}function cn(t,a){if(isNaN(a)||a<=0)throw new Error("Argument to polyad must be a positive number");for(var e=I(t).toHsl(),i=[I(t)],c=360/a,r=1;r<a;r++)i.push(I({h:(e.h+r*c)%360,s:e.s,l:e.l}));return i}function _a(t){var a=I(t).toHsl(),e=a.h;return[I(t),I({h:(e+72)%360,s:a.s,l:a.l}),I({h:(e+216)%360,s:a.s,l:a.l})]}function Pa(t,a,e){a=a||6,e=e||30;var i=I(t).toHsl(),c=360/e,r=[I(t)];for(i.h=(i.h-(c*a>>1)+720)%360;--a;)i.h=(i.h+c)%360,r.push(I(i));return r}function xa(t,a){a=a||6;for(var e=I(t).toHsv(),i=e.h,c=e.s,r=e.v,g=[],o=1/a;a--;)g.push(I({h:i,s:c,v:r})),r=(r+o)%1;return g}I.mix=function(t,a,e){e=e===0?0:e||50;var i=I(t).toRgb(),c=I(a).toRgb(),r=e/100,g={r:(c.r-i.r)*r+i.r,g:(c.g-i.g)*r+i.g,b:(c.b-i.b)*r+i.b,a:(c.a-i.a)*r+i.a};return I(g)},I.readability=function(t,a){var e=I(t),i=I(a);return(Math.max(e.getLuminance(),i.getLuminance())+.05)/(Math.min(e.getLuminance(),i.getLuminance())+.05)},I.isReadable=function(t,a,e){var i=I.readability(t,a),c,r;switch(r=!1,c=Oa(e),c.level+c.size){case"AAsmall":case"AAAlarge":r=i>=4.5;break;case"AAlarge":r=i>=3;break;case"AAAsmall":r=i>=7;break}return r},I.mostReadable=function(t,a,e){var i=null,c=0,r,g,o,b;e=e||{},g=e.includeFallbackColors,o=e.level,b=e.size;for(var l=0;l<a.length;l++)r=I.readability(t,a[l]),r>c&&(c=r,i=I(a[l]));return I.isReadable(t,i,{level:o,size:b})||!g?i:(e.includeFallbackColors=!1,I.mostReadable(t,["#fff","#000"],e))};var Le=I.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Na=I.hexNames=La(Le);function La(t){var a={};for(var e in t)t.hasOwnProperty(e)&&(a[t[e]]=e);return a}function ln(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function G(t,a){Ta(t)&&(t="100%");var e=Ca(t);return t=Math.min(a,Math.max(0,parseFloat(t))),e&&(t=parseInt(t*a,10)/100),Math.abs(t-a)<1e-6?1:t%a/parseFloat(a)}function le(t){return Math.min(1,Math.max(0,t))}function ut(t){return parseInt(t,16)}function Ta(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function Ca(t){return typeof t=="string"&&t.indexOf("%")!=-1}function ht(t){return t.length==1?"0"+t:""+t}function Ut(t){return t<=1&&(t=t*100+"%"),t}function un(t){return Math.round(parseFloat(t)*255).toString(16)}function fn(t){return ut(t)/255}var mt=function(){var t="[-\\+]?\\d+%?",a="[-\\+]?\\d*\\.\\d+%?",e="(?:"+a+")|(?:"+t+")",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",c="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+c),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+c),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+c),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function wt(t){return!!mt.CSS_UNIT.exec(t)}function Ra(t){t=t.replace(da,"").replace(ha,"").toLowerCase();var a=!1;if(Le[t])t=Le[t],a=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=mt.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=mt.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=mt.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=mt.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=mt.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=mt.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=mt.hex8.exec(t))?{r:ut(e[1]),g:ut(e[2]),b:ut(e[3]),a:fn(e[4]),format:a?"name":"hex8"}:(e=mt.hex6.exec(t))?{r:ut(e[1]),g:ut(e[2]),b:ut(e[3]),format:a?"name":"hex"}:(e=mt.hex4.exec(t))?{r:ut(e[1]+""+e[1]),g:ut(e[2]+""+e[2]),b:ut(e[3]+""+e[3]),a:fn(e[4]+""+e[4]),format:a?"name":"hex8"}:(e=mt.hex3.exec(t))?{r:ut(e[1]+""+e[1]),g:ut(e[2]+""+e[2]),b:ut(e[3]+""+e[3]),format:a?"name":"hex"}:!1}function Oa(t){var a,e;return t=t||{level:"AA",size:"small"},a=(t.level||"AA").toUpperCase(),e=(t.size||"small").toLowerCase(),a!=="AA"&&a!=="AAA"&&(a="AA"),e!=="small"&&e!=="large"&&(e="small"),{level:a,size:e}}const Pt={size:10,expandX:.1,expandY:.1,gapPct:.8,gapPx:1,axisLabelSize:1,axisTitleSize:1.25,margins:[0,0,0,0],colors:[],marginLines:[3.5,3.5,1,1],groupColors:["#984ea3","#e41a1c","#4daf4a","#377eb8"],plotBackground:"#fefffe"};dn(Pt);function dn(t){const a=t.groupColors.length;t.colors.length=2*a;for(let r=0;r<a;r++){const g=t.groupColors[r];t.colors[r]=I(g).darken(10).saturate(20).toString(),t.colors[a+r]=I(g).lighten(20).saturate(20).toString()}const{marginLines:e,axisTitleSize:i}=t,c=parseFloat(getComputedStyle(document.documentElement).fontSize);t.margins=e.map(r=>r*c*i)}const Z={createElement(t,a,...e){const i=document.createElement(t);for(const[c,r]of Object.entries(a||{}))c.startsWith("on")&&c.toLowerCase()in window?i.addEventListener(c.toLowerCase().slice(2),r):i.setAttribute(c,r);return hn(i,...e),i}};function hn(t,...a){if(a.length===0)return;if(a.length>1){for(const c of a)hn(t,c);return}const e=a[0],i=Fa(e)?e:document.createTextNode(e);t.appendChild(i)}function Fa(t){return t.nodeType!=null}function Ia(t){mn(t,"x"),mn(t,"y")}function mn(t,a){const{frames:e,scales:i,options:c}=t,{margins:r}=c,g=i[a],o=a==="x"?i.y:i.x,b=e[`${a}Axis`],{context:l}=b,{labels:m,positions:f}=n.Scale.breaks(g),[s,v,h,u]=r,d=parseInt(l.font.match(/^[0-9]*/)[0],10),y=o.codomain.min-d/2,{width:k,height:p}=b;if(j.clear(b),a==="x"){let[M,E]=[0,0];for(let S=0;S<m.length;S++){const w=m[S],z=f[S],_=j.textWidth(b,w)+1;bn(z,v,k-u)||yn(M,z,E,_)||([M,E]=[z,_],j.text(b,z,y,w))}}else if(a==="y"){let[M,E]=[0,0];for(let S=0;S<m.length;S++){const w=m[S],z=f[S],_=j.textWidth(b,w)+1,T=j.textHeight(b,w)+1;r[1]/2<_&&(r[1]=2*_,n.Plot.resize(t)),!bn(z,s,p-h)&&(yn(M,z,E,T)||([M,E]=[z,T],j.text(b,y,z,w)))}}}function Da(t){gn(t,"x"),gn(t,"y")}function gn(t,a){const{scales:e,frames:i,options:c}=t,{margins:r}=c,g=e[a],o=a==="x"?t.scales.y:t.scales.x,b=i.base,l=N.getName(g),m=a==="x"?r[0]:r[1],f=n.Expanse.unnormalize(g.codomain,.5),s=n.Expanse.unnormalize(o.codomain,0)-m*2/3;a==="x"&&j.text(b,f,s,l),a==="y"&&j.text(b,s,f,l,{vertical:!0})}function bn(t,a,e){return t<a||t>e}function yn(t,a,e,i){const[c,r]=[t-e/2,t+e/2],[g,o]=[a-i/2,a+i/2];return c<o&&r>=g}n.Plot=void 0,(t=>{(A=>{A.Select="select",A.Pan="pan",A.Query="query"})(t.Mode||(t.Mode={}));function a(A){const x=(A==null?void 0:A.type)??"unknown",L=Z.createElement("div",{id:"plot",class:"relative h-full w-full drop-shadow-md"}),O=Z.createElement("table",{class:"relative z-30 hidden bg-gray-50 shadow-md"});L.appendChild(O);const D=[],q={},K={},B=[],H=[],Q=[],U={...Pt,...A},{expandX:W,expandY:it}=U,tt=[[W,it,1-W,1-it]],nt={active:!1,locked:!1,mousedown:!1,mousebutton:$t.Left,mode:"select",mousecoords:[0,0,0,0],lastkey:"",ratio:(A==null?void 0:A.ratio)??void 0},st=F.of({type:x,data:D,container:L,queryTable:O,frames:q,scales:K,renderables:B,selectables:H,queryables:Q,zoomStack:tt,parameters:nt,options:U});return qa(st,U),Ha(st,U),ja(st),st}t.of=a,t.listen=F.makeListenFn(),t.dispatch=F.makeDispatchFn(),t.scatter=fa,t.bar=Zn,t.fluct=ea,t.histo=ra,t.histo2d=sa,t.pcoords=ua;function e(A,x){A.appendChild(x.container),t.resize(x)}t.append=e;function i(A,x){for(const L of A.data)F.removeListeners(L,"changed");A.data.length=0;for(let L=0;L<x.length;L++)A.data.push(x[L]);F.listen(zt(x),"changed",()=>t.render(A))}t.setData=i;function c(A,x){x.scales=A.scales,x.data=A.data;const{renderables:L,selectables:O,queryables:D}=A;for(const q of[L,O,D])q.push(x)}t.addGeom=c;function r(A,x){const{renderables:L,selectables:O,queryables:D}=A;for(const q of[L,O,D])St(q,x)}t.deleteGeom=r;function g(A){ye(A.container,"outline outline-2 outline-slate-600"),A.parameters.active=!0,t.dispatch(A,"activated")}t.activate=g;function o(A){we(A.container,"outline outline-2 outline-slate-600"),A.parameters.active=!1,t.dispatch(A,"deactivated")}t.deactivate=o;function b(A){A.parameters.locked=!0}t.lock=b;function l(A){A.parameters.locked=!1}t.unlock=l;function m(A){for(const x of Gn)j.clear(A.frames[x]);for(const x of A.renderables)$.render(x,A.frames)}t.render=m;function f(A){for(const x of["base","xAxis","yAxis"])j.clear(A.frames[x]);Ia(A),Da(A)}t.renderAxes=f;function s(A){j.clear(A.frames.user)}t.clearUserFrame=s;function v(A){for(const at of Object.values(A.frames))j.resize(at);const{container:x,scales:L,frames:O,parameters:D,options:q}=A,{clientWidth:K,clientHeight:B}=x,{x:H,y:Q,width:U,height:W,area:it}=L,{margins:tt}=q,[nt,st]=[tt[0],tt[1]],[ct,bt]=[B-tt[2],K-tt[3]],xt={default:!0};O.under.canvas.style.width=`calc(100% - ${st}px - ${tt[3]}px)`,O.under.canvas.style.height=`calc(100% - ${nt}px - ${tt[2]}px)`,O.over.canvas.style.width=`calc(100% - ${st}px - ${tt[3]}px)`,O.over.canvas.style.height=`calc(100% - ${nt}px - ${tt[2]}px)`;for(const at of Object.values(O))j.clip(at);n.Expanse.set(H.codomain,at=>(at.min=st,at.max=bt),xt),n.Expanse.set(Q.codomain,at=>(at.min=nt,at.max=ct),xt);const[vn,kn]=[bt-st,ct-nt];if(n.Expanse.set(U.codomain,at=>at.max=vn,xt),n.Expanse.set(W.codomain,at=>at.max=kn,xt),n.Expanse.set(it.codomain,at=>at.max=Math.min(vn,kn),xt),D.ratio){const{expandX:at,expandY:Sn}=Pt;n.Expanse.set(H.domain,Xt=>(Xt.zero=at,Xt.one=1-at),xt),n.Expanse.set(Q.domain,Xt=>(Xt.zero=Sn,Xt.one=1-Sn),xt),t.applyRatio(A,D.ratio)}}t.resize=v;function h(A){const{selectables:x,parameters:L,frames:O}=A,D=new Set;for(const q of x){const K=$.check(q,L.mousecoords);for(let B=0;B<K.length;B++)D.add(K[B])}t.dispatch(A,"set-selected",{cases:Array.from(D)}),t.dispatch(A,"lock-others"),j.clear(O.user),j.rectangleXY(O.user,...L.mousecoords)}t.checkSelection=h;function u(A,x){A.parameters.mode=x}t.setMode=u;function d(A,x){A.parameters.mousedown=x}t.setMousedown=d;function y(A,x){A.parameters.mousebutton=x}t.setMouseButton=y,t.mousemoveHandlers={select:k,pan:p,query:M};function k(A,x){const{container:L,parameters:O}=A;if(!O.active||!O.mousedown)return;t.dispatch(A,"clear-transient");const{mousecoords:D}=O,{clientHeight:q}=L,K=x.offsetX,B=q-x.offsetY;D[2]=K,D[3]=B,t.checkSelection(A)}function p(A,x){const{container:L,scales:O,parameters:D}=A;if(!D.active||!D.mousedown)return;const{mousecoords:q}=D,{clientWidth:K,clientHeight:B}=L,[H,Q]=q,U=x.offsetX,W=B-x.offsetY,it=(U-H)/K,tt=(W-Q)/B;n.Scale.move(O.x,it),n.Scale.move(O.y,tt),q[0]=U,q[1]=W,t.clearUserFrame(A)}function M(A,x){const{offsetX:L,offsetY:O}=x,{container:D,queryTable:q,queryables:K}=A,{clientWidth:B,clientHeight:H}=D;q.style.display="none";const Q=L,U=H-O;let W;for(const st of K)if(W=$.query(st,[Q,U]),W)break;if(!W)return;Ke(q);for(const[st,ct]of Object.entries(W)){const bt=Z.createElement("tr",null,Z.createElement("td",{class:"border border-gray-400 px-3"},st),Z.createElement("td",{class:"border border-gray-400 px-3 font-mono"},He(ct)));q.appendChild(bt)}q.style.display="inline-block";const it=getComputedStyle(q),tt=parseFloat(it.width.slice(0,-2)),{clientWidth:nt}=q;Q+tt>B?(q.style.left="auto",q.style.right=`${nt-L+5}px`):(q.style.left=`${Q+5}px`,q.style.right="auto"),q.style.top=O+"px"}t.keybindings={"=":"grow","-":"shrink","]":"unfade","[":"fade",z:"zoom",x:"pop-zoom",o:"reorder",";":"decrement-anchor","'":"increment-anchor"};function E(A){const{area:x,size:L,width:O}=A.scales;n.Expanse.set(x.codomain,D=>(D.min*=1.1111111111111112,D.max*=1.1111111111111112)),n.Expanse.set(L.codomain,D=>(D.min*=1.1111111111111112,D.max*=1.1111111111111112)),n.Expanse.set(O.codomain,D=>D.mult<1?D.mult*=1.1111111111111112:null)}t.grow=E;function S(A){const{area:x,width:L,size:O}=A.scales;n.Expanse.set(x.codomain,D=>(D.min*=.9,D.max*=.9)),n.Expanse.set(O.codomain,D=>(D.min*=.9,D.max*=.9)),n.Expanse.set(L.codomain,D=>D.mult*=.9)}t.shrink=S;function w(A){const{frames:x}=A;for(const L of Ae)j.setAlpha(x[L],O=>O*9/10);t.render(A)}t.fade=w;function z(A){const{frames:x}=A;for(const L of Ae)j.setAlpha(x[L],O=>O*10/9);t.render(A)}t.unfade=z;function _(A){const{frames:x,scales:L}=A;for(const O of Ae)j.resetAlpha(x[O]);for(const O of Object.values(L))n.Scale.restoreDefaults(O);A.zoomStack.length=1,t.clearUserFrame(A)}t.reset=_;function T(A){t.setMode(A,"query")}t.setQueryMode=T;function P(A,x){const{scales:L,parameters:O,zoomStack:D}=A;let{coords:q,units:K}=x??{};K=K??"screen";let[B,H,Q,U]=q??O.mousecoords;const{x:W,y:it}=L;if(K==="data"){const ct={silent:!0};n.Expanse.set(W.domain,bt=>(bt.zero=0,bt.one=1),ct),n.Expanse.set(it.domain,bt=>(bt.zero=0,bt.one=1),ct),B=n.Expanse.normalize(W.domain,B),Q=n.Expanse.normalize(W.domain,Q),H=n.Expanse.normalize(it.domain,H),U=n.Expanse.normalize(it.domain,U)}if(K==="screen"){if(Math.abs(Q-B)<10||Math.abs(U-H)<10)return;B=Dt(n.Expanse.normalize(W.codomain,B)),Q=Dt(n.Expanse.normalize(W.codomain,Q)),H=Dt(n.Expanse.normalize(it.codomain,H)),U=Dt(n.Expanse.normalize(it.codomain,U))}[B,Q]=[B,Q].sort(ft),[H,U]=[H,U].sort(ft),n.Scale.expand(L.x,B,Q),n.Scale.expand(L.y,H,U);const tt=Lt(B,Q),nt=Lt(H,U),st=Ft(It(tt,nt));n.Expanse.set(L.width.codomain,ct=>ct.max*=tt),n.Expanse.set(L.height.codomain,ct=>ct.max*=nt),n.Expanse.set(L.area.codomain,ct=>ct.max*=st),n.Expanse.set(L.size.codomain,ct=>ct.max*=st),D.push([B,H,Q,U]),t.dispatch(A,"clear-transient"),t.render(A)}t.zoom=P;function C(A){const{scales:x,zoomStack:L}=A;if(L.length===1)return;const[O,D,q,K]=L[L.length-1],[B,H]=Vt(O,q),[Q,U]=Vt(D,K);n.Scale.expand(x.x,B,H),n.Scale.expand(x.y,Q,U);const W=Lt(B,H),it=Lt(Q,U),tt=1/Ft(It(1/W,1/it));n.Expanse.set(x.width.codomain,nt=>nt.max*=W),n.Expanse.set(x.height.codomain,nt=>nt.max*=it),n.Expanse.set(x.area.codomain,nt=>nt.max*=tt),n.Expanse.set(x.size.codomain,nt=>nt.max*=tt),L.pop(),t.clearUserFrame(A),t.render(A)}t.popZoom=C;function R(A,x){const{x:L,y:O}=A.scales;if(!n.Expanse.isContinuous(L.domain)||!n.Expanse.isContinuous(O.domain))throw new Error("Both axes need to be continuous to set a ratio");A.parameters.ratio=x,t.resize(A)}t.setRatio=R;function V(A,x){const{scales:L}=A,{x:O,y:D}=L,q=n.Scale.unitRatio(O),K=n.Scale.unitRatio(D)*x;if(q>K){const B=K/q*n.Expanse.unitRange(D.domain);n.Expanse.set(O.domain,H=>(H.zero=(1-B)/2,H.one=(1+B)/2),{default:!0})}else{const B=q/K*n.Expanse.unitRange(O.domain);n.Expanse.set(D.domain,H=>(H.zero=(1-B)/2,H.one=(1+B)/2),{default:!0})}}t.applyRatio=V;function Y(A,x){let{scale:L,min:O,max:D,mult:q,labels:K,direction:B}=x;const H=A.scales[L].domain,Q=A.scales[L].codomain;if(!["x","y","area","size"].includes(L))throw new Error(`Unrecognized scale '${L}'`);const U={default:x.default??!1};if(O||D){if(!n.Expanse.isContinuous(H))throw new Error("Limits can only be set with a continuous scale");O=O??H.min,D=D??H.max,n.Expanse.set(H,W=>(W.min=O,W.max=D),U),A.parameters.ratio=void 0}if(K){if(!n.Expanse.isDiscrete(H))throw new Error("Labels can be ordered with a discrete scale only");if(!Ye(H.labels,K))throw new Error("Labels must match the scale's labels");const W=Re(H.labels,K);n.Expanse.reorder(H,W)}B&&n.Expanse.set(H,W=>W.direction=B,U),q&&n.Expanse.set(Q,W=>W.mult=q,U)}t.setScale=Y})(n.Plot||(n.Plot={}));function qa(t,a){const{container:e,frames:i}=t,{margins:c,colors:r,axisTitleSize:g}=a,[o,b,l,m]=c,f=[7,6,5,4,3,2,1,0],s="absolute top-0 right-0 w-full h-full";for(const v of f){const h=Z.createElement("canvas",{class:s});h.style.zIndex=`${7-v+2}`;const u=j.of(h,a),d=r[v];j.setContext(u,{fillStyle:d,strokeStyle:d}),u.margins=c,i[v]=u}i.base=j.of(Z.createElement("canvas",{class:s+" z-0 bg-gray-100"}),a),j.setContext(i.base,{font:`${g}rem sans-serif`,textBaseline:"middle",textAlign:"center"}),i.under=j.of(Z.createElement("canvas",{class:s+" z-1 bg-white"}),a),i.under.canvas.style.width=`calc(100% - ${b}px - ${m}px)`,i.under.canvas.style.height=`calc(100% - ${o}px - ${l}px)`,i.under.canvas.style.top=l+"px",i.under.canvas.style.right=m+"px",i.over=j.of(Z.createElement("canvas",{class:s+"relative z-10 border border-b-black border-l-black"}),a),i.over.canvas.style.width=`calc(100% - ${b}px - ${m}px)`,i.over.canvas.style.height=`calc(100% - ${o}px - ${l}px)`,i.over.canvas.style.top=l+"px",i.over.canvas.style.right=m+"px",i.user=j.of(Z.createElement("canvas",{class:s+" z-10"}),a),i.user.margins=c,j.setContext(i.user,{globalAlpha:.06666666666666667}),i.xAxis=j.of(Z.createElement("canvas",{class:s}),a),j.setContext(i.xAxis,{fillStyle:"#3B4854",textBaseline:"top",textAlign:"center",font:`${Pt.axisLabelSize}rem serif`}),i.yAxis=j.of(Z.createElement("canvas",{class:s}),a),j.setContext(i.yAxis,{fillStyle:"#3B4854",textBaseline:"middle",textAlign:"right",font:`${Pt.axisLabelSize}rem serif`});for(let[v,h]of Object.entries(i))isNaN(parseFloat(v))||(v="data-"+v),h.canvas.id=`frame-${v}`,j.append(h,e)}function ja(t){const{container:a,parameters:e,frames:i}=t,{mousecoords:c}=e;for(const[r,g]of Object.entries(n.Plot.keybindings))n.Plot.listen(t,r,()=>n.Plot.dispatch(t,g));a.addEventListener("mousedown",r=>{r.stopPropagation();const{locked:g}=e;n.Plot.activate(t),n.Plot.setMousedown(t,!0),n.Plot.setMouseButton(t,r.button),r.button===$t.Left?n.Plot.setMode(t,"select"):r.button===$t.Right&&n.Plot.setMode(t,"pan");const o=r.offsetX,b=a.clientHeight-r.offsetY;J([o,b,o,b],c),!g&&e.mode==="select"&&(n.Plot.dispatch(t,"clear-transient"),n.Plot.checkSelection(t)),n.Plot.unlock(t)}),a.addEventListener("contextmenu",r=>{r.preventDefault(),n.Plot.setMousedown(t,!0),n.Plot.setMouseButton(t,$t.Right),n.Plot.setMode(t,"pan"),e.mousecoords[0]=r.offsetX,e.mousecoords[1]=a.clientHeight-r.offsetY,j.clear(i.user)}),a.addEventListener("mouseup",()=>n.Plot.setMousedown(t,!1)),a.addEventListener("mousemove",ve(r=>{n.Plot.mousemoveHandlers[e.mode](t,r)},10)),n.Plot.listen(t,"reset",()=>n.Plot.reset(t)),n.Plot.listen(t,"resize",()=>n.Plot.resize(t)),n.Plot.listen(t,"activate",()=>n.Plot.activate(t)),n.Plot.listen(t,"deactivate",()=>n.Plot.deactivate(t)),n.Plot.listen(t,"render",()=>n.Plot.render(t)),n.Plot.listen(t,"lock",()=>n.Plot.lock(t)),n.Plot.listen(t,"unlock",()=>n.Plot.unlock(t)),n.Plot.listen(t,"query-mode",()=>n.Plot.setMode(t,"query")),n.Plot.listen(t,"render-axes",()=>n.Plot.renderAxes(t)),n.Plot.listen(t,"clear-transient",()=>n.Plot.clearUserFrame(t)),n.Plot.listen(t,"set-scale",r=>n.Plot.setScale(t,r)),n.Plot.listen(t,"grow",()=>n.Plot.grow(t)),n.Plot.listen(t,"shrink",()=>n.Plot.shrink(t)),n.Plot.listen(t,"fade",()=>n.Plot.fade(t)),n.Plot.listen(t,"unfade",()=>n.Plot.unfade(t)),n.Plot.listen(t,"zoom",r=>n.Plot.zoom(t,r)),n.Plot.listen(t,"pop-zoom",()=>n.Plot.popZoom(t));for(const r of Object.values(t.scales))n.Scale.listen(r,"changed",()=>{n.Plot.render(t),n.Plot.renderAxes(t)})}function Ha(t,a){var k,p;const{scales:e,container:i}=t,{clientWidth:c,clientHeight:r}=i,g=n.Expanse[((k=a==null?void 0:a.scales)==null?void 0:k.x)??"continuous"](),o=n.Expanse[((p=a==null?void 0:a.scales)==null?void 0:p.y)??"continuous"]();e.x=n.Scale.of(g,n.Expanse.continuous(0,c)),e.y=n.Scale.of(o,n.Expanse.continuous(0,r)),e.height=n.Scale.of(n.Expanse.continuous(),n.Expanse.continuous(0,r)),e.width=n.Scale.of(n.Expanse.continuous(),n.Expanse.continuous(0,c)),e.area=n.Scale.of(n.Expanse.continuous(),n.Expanse.continuous()),e.size=n.Scale.of(n.Expanse.continuous(),n.Expanse.continuous(0,a.size));const{x:b,y:l,width:m,height:f,size:s,area:v}=e,h={default:!0,silent:!0},{expandX:u,expandY:d}=Pt;n.Expanse.set(v.domain,M=>M.ratio=!0,h),n.Expanse.set(s.domain,M=>M.ratio=!0,h),n.Expanse.set(v.codomain,M=>(M.trans=he,M.inv=Ft),h),n.Expanse.set(s.codomain,M=>(M.trans=he,M.inv=Ft),h),n.Expanse.set(b.domain,M=>(M.zero=u,M.one=1-u),h),n.Expanse.set(l.domain,M=>(M.zero=d,M.one=1-d),h),n.Expanse.set(m.domain,M=>M.one=1-2*u,h),n.Expanse.set(f.domain,M=>M.one=1-2*d,h),n.Expanse.set(v.domain,M=>M.one=1-2*Math.max(u,d),h);const y=M=>Math.max(M,0);n.Expanse.set(m.codomain,M=>M.inv=y,h),n.Expanse.set(f.codomain,M=>M.inv=y,h)}function $a(t){const a=Z.createElement("div",null,Z.createElement("div",null,Z.createElement("div",{id:"modal",class:"absolute left-0 top-0 z-50 hidden size-full flex-col items-center justify-center bg-slate-800 bg-opacity-80"},Z.createElement("h1",{class:"relative mb-6 text-3xl font-bold text-white"},"Key bindings"),Z.createElement("div",{id:"bindings",class:"relative flex h-1/2 w-fit columns-2 flex-col flex-wrap justify-start"})),Z.createElement("button",{class:"absolute right-0 top-0 z-30 select-none rounded-bl-md bg-gray-300 p-1 px-2 text-sm text-white hover:bg-gray-400"},"keybindings"))),e=a.querySelector("#modal"),i=a.querySelector("#bindings");i.style.columnFill="auto";const c=a.querySelector("button");let r=!1;function g(){e.style.display="flex"}function o(){r||(e.style.display="none")}c.addEventListener("click",g),e.addEventListener("click",o);const b=t.keybindings;for(const[l,m]of Object.entries(b)){const f=Z.createElement("span",{class:"m-1 flex flex-row"},Z.createElement("button",{class:"m-1 w-8 rounded-md bg-gray-400 p-1 px-2 text-center text-white outline-none hover:bg-gray-500"},l),Z.createElement("div",{class:"m-1 p-1 px-2 text-white"},me(m.replaceAll("-"," ")))),s=f.querySelector("div"),v=f.querySelector("button");s.addEventListener("click",u=>u.stopPropagation()),v.addEventListener("click",u=>{r||(u.stopPropagation(),ye(v,"text-black bg-slate-200 hover:bg-slate-200"),window.addEventListener("keydown",h),r=!0)});const h=u=>{const{key:d}=u,y=v.innerText;d in b&&d!==y||(n.Scene.setKeyBinding(t,d,m),v.innerText=u.key,we(v,"text-black bg-slate-200 hover:bg-slate-200"),window.removeEventListener("keydown",h),r=!1)};i.appendChild(f)}return a}n.Scene=void 0,(t=>{function a(S,w){const z=Z.createElement("div",{id:"scene-container",class:"pr-15 relative flex h-full w-full content-center items-center justify-center bg-[#deded9] p-10"},Z.createElement("div",{id:"plot-container",class:"grid h-full w-full grid-cols-1 grid-rows-1 gap-5"})),_=z.querySelector("#plot-container"),[T,P]=[1,1],C=ot.of(Object.values(S)[0].length),R=[],V={},Y=Object.assign(Pt,w);dn(Y);for(const[O,D]of Object.entries(S))N.hasName(D)||N.setName(D,O);const A={...t.keybindings,...n.Plot.keybindings},x={send:console.log},L=F.of({data:S,container:z,plotContainer:_,rows:T,cols:P,marker:C,client:x,plots:R,plotsByType:V,options:Y,keybindings:A});if(w!=null&&w.websocketURL){const O=new WebSocket(w.websocketURL),D={sender:"scene",target:"session",type:"connected"};O.addEventListener("open",()=>O.send(JSON.stringify(D))),O.addEventListener("message",q=>{v(L,JSON.parse(q.data))}),window.addEventListener("beforeunload",()=>O.close()),L.client=O}return z.appendChild($a(L)),Ba(L),L}t.of=a,t.listen=F.makeListenFn(),t.dispatch=F.makeDispatchFn();function e(S,w){S.appendChild(w.container),t.resize(w)}t.append=e;function i(S,w){const{plotContainer:z,marker:_,plots:T,plotsByType:P}=S;n.Plot.listen(w,"activated",()=>{for(const R of T)R!=w&&n.Plot.dispatch(R,"deactivate");S.activePlot=w}),n.Plot.listen(w,"lock-others",()=>{for(const R of T)R!==w&&n.Plot.dispatch(R,"lock")}),n.Plot.listen(w,"set-selected",R=>{ot.update(_,R.cases)}),n.Plot.listen(w,"clear-transient",()=>{for(const R of T)n.Plot.clearUserFrame(R);ot.clearTransient(_)}),T.push(w);const{type:C}=w;P[C]||(P[C]=[]),P[C].push(w),n.Plot.append(z,w),g(S),r(S),t.resize(S)}t.addPlot=i;function c(S,w){const{type:z,variables:_,reducer:T,queries:P}=w??{};if(!z||z==="unknown"||!_)return;for(const Y of _)if(!Object.keys(S.data).includes(Y))throw new Error(`Variable '${Y}' is not present in the data`);const C=ze(_),R={};if(T&&(R.reducer=n.Reducer.get(T)),P)if(Ue(P))R.queries=ze(P);else{const Y=A=>P.map(([x,L])=>[A[x],n.Reducer.get(L)]);R.queries=Y}const V=n.Plot[z](S,C,R);t.addPlot(S,V)}t.addPlotBySpec=c;function r(S){const{plots:w}=S;if(w.length===0)return;const z=Math.ceil(Math.sqrt(w.length)),_=Math.ceil(w.length/z);t.setDimensions(S,_,z)}function g(S){for(let w=0;w<S.plots.length;w++)S.plots[w].container.id=`plot${w+1}`}function o(S){const w=zt(S.plots);w&&l(S,w)}t.popPlot=o;function b(S,w){const z=s(S,w);z&&l(S,z)}t.removePlot=b;function l(S,w){St(S.plots,w),St(S.plotsByType[w.type],w),S.plotContainer.removeChild(w.container),F.removeAllListeners(w),g(S),r(S),t.resize(S)}function m(S,w,z){const{plotContainer:_}=S;S.rows=w,S.cols=z,_.style.gridTemplateRows=Array(w).fill("1fr").join(" "),_.style.gridTemplateColumns=Array(z).fill("1fr").join(" "),t.resize(S)}t.setDimensions=m;function f(S,w){return w==="scene"?S:s(S,w)}t.getTarget=f;function s(S,w){const{plots:z,plotsByType:_}=S;let[T,P]=Xe(w);const C=parseInt(P,10)-1;if(T==="plot"||T==="p")return z[C];if(T=T.replace("plot","").replace("gram",""),T in Object.keys(wn)&&(T=wn[T]),T in _)return _[T][C]}t.getPlot=s;function v(S,w){const{client:z}=S;if(!z)return;const{type:_,target:T,data:P}=w,C=f(S,T);C&&F.dispatch(C,_,P)}t.handleMessage=v;function h(S,w,z){const[_,T]=["scene","session"],P=JSON.stringify({sender:_,target:T,type:w,data:z});S.client.send(P)}t.sendMessage=h;function u(S){for(const w of S.plots)n.Plot.dispatch(w,"resize")}t.resize=u;function d(S){for(const w of S.plots)n.Plot.dispatch(w,"reset");ot.clearTransient(S.marker)}t.reset=d;function y(S){for(const w of S.plots)n.Plot.dispatch(w,"query-mode")}t.setQueryMode=y;function k(S){ot.setGroup(S.marker,ie.First)}t.setGroupFirst=k;function p(S){ot.setGroup(S.marker,ie.Second)}t.setGroupSecond=p;function M(S){ot.setGroup(S.marker,ie.Third)}t.setGroupThird=M;function E(S,w,z){let _;for(const[T,P]of Object.entries(S.keybindings))if(P===z){_=T;break}_&&delete S.keybindings[_],S.keybindings[w]=z}t.setKeyBinding=E,t.keybindings={r:"reset",q:"query-mode",1:"group-1",2:"group-2",3:"group-3"}})(n.Scene||(n.Scene={}));function Ba(t){const{marker:a,plots:e,plotContainer:i,keybindings:c}=t;i.addEventListener("mousedown",()=>{for(const r of e)n.Plot.dispatch(r,"deactivate")}),i.addEventListener("dblclick",()=>{for(const r of e)n.Plot.dispatch(r,"deactivate"),j.clear(r.frames.user);ot.clearAll(t.marker),t.activePlot=void 0}),window.addEventListener("keydown",r=>{const g=c[r.key];g&&(t.activePlot&&n.Plot.dispatch(t.activePlot,g),n.Scene.dispatch(t,g))}),window.addEventListener("keyup",()=>{ot.setGroup(a,_e);for(const r of t.plots)r.parameters.mode=n.Plot.Mode.Select,r.queryTable.style.display="none"}),window.addEventListener("resize",()=>n.Scene.resize(t)),ot.listen(a,"cleared",()=>{for(const r of e)n.Plot.dispatch(r,"unlock")}),n.Scene.listen(t,"resize",()=>n.Scene.resize(t)),n.Scene.listen(t,"reset",()=>n.Scene.reset(t)),n.Scene.listen(t,"query-mode",()=>n.Scene.setQueryMode(t)),n.Scene.listen(t,"group-1",()=>n.Scene.setGroupFirst(t)),n.Scene.listen(t,"group-2",()=>n.Scene.setGroupSecond(t)),n.Scene.listen(t,"group-3",()=>n.Scene.setGroupThird(t)),n.Scene.listen(t,"connected",()=>{var r;return console.log(`Connected to Websocket server on: ${(r=t.client)==null?void 0:r.url}`)}),n.Scene.listen(t,"set-dims",r=>{n.Scene.setDimensions(t,r.rows,r.cols)}),n.Scene.listen(t,"add-plot",r=>n.Scene.addPlotBySpec(t,r)),n.Scene.listen(t,"pop-plot",()=>n.Scene.popPlot(t)),n.Scene.listen(t,"remove-plot",r=>{n.Scene.removePlot(t,r.id)}),n.Scene.listen(t,"set-selected",r=>ot.update(a,r.cases)),n.Scene.listen(t,"set-assigned",r=>{const g=7-Math.min(r.group,3);ot.update(a,r.cases,{group:g})}),n.Scene.listen(t,"get-selected",()=>{const r=Me(a.indices,ot.isTransient);n.Scene.sendMessage(t,"get-selected",{cases:r})}),n.Scene.listen(t,"get-assigned",r=>{const g=b=>(b|4)===7-Math.min(r.group,3),o=Me(a.indices,g);n.Scene.sendMessage(t,"get-assigned",{cases:o,group:r.group})}),n.Scene.listen(t,"clear-selection",()=>ot.clearAll(a)),n.Scene.listen(t,"set-scale",r=>{if(!r||!r.id)return;const g=n.Scene.getPlot(t,r.id);g&&n.Plot.dispatch(g,"set-scale",r)}),n.Scene.listen(t,"zoom",r=>{if(!r||!r.id)return;const g=n.Scene.getPlot(t,r.id);g&&n.Plot.dispatch(g,"zoom",r)})}const wn={s:"scatter",b:"bar",h:"histo",f:"fluct",hh:"histo2d",pc:"pcoords"};return n.POSITIONS=dt,n.addIndexed=qn,n.addTailwind=ye,n.applyDirection=Ct,n.applyWith=Yn,n.binBreaks=Ie,n.call=An,n.capitalize=me,n.clearNodeChildren=Ke,n.compareAlphaNumeric=Tt,n.convertToSuperscript=Be,n.copyProps=be,n.copyValues=J,n.cumsum=Et,n.dec=Mn,n.diff=ft,n.exp10=_n,n.exponentialToSuperscript=$e,n.fetchJSON=In,n.filterIndices=Me,n.findLength=lt,n.formatAxisLabels=Se,n.formatLabel=He,n.formatText=jn,n.identity=Gt,n.inc=zn,n.invertRange=Vt,n.isArray=rt,n.isIntegerString=We,n.isNumber=Xn,n.isNumberArray=pe,n.isPrimitive=Un,n.isStringArray=Ue,n.just=de,n.keysToSelectors=ze,n.last=zt,n.log10=En,n.makeGetter=Rt,n.max=It,n.merge=Oe,n.minDecimal=je,n.minmax=At,n.one=vt,n.orderBy=On,n.orderIndices=Ce,n.orderIndicesByTable=Re,n.ordered=Mt,n.pointInRect=Zt,n.prettyBreaks=Fe,n.prod=xn,n.randomInteger=ge,n.rangeInverse=Lt,n.rectSegmentIntersect=ke,n.rectsIntersect=Jt,n.remove=St,n.removeTailwind=we,n.rep=Cn,n.round=qt,n.row=Kn,n.segmentsIntersect=jt,n.selector=Qn,n.seq=Rn,n.splitNumericSuffix=Xe,n.sqrt=Ft,n.square=he,n.stringArraysMatch=Ye,n.stripWS=Tn,n.subset=kt,n.sum=Pn,n.throttle=ve,n.timeExecution=Dn,n.toLowerCase=Nn,n.toUpperCase=Ln,n.trunc=Dt,n.uniqueIntegers=Fn,n.zero=yt,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),n}({});
