var plotscape=function(a){"use strict";var Pe=document.createElement("style");Pe.textContent=`*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.right-0{right:0}.top-0{top:0}.z-0{z-index:0}.z-10{z-index:10}.z-30{z-index:30}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.grid{display:grid}.hidden{display:none}.h-5\\/6{height:83.333333%}.h-full{height:100%}.h-screen{height:100vh}.w-5\\/6{width:83.333333%}.w-full{width:100%}.shrink{flex-shrink:1}.grow{flex-grow:1}.resize{resize:both}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-rows-1{grid-template-rows:repeat(1,minmax(0,1fr))}.items-center{align-items:center}.justify-center{justify-content:center}.gap-5{gap:1.25rem}.rounded{border-radius:.25rem}.border{border-width:1px}.border-gray-400{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity))}.border-b-black{--tw-border-opacity: 1;border-bottom-color:rgb(0 0 0 / var(--tw-border-opacity))}.border-l-black{--tw-border-opacity: 1;border-left-color:rgb(0 0 0 / var(--tw-border-opacity))}.bg-\\[\\#deded9\\]{--tw-bg-opacity: 1;background-color:rgb(222 222 217 / var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.p-5{padding:1.25rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.uppercase{text-transform:uppercase}.lowercase{text-transform:lowercase}.capitalize{text-transform:capitalize}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}.outline-2{outline-width:2px}.outline-slate-600{outline-color:#475569}.drop-shadow-md{--tw-drop-shadow: drop-shadow(0 4px 3px rgb(0 0 0 / .07)) drop-shadow(0 2px 2px rgb(0 0 0 / .06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}
`,document.head.appendChild(Pe);function Ut(t){"@babel/helpers - typeof";return Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ut(t)}var Sn=/^\s+/,zn=/\s+$/;function x(t,n){if(t=t||"",n=n||{},t instanceof x)return t;if(!(this instanceof x))return new x(t,n);var e=Mn(t);this._originalInput=t,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||e.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=e.ok}x.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),e,i,c,r,b,o;return e=n.r/255,i=n.g/255,c=n.b/255,e<=.03928?r=e/12.92:r=Math.pow((e+.055)/1.055,2.4),i<=.03928?b=i/12.92:b=Math.pow((i+.055)/1.055,2.4),c<=.03928?o=c/12.92:o=Math.pow((c+.055)/1.055,2.4),.2126*r+.7152*b+.0722*o},setAlpha:function(n){return this._a=Re(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=xe(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=xe(this._r,this._g,this._b),e=Math.round(n.h*360),i=Math.round(n.s*100),c=Math.round(n.v*100);return this._a==1?"hsv("+e+", "+i+"%, "+c+"%)":"hsva("+e+", "+i+"%, "+c+"%, "+this._roundA+")"},toHsl:function(){var n=Ne(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=Ne(this._r,this._g,this._b),e=Math.round(n.h*360),i=Math.round(n.s*100),c=Math.round(n.l*100);return this._a==1?"hsl("+e+", "+i+"%, "+c+"%)":"hsla("+e+", "+i+"%, "+c+"%, "+this._roundA+")"},toHex:function(n){return Te(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return _n(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Y(this._r,255)*100)+"%",g:Math.round(Y(this._g,255)*100)+"%",b:Math.round(Y(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Y(this._r,255)*100)+"%, "+Math.round(Y(this._g,255)*100)+"%, "+Math.round(Y(this._b,255)*100)+"%)":"rgba("+Math.round(Y(this._r,255)*100)+"%, "+Math.round(Y(this._g,255)*100)+"%, "+Math.round(Y(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:jn[Te(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var e="#"+Le(this._r,this._g,this._b,this._a),i=e,c=this._gradientType?"GradientType = 1, ":"";if(n){var r=x(n);i="#"+Le(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+c+"startColorstr="+e+",endColorstr="+i+")"},toString:function(n){var e=!!n;n=n||this._format;var i=!1,c=this._a<1&&this._a>=0,r=!e&&c&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return r?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(i=this.toRgbString()),n==="prgb"&&(i=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(i=this.toHexString()),n==="hex3"&&(i=this.toHexString(!0)),n==="hex4"&&(i=this.toHex8String(!0)),n==="hex8"&&(i=this.toHex8String()),n==="name"&&(i=this.toName()),n==="hsl"&&(i=this.toHslString()),n==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return x(this.toString())},_applyModification:function(n,e){var i=n.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Tn,arguments)},brighten:function(){return this._applyModification(Ln,arguments)},darken:function(){return this._applyModification(Cn,arguments)},desaturate:function(){return this._applyModification(Pn,arguments)},saturate:function(){return this._applyModification(Nn,arguments)},greyscale:function(){return this._applyModification(xn,arguments)},spin:function(){return this._applyModification(Rn,arguments)},_applyCombination:function(n,e){return n.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(In,arguments)},complement:function(){return this._applyCombination(Fn,arguments)},monochromatic:function(){return this._applyCombination(On,arguments)},splitcomplement:function(){return this._applyCombination(Dn,arguments)},triad:function(){return this._applyCombination(Ce,[3])},tetrad:function(){return this._applyCombination(Ce,[4])}},x.fromRatio=function(t,n){if(Ut(t)=="object"){var e={};for(var i in t)t.hasOwnProperty(i)&&(i==="a"?e[i]=t[i]:e[i]=Dt(t[i]));t=e}return x(t,n)};function Mn(t){var n={r:0,g:0,b:0},e=1,i=null,c=null,r=null,b=!1,o=!1;return typeof t=="string"&&(t=Bn(t)),Ut(t)=="object"&&(yt(t.r)&&yt(t.g)&&yt(t.b)?(n=pn(t.r,t.g,t.b),b=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):yt(t.h)&&yt(t.s)&&yt(t.v)?(i=Dt(t.s),c=Dt(t.v),n=En(t.h,i,c),b=!0,o="hsv"):yt(t.h)&&yt(t.s)&&yt(t.l)&&(i=Dt(t.s),r=Dt(t.l),n=An(t.h,i,r),b=!0,o="hsl"),t.hasOwnProperty("a")&&(e=t.a)),e=Re(e),{ok:b,format:t.format||o,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:e}}function pn(t,n,e){return{r:Y(t,255)*255,g:Y(n,255)*255,b:Y(e,255)*255}}function Ne(t,n,e){t=Y(t,255),n=Y(n,255),e=Y(e,255);var i=Math.max(t,n,e),c=Math.min(t,n,e),r,b,o=(i+c)/2;if(i==c)r=b=0;else{var y=i-c;switch(b=o>.5?y/(2-i-c):y/(i+c),i){case t:r=(n-e)/y+(n<e?6:0);break;case n:r=(e-t)/y+2;break;case e:r=(t-n)/y+4;break}r/=6}return{h:r,s:b,l:o}}function An(t,n,e){var i,c,r;t=Y(t,360),n=Y(n,100),e=Y(e,100);function b(d,m,u){return u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?d+(m-d)*6*u:u<.5?m:u<.6666666666666666?d+(m-d)*(.6666666666666666-u)*6:d}if(n===0)i=c=r=e;else{var o=e<.5?e*(1+n):e+n-e*n,y=2*e-o;i=b(y,o,t+.3333333333333333),c=b(y,o,t),r=b(y,o,t-.3333333333333333)}return{r:i*255,g:c*255,b:r*255}}function xe(t,n,e){t=Y(t,255),n=Y(n,255),e=Y(e,255);var i=Math.max(t,n,e),c=Math.min(t,n,e),r,b,o=i,y=i-c;if(b=i===0?0:y/i,i==c)r=0;else{switch(i){case t:r=(n-e)/y+(n<e?6:0);break;case n:r=(e-t)/y+2;break;case e:r=(t-n)/y+4;break}r/=6}return{h:r,s:b,v:o}}function En(t,n,e){t=Y(t,360)*6,n=Y(n,100),e=Y(e,100);var i=Math.floor(t),c=t-i,r=e*(1-n),b=e*(1-c*n),o=e*(1-(1-c)*n),y=i%6,d=[e,b,r,r,o,e][y],m=[o,e,e,b,r,r][y],u=[r,r,o,e,e,b][y];return{r:d*255,g:m*255,b:u*255}}function Te(t,n,e,i){var c=[ft(Math.round(t).toString(16)),ft(Math.round(n).toString(16)),ft(Math.round(e).toString(16))];return i&&c[0].charAt(0)==c[0].charAt(1)&&c[1].charAt(0)==c[1].charAt(1)&&c[2].charAt(0)==c[2].charAt(1)?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function _n(t,n,e,i,c){var r=[ft(Math.round(t).toString(16)),ft(Math.round(n).toString(16)),ft(Math.round(e).toString(16)),ft(Fe(i))];return c&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function Le(t,n,e,i){var c=[ft(Fe(i)),ft(Math.round(t).toString(16)),ft(Math.round(n).toString(16)),ft(Math.round(e).toString(16))];return c.join("")}x.equals=function(t,n){return!t||!n?!1:x(t).toRgbString()==x(n).toRgbString()},x.random=function(){return x.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Pn(t,n){n=n===0?0:n||10;var e=x(t).toHsl();return e.s-=n/100,e.s=Xt(e.s),x(e)}function Nn(t,n){n=n===0?0:n||10;var e=x(t).toHsl();return e.s+=n/100,e.s=Xt(e.s),x(e)}function xn(t){return x(t).desaturate(100)}function Tn(t,n){n=n===0?0:n||10;var e=x(t).toHsl();return e.l+=n/100,e.l=Xt(e.l),x(e)}function Ln(t,n){n=n===0?0:n||10;var e=x(t).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(n/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(n/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(n/100)))),x(e)}function Cn(t,n){n=n===0?0:n||10;var e=x(t).toHsl();return e.l-=n/100,e.l=Xt(e.l),x(e)}function Rn(t,n){var e=x(t).toHsl(),i=(e.h+n)%360;return e.h=i<0?360+i:i,x(e)}function Fn(t){var n=x(t).toHsl();return n.h=(n.h+180)%360,x(n)}function Ce(t,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var e=x(t).toHsl(),i=[x(t)],c=360/n,r=1;r<n;r++)i.push(x({h:(e.h+r*c)%360,s:e.s,l:e.l}));return i}function Dn(t){var n=x(t).toHsl(),e=n.h;return[x(t),x({h:(e+72)%360,s:n.s,l:n.l}),x({h:(e+216)%360,s:n.s,l:n.l})]}function In(t,n,e){n=n||6,e=e||30;var i=x(t).toHsl(),c=360/e,r=[x(t)];for(i.h=(i.h-(c*n>>1)+720)%360;--n;)i.h=(i.h+c)%360,r.push(x(i));return r}function On(t,n){n=n||6;for(var e=x(t).toHsv(),i=e.h,c=e.s,r=e.v,b=[],o=1/n;n--;)b.push(x({h:i,s:c,v:r})),r=(r+o)%1;return b}x.mix=function(t,n,e){e=e===0?0:e||50;var i=x(t).toRgb(),c=x(n).toRgb(),r=e/100,b={r:(c.r-i.r)*r+i.r,g:(c.g-i.g)*r+i.g,b:(c.b-i.b)*r+i.b,a:(c.a-i.a)*r+i.a};return x(b)},x.readability=function(t,n){var e=x(t),i=x(n);return(Math.max(e.getLuminance(),i.getLuminance())+.05)/(Math.min(e.getLuminance(),i.getLuminance())+.05)},x.isReadable=function(t,n,e){var i=x.readability(t,n),c,r;switch(r=!1,c=Wn(e),c.level+c.size){case"AAsmall":case"AAAlarge":r=i>=4.5;break;case"AAlarge":r=i>=3;break;case"AAAsmall":r=i>=7;break}return r},x.mostReadable=function(t,n,e){var i=null,c=0,r,b,o,y;e=e||{},b=e.includeFallbackColors,o=e.level,y=e.size;for(var d=0;d<n.length;d++)r=x.readability(t,n[d]),r>c&&(c=r,i=x(n[d]));return x.isReadable(t,i,{level:o,size:y})||!b?i:(e.includeFallbackColors=!1,x.mostReadable(t,["#fff","#000"],e))};var ce=x.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},jn=x.hexNames=qn(ce);function qn(t){var n={};for(var e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}function Re(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Y(t,n){Hn(t)&&(t="100%");var e=$n(t);return t=Math.min(n,Math.max(0,parseFloat(t))),e&&(t=parseInt(t*n,10)/100),Math.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function Xt(t){return Math.min(1,Math.max(0,t))}function ot(t){return parseInt(t,16)}function Hn(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function $n(t){return typeof t=="string"&&t.indexOf("%")!=-1}function ft(t){return t.length==1?"0"+t:""+t}function Dt(t){return t<=1&&(t=t*100+"%"),t}function Fe(t){return Math.round(parseFloat(t)*255).toString(16)}function De(t){return ot(t)/255}var dt=function(){var t="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",e="(?:"+n+")|(?:"+t+")",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",c="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+c),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+c),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+c),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function yt(t){return!!dt.CSS_UNIT.exec(t)}function Bn(t){t=t.replace(Sn,"").replace(zn,"").toLowerCase();var n=!1;if(ce[t])t=ce[t],n=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=dt.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=dt.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=dt.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=dt.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=dt.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=dt.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=dt.hex8.exec(t))?{r:ot(e[1]),g:ot(e[2]),b:ot(e[3]),a:De(e[4]),format:n?"name":"hex8"}:(e=dt.hex6.exec(t))?{r:ot(e[1]),g:ot(e[2]),b:ot(e[3]),format:n?"name":"hex"}:(e=dt.hex4.exec(t))?{r:ot(e[1]+""+e[1]),g:ot(e[2]+""+e[2]),b:ot(e[3]+""+e[3]),a:De(e[4]+""+e[4]),format:n?"name":"hex8"}:(e=dt.hex3.exec(t))?{r:ot(e[1]+""+e[1]),g:ot(e[2]+""+e[2]),b:ot(e[3]+""+e[3]),format:n?"name":"hex"}:!1}function Wn(t){var n,e;return t=t||{level:"AA",size:"small"},n=(t.level||"AA").toUpperCase(),e=(t.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),e!=="small"&&e!=="large"&&(e="small"),{level:n,size:e}}const ht={radius:5,expandX:.1,expandY:.1,gapPct:.8,gapPx:1,axisLabelFontsize:1,axisTitleFontsize:1.5,marginLines:[3.5,3.5,1,1],groupColors:["#984ea3","#e41a1c","#4daf4a","#377eb8"],plotBackground:"#fefffe"},le=[];for(const t of ht.groupColors){const n=x(t).darken(10).saturate(20).toString();le.push(n)}for(const t of ht.groupColors){const n=x(t).lighten(20).saturate(20).toString();le.push(n)}const Pt=Symbol("name"),ue=Symbol("length"),Yt=Symbol("min"),Vt=Symbol("max"),fe=Symbol("queryable"),Un=Symbol("parentValues"),Qt={name:Pt,length:ue,min:Yt,max:Vt,queryable:fe,parent:Un};var P;(t=>{function n(l,s,f){const g=f??Object.keys(Qt);for(const v of g)s[Qt[v]]=l[Qt[v]]}t.copy=n;function e(l,s){return!!l[Qt[s]]}t.has=e;function i(l){return!!l[Pt]}t.hasName=i;function c(l){return l[Pt]??"unknown"}t.getName=c;function r(l,s){l[Pt]=s}t.setName=r;function b(l,s){s[Pt]=l[Pt]}t.copyName=b;function o(l){return nt(l)?l.length:l[ue]}t.getLength=o;function y(l,s){l[ue]=s}t.setLength=y;function d(l){return!!l[Yt]&&!!l[Vt]}t.hasMinMax=d;function m(l){return d(l)?[l[Yt],l[Vt]]:void 0}t.getMinMax=m;function u(l,s,f){l[Yt]=s,l[Vt]=f}t.setMinMax=u;function h(l){return l[fe]}t.isQueryable=h;function w(l,s){l[fe]=s}t.setQueryable=w})(P||(P={}));var bt;(t=>{function n(r){if(typeof r=="function")return r;if(nt(r)){const b=o=>r[o];return P.setLength(b,r.length),b}else return()=>r}t.of=n;function e(r){return()=>r}t.constant=e;function i(r,b){const o=t.of(r),y=d=>o(b[d]);return P.copy(r,y),P.setLength(y,b.length),y}t.proxy=i;function c(r){const b=r.map(t.of),o=y=>b.map(d=>d(y));return P.setLength(o,P.getLength(r[0])),o}t.multi=c})(bt||(bt={}));function Kt(t){return t}const de=t=>()=>t,wt=de(0),kt=de(1);function Xn(t){return t+1}function Yn(t){return t-1}function Vn(t){return t()}function he(t){return t**2}const It=Math.sqrt,Qn=Math.log10;function Kn(t){return 10**t}const Ot=Math.max;function mt(t,n){return t-n}function Jn(t,n){return t+n}function Zn(t,n){return t*n}function Mt(t,n=0,e=1){return Math.min(Math.max(t,n),e)}function Nt(t,n){return 1/(n-t)}function Jt(t,n){const e=Nt(t,n);return[-t*e,e-t*e]}function jt(t,n=0){return Math.round(t*10**n)/10**n}function xt(t,n){return t.localeCompare(n,"en",{numeric:!0})}function Ie(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Gn(t){return t.toLocaleLowerCase()}function ta(t){return t.toLocaleUpperCase()}function ea(t){return t.replace(/\s/g,"")}function Tt(t){return t[t.length-1]}function na(t,n){return Array(n).fill(t)}function aa(t,n,e){const i=Math.abs(n-t);e=e??Math.ceil(i)+1;const c=i/(e-1),r=n>=t?1:-1;return Array.from(Array(e),(b,o)=>t+r*c*o)}function St(t,n){const e=Array(n.length);for(let i=0;i<n.length;i++)e[i]=t[n[i]];return e}function Lt(t,n){t.splice(t.indexOf(n),1)}function pt(t,n){const e=Array(n.length);for(let i=0;i<n.length;i++)e[n[i]]=t[i];return e}function Oe(t){const n=t.toSorted(mt),e={},i={};for(let c=0;c<n.length;c++){const r=t[c];i[r]=i[r]+1||0,e[c]=n.indexOf(r)+i[r]}return Object.values(e)}function ra(t,n){const e=Array(t.length);for(let i=0;i<t.length;i++)e[i]=t[n[i]];for(let i=0;i<t.length;i++)t[i]=e[i]}function je(t,n){const e=Array(t.length);for(let i=0;i<t.length;i++)e[i]=n.indexOf(t[i]);return e}function At(t){let[n,e]=[1/0,-1/0];for(let i=0;i<t.length;i++)n=Math.min(n,t[i]),e=Math.max(e,t[i]);return[n,e]}function Et(t){const n=Array(t.length);n[0]=t[0];for(let e=1;e<t.length;e++)n[e]=t[e]+n[e-1];return n}function me(t,n){return Math.floor(t+Math.random()*n)}function ia(t,n,e=n-t){const i=n-t,c=[],r=new Set;for(;c.length<Math.min(e,i);){let b=me(t,n);for(;r.has(b);)b=me(t,n);c.push(b),r.add(b)}return c}async function oa(t){return await(await fetch(t)).json()}function qe(t,n){return{...t,...n}}function Q(t,n){if(t!==n){n.length=0;for(let e=0;e<t.length;e++)n.push(t[e])}}function ge(t,n){for(const[e,i]of Object.entries(t))nt(i)&&nt(t[e])?Q(i,t[e]):n[e]=i}function Ct(t,n){return .5*(1-n)+n*t}function He(t,n,e=4){const i=(n-t)/e,c=Math.floor(Math.log10(i)),r=[1,2,4,5,10];let[b,o]=[1/0,0];for(let w=0;w<r.length;w++){const l=(r[w]*10**c-i)**2;l<b&&([b,o]=[l,r[w]])}const y=10**c*o,d=Math.ceil(t/y)*y,m=Math.floor(n/y)*y,u=Math.round((m-d)/y),h=[];for(let w=0;w<u+1;w++){const l=d+w*y;h.push(l)}return h}function $e(t,n){let{width:e,anchor:i,nBins:c}=n||{};const[r,b]=At(t),o=b-r;c=c??(e?Math.ceil(o/e)+1:10),e=e??o/(c-1),i=i??r;const y=r-e+(i-r)%e,d=b+e-(b-i)%e,m=Array(c+2);m[0]=y,m[m.length-1]=d;for(let u=1;u<m.length-1;u++)m[u]=y+u*e;return m}function Be(){const{marginLines:t,axisTitleFontsize:n}=ht,e=parseFloat(getComputedStyle(document.documentElement).fontSize);return t.map(i=>i*e*n)}function We(t,n){for(const e of n.split(" "))t.classList.add(e)}function Ue(t,n){for(const e of n.split(" "))t.classList.remove(e)}function be(t,n){let e=0;return function(...i){const c=new Date().getTime();c-e<n||(e=c,t(...i))}}function sa(t){const n=performance.now();return t(),performance.now()-n}function Rt(t){return typeof t=="function"?t:nt(t)?n=>t[n]:()=>t}function Xe(t){const[n,e,i,c]=t;return[n,e,i-n,c-e]}function Ye(t,n,e){return!(t<n)&&!(t>e)}function qt(t,n){let[e,i,c,r]=Xe(t),[b,o,y,d]=Xe(n);const m=y*r-c*d,u=((e-b)*r-(i-o)*c)/m,h=-(-(e-b)*d+(i-o)*y)/m;return Ye(u,0,1)&&Ye(h,0,1)}function ye(t,n){const[e,i,c,r]=t;return qt([e,i,c,i],n)||qt([e,i,e,r],n)||qt([c,i,c,r],n)||qt([e,r,c,r],n)}function Zt(t,n){const[e,i]=t,[c,r,b,o]=n;return!(e<c||e>b||i<r||i>o)}function Gt(t,n){const[e,i]=[t[0],t[2]].sort(mt),[c,r]=[t[1],t[3]].sort(mt),[b,o]=[n[0],n[2]].sort(mt),[y,d]=[n[1],n[3]].sort(mt);return!(i<b||e>o||r<y||c>d)}function ca(t,n,e){const c=Object.keys(t).filter(o=>o.replace(/[0-9]*$/,"")===n);if(c.length===0){t[`${n}1`]=e;return}const r=c.map(o=>parseInt(o.match(/[0-9]*$/)[0],10)),b=Math.max(...r);t[`${n}${b+1}`]=e}function Ve(t){let n=1/0;for(let e=0;e<t.length;e++)t[e]!==0&&(n=Math.min(n,Math.log10(Math.abs(t[e]))));return n>3?0:Math.floor(Math.abs(n))+2}function la(t,n={lowercase:!0,capitalize:!0,split:!0}){return n!=null&&n.split&&(t=t.replace(/_/g," ")),n!=null&&n.lowercase&&(t=t.toLocaleLowerCase()),n!=null&&n.capitalize&&(t=Ie(t)),t}function Qe(t){if(typeof t=="string")return t;if(t===0)return t.toString();const n=Math.floor(Math.log10(Math.abs(t)));return n>=3?jt(t).toString():n<=-3?jt(t,-n+1).toString():jt(t,2).toString()}function we(t,n){if(!ve(t))return t;const e=(n==null?void 0:n.tens)??4,i=o=>o!=0&&Math.abs(Math.log10(o))>e,c=(n==null?void 0:n.decimals)??Ve(t);t=t.map(o=>jt(o,c));const b=At(t).some(i)?ua:fa;return t.map(b)}function ua(t){return t===0?"0":Ke(t.toExponential())}function fa(t){return t===0?"0":parseFloat(t.toPrecision(12)).toString()}function Ke(t){let[n,e]=t.split("e");return e=Je(e),n+"×10"+e}const da={"-":"⁻","+":"",0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹"};function Je(t){return t.split("").map(n=>da[n]).join("")}const ha=["string","number","boolean","undefined"];function ma(t){return t===null||ha.includes(typeof t)}const nt=Array.isArray;function ga(t){return typeof t=="number"}function Ze(t){return/^[0-9]+/.test(t)}function ve(t){return typeof t[0]=="number"&&typeof Tt(t)=="number"}function Ge(t){return typeof t[0]=="string"&&typeof Tt(t)=="string"}function st(t){for(const e of t){if(!e)continue;const i=P.getLength(e);if(i)return i}const n="At least one variable needs to be of fixed length";throw new Error(n)}function ba(...t){return function(n){return n(...t)}}function ya(t,n){const e={};for(const[i,c]of Object.entries(t))e[i]=bt.of(c)(n);return e}function wa(t){return function(n){return n[t]}}function ke(t){return function(n){return t.map(e=>n[e])}}function tn(t){let n=t.length-1;for(;n>0&&/[0-9]/.test(t[n]);)n--;return n+=1,[t.substring(0,n),t.substring(n,t.length)]}function Se(t,n){const e=[];for(let i=0;i<t.length;i++)n(t[i])&&e.push(i);return e}function en(t,n){if(t.length!==n.length)return!1;const e=t.toSorted(xt).join(""),i=n.toSorted(xt).join("");return e===i}function nn(t){t.innerHTML=""}var te=(t=>(t[t.Forwards=1]="Forwards",t[t.Backwards=-1]="Backwards",t))(te||{}),Ht=(t=>(t[t.Middle=.5]="Middle",t[t.Top=1]="Top",t[t.Bottom=0]="Bottom",t))(Ht||{}),ee=(t=>(t[t.Center=.5]="Center",t[t.Left=1]="Left",t[t.Right=0]="Right",t))(ee||{});const va=[0,1,2,3,4,5,6,7],an=[4,5,6,7];var H;(t=>{function n(l){if(!ka(l))throw new Error("Node must be a HTML5 canvas element");const s=l.getContext("2d"),{clientWidth:f,clientHeight:g,clientLeft:v,clientTop:k}=l,S=f-v,A=g-k;return{canvas:l,context:s,width:S,height:A,margins:[0,0,0,0],scalingFactor:2,contextProps:{}}}t.of=n;function e(l,s){s.appendChild(l.canvas),l.parent=s}t.append=e;function i(l,s){for(const[f,g]of Object.entries(s))l.contextProps[f]=g,l.context[f]=g}t.setContext=i;function c(l){const{context:s,canvas:f,scalingFactor:g}=l,{clientWidth:v,clientHeight:k,clientLeft:S,clientTop:A}=f,E=v-S,z=k-A;l.width=E,l.height=z,l.canvas.width=E*g,l.canvas.height=z*g;for(const[M,_]of Object.entries(l.contextProps))l.context[M]=_;s.scale(g,g),t.clip(l)}t.resize=c;function r(l){const{context:s}=l;let{width:f,height:g}=l;const[v,k,S,A]=l.margins;f=Math.max(f-k-A,0),g=Math.max(g-S-v,0),s.beginPath(),s.rect(k,S,f,g),s.clip()}t.clip=r;function b(l){l.context.clearRect(0,0,l.width,l.height)}t.clear=b;function o(l,s){return l.context.measureText(s).width}t.textWidth=o;function y(l,s){const f=l.context.measureText(s);return f.actualBoundingBoxAscent+f.actualBoundingBoxDescent}t.textHeight=y;function d(l,s,f,g){const{context:v}=l,k=l.canvas.clientHeight,S=(g==null?void 0:g.radius)??ht.radius,A=(g==null?void 0:g.hAnchor)??ee.Center,E=(g==null?void 0:g.vAnchor)??Ht.Middle;s=s+2*(A-.5)*S,f=k-f+2*(.5-E)*S,v.beginPath(),v.arc(s,f,S,0,Math.PI*2),v.fill()}t.point=d;function m(l,s,f,g,v){const{context:k,height:S}=l;k.fillRect(s,S-f,g-s,f-v)}t.rectangleXY=m;function u(l,s,f,g,v,k){const{context:S,height:A}=l,E=(k==null?void 0:k.hAnchor)??ee.Center,z=(k==null?void 0:k.vAnchor)??Ht.Middle;s=s-E*g,f=A-f+z*v,S.fillRect(s,f,g,-v)}t.rectangleWH=u;function h(l,s,f){const{context:g,height:v}=l;g.beginPath(),g.moveTo(s[0],v-f[0]);for(let k=0;k<s.length;k++)g.lineTo(s[k],v-f[k]);g.stroke()}t.line=h;function w(l,s,f,g,v){const{context:k,height:S}=l;k.save(),k.translate(s,S-f),v!=null&&v.vertical&&k.rotate(-Math.PI/2),k.fillText(g,0,0),k.translate(-s,-(S-f)),k.restore()}t.text=w})(H||(H={}));function ka(t){return t.nodeName==="CANVAS"}const ze=Symbol("listeners"),rn=Symbol("deferred");var T;(t=>{function n(u){const h={},w={};return{...u,[ze]:h,[rn]:w}}t.of=n,t.listen=d(),t.dispatch=m();function e(u){return u[ze]}t.getListeners=e;function i(u){return u[rn]}t.getDeferred=i;function c(u,h,w){const l=()=>t.dispatch(h,"changed");t.listen(u,"changed",l,w)}t.propagateChange=c;function r(u){return u[ze]!==void 0}t.isReactive=r;function b(u,h){h(u),t.dispatch(u,"changed")}t.set=b;function o(u,h){if(!r(u))return;const[w,l]=[e(u)[h],i(u)[h]];if(w)for(const s of w)Lt(w,s);if(l)for(const s of l)Lt(l,s)}t.removeListeners=o;function y(u){if(!r(u))return;const[h,w]=[e(u),i(u)];if(h)for(const l of Object.values(h))l.length=0;if(w)for(const l of Object.values(w))l.length=0}t.removeAllListeners=y;function d(){return function(u,h,w,l){if(!r(u))return;l!=null&&l.throttle&&(w=be(w,l.throttle));const f=!!(l!=null&&l.deferred)?i(u):e(u);f[h]||(f[h]=[]),f[h].includes(w)||f[h].push(w)}}t.makeListenFn=d;function m(){return function(u,h,w){if(!r(u))return;const[l,s]=[e(u)[h],i(u)[h]];if(l)for(const f of l)f(w);if(s)for(const f of s)f(w)}}t.makeDispatchFn=m})(T||(T={}));var zt;(t=>{function n(u=[],h){const w="",l="band",s=a.Expanse.base(h),{zero:f,one:g,direction:v}=s,k=Array.from(Array(u.length),(M,_)=>_),S=(h==null?void 0:h.weights)??Array(u.length).fill(1),A=Et(S),E=!1,z={ordered:E,labels:[...u],order:[...k],weights:[...S],cumulativeWeights:[...A],zero:f,one:g,direction:v};return{value:w,type:l,ordered:E,labels:u,order:k,weights:S,cumulativeWeights:A,...s,defaults:z}}t.of=n;function e(u,h){const{order:w,cumulativeWeights:l}=u;h=w[h];const s=l[h-1]??0,f=l[h],g=Tt(l);return(s+f)/2/g}function i(u,h){if(h=h??Array(u.labels.length).fill(1),h.length!=u.labels.length){const s="The length of the weights must match the length of labels";throw new Error(s)}const{order:w}=u,l=Et(pt(h,w));Q(h,u.weights),Q(h,u.defaults.weights),Q(l,u.cumulativeWeights),Q(l,u.defaults.cumulativeWeights),a.Expanse.dispatch(u,"changed")}t.setWeights=i;function c(u,h){const{labels:w,zero:l,one:s,direction:f}=u,g=w.indexOf(h);if(g===-1)throw new Error(`Label ${h} not found in: ${w}`);const v=e(u,g),k=l+v*(s-l);return Ct(k,f)}t.normalize=c;function r(u,h){const{labels:w,zero:l,one:s,direction:f}=u;h=Ct(h,f);const g=(h-l)/(s-l),v=Math.round((2*g*w.length-1)/2);return w[v]}t.unnormalize=r;function b(u,h,w){const{order:l}=u,s=Array.from(new Set(h)).sort(xt);if(!l.length){for(let k=0;k<s.length;k++)l[k]=k;u.defaults.order=[...l],u.ordered=!1}const f=Array(s.length).fill(1),g=Et(pt(f,l)),v={labels:s,weights:f,cumulativeWeights:g};for(const[k,S]of Object.entries(v))nt(u[k])&&Q(S,u[k]),w!=null&&w.default&&Q(S,u.defaults[k])}t.train=b;function o(u,h){const{order:w,weights:l,cumulativeWeights:s,defaults:f}=u;if(!h){Q(f.order,w),Q(Et(pt(l,w)),s),u.ordered=!1,a.Expanse.dispatch(u,"changed");return}Q(h,w),Q(Et(pt(l,h)),s),u.ordered=!0,a.Expanse.dispatch(u,"changed")}t.reorder=o;function y(u){return pt(u.labels,u.order)}t.breaks=y;function d(){return!1}t.isContinuous=d;function m(){return!0}t.isDiscrete=m})(zt||(zt={}));var _t;(t=>{function n(o=0,y=1,d){const u="continuous",h=a.Expanse.base(d),[w,l]=[Kt,Kt],s=(d==null?void 0:d.scale)??1,f=(d==null?void 0:d.mult)??1,g=(d==null?void 0:d.offset)??0,v=(d==null?void 0:d.ratio)??!1,k={min:o,max:y,scale:s,mult:f,...h,offset:g,trans:w,inv:l};return{value:0,type:u,min:o,max:y,scale:s,mult:f,offset:g,ratio:v,...h,trans:w,inv:l,defaults:k}}t.of=n;function e(o,y){const{min:d,max:m,zero:u,one:h}=o,{direction:w,scale:l,mult:s,offset:f,trans:g}=o;y=y/(l*s)-f;const v=g(m)-g(d);let k=(g(y-f)-g(d))/v;return k=u+k*(h-u),Ct(k,w)}t.normalize=e;function i(o,y){const{min:d,max:m,zero:u,one:h}=o,{scale:w,mult:l,offset:s,trans:f,inv:g}=o,v=(y-u)/(h-u),k=f(m)-f(d);return g(f(d)+v*k)*(w*l)+s}t.unnormalize=i;function c(o){const{min:y,max:d}=o;return d-y}t.range=c;function r(o,y,d){let[m,u]=P.getMinMax(y)??At(y);m=o.ratio||d!=null&&d.ratio?0:m,a.Expanse.set(o,h=>(h.min=m,h.max=u),d)}t.train=r;function b(o,y=4){const[d,m]=[0,1].map(h=>t.unnormalize(o,h)).sort(mt);return He(d,m,y)}t.breaks=b})(_t||(_t={}));var ne;(t=>{function n(o=[],y){const d=[],m="compound",u=a.Expanse.continuous(0,1,y),{zero:h,one:w,direction:l}=u,s={zero:h,one:w,direction:l};for(const g of o)Object.assign(g,{zero:h,one:w,direction:l}),Object.assign(g.defaults,{zero:h,one:w,direction:l});const f={expanses:o,...u,value:d,type:m,defaults:s};return a.Expanse.listen(f,"changed",()=>{const{zero:g,one:v,direction:k}=f;for(const S of o)Object.assign(S,{zero:g,one:v,direction:k}),Object.assign(S.defaults,{zero:g,one:v,direction:k})}),f}t.of=n;function e(o,y){const{expanses:d}=o;return y.map((m,u)=>a.Expanse.normalize(d[u],m))}t.normalize=e;function i(o,y){const{expanses:d}=o;return y.map((m,u)=>a.Expanse.unnormalize(d[u],m))}t.unnormalize=i;function c(o,y){const{expanses:d}=o;if(y.length!=d.length){const m="The number of arrays does not match the number of expanses.";throw new Error(m)}for(let m=0;m<y.length;m++)a.Expanse.train(d[m],y[m])}t.train=c;function r(o){return _t.breaks(o)}t.breaks=r;function b(o){for(const y of o.expanses)a.Expanse.restoreDefaults(y)}t.restoreDefaults=b})(ne||(ne={}));var ae;(t=>{function n(o=[],y){const d="",m="point",u=a.Expanse.base(y),{zero:h,one:w,direction:l}=u,s=Array.from(Array(o.length),(v,k)=>k),f=!1,g={ordered:f,labels:[...o],order:[...s],zero:h,one:w,direction:l};return{value:d,type:m,ordered:f,labels:o,order:s,...u,defaults:g}}t.of=n;function e(o,y){const{labels:d,order:m,zero:u,one:h,direction:w}=o,l=m[d.indexOf(y)];if(l===-1)return l;const s=u+l/(d.length-1)*(h-u);return Ct(s,w)}t.normalize=e;function i(o,y){const{labels:d,order:m,zero:u,one:h,direction:w}=o;y=Ct(y,w);const l=(y-u)/(h-u),s=Math.round(l*(d.length-1));return d[m[s]]}t.unnormalize=i;function c(o,y,d){const{order:m}=o,u=Array.from(new Set(y)).sort(xt);if(!m.length){for(let h=0;h<u.length;h++)m[h]=h;o.defaults.order=[...m],o.ordered=!1}Q(u,o.labels),d!=null&&d.default&&Q(u,o.defaults.labels)}t.train=c;function r(o,y){const{order:d,defaults:m}=o;if(!y){Q(m.order,d),o.ordered=!1,a.Expanse.dispatch(o,"changed");return}Q(y,d),o.ordered=!0,a.Expanse.dispatch(o,"changed")}t.reorder=r;function b(o){return pt(o.labels,o.order)}t.breaks=b})(ae||(ae={}));var re;(t=>{function n(b){const o=[],y="split",d=b.type;return{...b,value:o,type:y,innerType:d}}t.of=n;function e(b,o){return nt(o)?o.map(y=>a.Expanse.methods[b.innerType].normalize(b,y)):a.Expanse.methods[b.innerType].normalize(b,o)}t.normalize=e;function i(b,o){return nt(o)?o.map(y=>a.Expanse.methods[b.innerType].unnormalize(b,y)):a.Expanse.methods[b.innerType].unnormalize(b,o)}t.unnormalize=i;function c(b,o){a.Expanse.methods[b.innerType].train(b,o)}t.train=c;function r(b){return a.Expanse.methods[b.innerType].breaks(b)}t.breaks=r})(re||(re={})),a.Expanse=void 0,(t=>{t.methods={continuous:_t,point:ae,band:zt,compound:ne,split:re},t.continuous=_t.of,t.point=ae.of,t.band=zt.of,t.compound=ne.of,t.split=re.of;function n(z){const M=(z==null?void 0:z.zero)??0,_=(z==null?void 0:z.one)??1,j=(z==null?void 0:z.direction)??te.Forwards,L=[],D=[];return T.of({zero:M,one:_,direction:j,frozen:L,linked:D})}t.base=n;function e(z,M,_){const{linked:j,frozen:L}=z,D={...z};M(D);for(const I of L)delete D[I];for(const I of Object.keys(D))D[I]===z[I]&&delete D[I];ge(D,z);for(const I of j)t.set(I,M);_!=null&&_.default&&ge(D,z.defaults),_!=null&&_.silent||t.dispatch(z,"changed")}t.set=e;function i(z,M={train:!0}){const _=ve(z)?t.continuous():t.point();return M.train&&t.train(_,z),_}t.infer=i;function c(z,M){for(const _ of M)z.frozen.includes(_)||z.frozen.push(_)}t.freeze=c;function r(z,M){z.linked.includes(M)||z.linked.push(M)}t.linkTo=r;function b(z){const{defaults:M}=z;for(const[_,j]of Object.entries(M))nt(j)&&nt(z[_])?Q(j,z[_]):z[_]=j;t.dispatch(z,"changed")}t.restoreDefaults=b,t.dispatch=T.makeDispatchFn(),t.listen=T.makeListenFn();function o(z,M){return t.methods[z.type].normalize(z,M)}t.normalize=o;function y(z,M){return t.methods[z.type].unnormalize(z,M)}t.unnormalize=y;function d(z,M,_){return t.methods[z.type].train(z,M,_)}t.train=d;function m(z){return t.methods[z.type].breaks(z)}t.breaks=m;function u(z,M){const{direction:_}=z,j=M;t.set(z,L=>(L.zero+=_*j,L.one+=_*j))}t.move=u;function h(z,M,_,j){const{zero:L,one:D,direction:I}=z,K=D-L;I===te.Backwards&&([M,_]=[1-M,1-_]);let[Z,p]=[M,_].map(N=>(N-L)/K);[Z,p]=Jt(Z,p),I===te.Backwards&&([Z,p]=[1-Z,1-p]),t.set(z,N=>(N.zero=Z,N.one=p),j)}t.expand=h;function w(z){t.set(z,M=>M.direction*=-1)}t.flip=w;function l(z,M){if(!k(z))throw new Error("Expanse must be discrete");t.methods[z.type].reorder(z,M)}t.reorder=l;function s(z){return z.one-z.zero}t.unitRange=s;function f(z){if(!g(z))throw new Error("Can only compute range on a continuous expanse");return _t.range(z)}t.range=f;function g(z){return z.type==="continuous"||z.type==="split"}t.isContinuous=g;function v(z){return z.type==="point"}t.isPoint=v;function k(z){return z.type==="point"||z.type==="band"}t.isDiscrete=k;function S(z){return z.type==="band"}t.isBand=S;function A(z){return z.type==="compound"}t.isCompound=A;function E(z){return z.type==="split"}t.isSplit=E})(a.Expanse||(a.Expanse={})),a.Scale=void 0,(t=>{function n(s,f){const g=T.of({domain:s,codomain:f});return a.Expanse.listen(s,"changed",()=>t.dispatch(g,"changed")),a.Expanse.listen(f,"changed",()=>t.dispatch(g,"changed")),g}t.of=n,t.dispatch=T.makeDispatchFn(),t.listen=T.makeListenFn();function e(s,f){s.domain=f,a.Expanse.listen(f,"changed",()=>t.dispatch(s,"changed"))}t.setDomain=e;function i(s,f){s.codomain=f,a.Expanse.listen(f,"changed",()=>t.dispatch(s,"changed"))}t.setCoomain=i;function c(s,f){const{domain:g,codomain:v}=s;return a.Expanse.unnormalize(v,a.Expanse.normalize(g,f))}t.pushforward=c;function r(s,f){const{domain:g,codomain:v}=s;return a.Expanse.unnormalize(g,a.Expanse.normalize(v,f))}t.pullback=r;function b(s,f,g,v){a.Expanse.expand(s.domain,f,g,v)}t.expand=b;function o(s,f,g){if(((g==null?void 0:g.name)??!0)&&P.hasName(f)&&P.copy(f,s),typeof f[0]=="string"&&a.Expanse.isContinuous(s.domain)){const k=Array.from(new Set(f));s.domain=a.Expanse.band(k)}a.Expanse.train(s.domain,f,g)}t.train=o;function y(s){a.Expanse.restoreDefaults(s.domain),a.Expanse.restoreDefaults(s.codomain)}t.restoreDefaults=y;function d(s){const f=a.Expanse.breaks(s.domain);let g=we(f);if(a.Expanse.isCompound(s.domain)){g=we(f,{decimals:1});const k=f.map(S=>a.Expanse.unnormalize(s.codomain,_t.normalize(s.domain,S)));return{labels:g,positions:k}}else if(a.Expanse.isSplit(s.codomain)){const k=t.pushforward(s,f);return{labels:g,positions:k}}const v=f.map(k=>t.pushforward(s,k));return{labels:g,positions:v}}t.breaks=d;function m(s,f){a.Expanse.move(s.domain,f)}t.move=m;function u(s,f){f.codomain=s.codomain}t.shareCodomain=u;function h(s){return a.Expanse.range(s.domain)/a.Expanse.unitRange(s.domain)}t.domainRange=h;function w(s){return a.Expanse.range(s.codomain)*a.Expanse.unitRange(s.codomain)}t.codomainRange=w;function l(s){const{domain:f,codomain:g}=s;if([f,g].map(a.Expanse.isContinuous).includes(!1))throw new Error("Both domain and codomain need to be continuous");const v=a.Expanse.range(f);return a.Expanse.range(g)*a.Expanse.unitRange(g)/v}t.unitRatio=l})(a.Scale||(a.Scale={}));const gt=Symbol("positions");a.Factor=void 0,(t=>{(d=>{d[d.Constant=0]="Constant",d[d.Bijection=1]="Bijection",d[d.Surjection=2]="Surjection"})(t.Type||(t.Type={}));function n(d,m,u,h){return T.of({type:d,cardinality:m,indices:u,data:h})}t.of=n,t.listen=T.makeListenFn(),t.dispatch=T.makeDispatchFn();function e(d,m){m.cardinality=d.cardinality,Q(d.indices,m.indices);for(const u of Reflect.ownKeys(d.data))nt(d.data[u])&&nt(m.data[u])?(Q(d.data[u],m.data[u]),P.copy(d.data[u],m.data[u])):m.data[u]=d.data[u]}t.copyFrom=e;function i(d){const u=[],h=s=>[s],l={...d,[gt]:h};return n(1,1/0,u,l)}t.bijection=i;function c(d){const u=Array(d).fill(0),h=()=>u,w=0,l={[gt]:h};return n(w,1,u,l)}t.mono=c;function r(d,m){const u=d.map(f=>f.toString());m=m??Array.from(new Set(u)).sort(xt),P.hasName(d)&&P.copy(d,m);const h=[],w={};for(let f=0;f<u.length;f++){const g=m.indexOf(u[f]);w[g]||(w[g]=[]),h.push(g),w[g].push(f)}const l=2,s={label:m,[gt]:Object.values(w)};return n(l,m.length,h,s)}t.from=r;function b(d,m){function u(){const w=(m==null?void 0:m.breaks)??$e(d,m),l=new Set,s=[],f={};for(let M=0;M<d.length;M++){const _=w.findIndex(j=>j>=d[M])-1;f[_]||(f[_]=[]),s.push(_),f[_].push(M),l.add(_)}const g=Array.from(l).sort(mt);for(let M=0;M<s.length;M++)s[M]=g.indexOf(s[M]);const[v,k]=[[],[]];for(let M=0;M<g.length;M++)v.push(w[g[M]]),k.push(w[g[M]+1]);const[S,A]=[w[g[0]],w[Tt(g)+1]];P.setMinMax(v,S,A),P.setMinMax(k,S,A),P.setName(v,`min of ${P.getName(d)}`),P.setName(k,`max of ${P.getName(d)}`),P.setName(w,P.getName(d));const E=2,z={binMin:v,binMax:k,breaks:w,[gt]:Object.values(f)};return n(E,g.length,s,z)}const h=u();return m&&T.isReactive(m)&&T.listen(m,"changed",()=>{const w=u();t.copyFrom(w,h),t.dispatch(h,"changed")}),h}t.bin=b;function o(d,m){function u(){if(d.type===1){const L={};for(const p of Reflect.ownKeys(d.data))L[p]=bt.of(d.data[p]);for(const p of Reflect.ownKeys(m.data))L[p]=bt.proxy(m.data[p],m.indices);const D=1,I=m.indices.length,Z=n(D,I,[],L);return Z.parent=d,Z}if(d.type===0){const{type:L,data:D,cardinality:I,indices:K}=m,Z=n(L,I,K,D);return Z.parent=d,Z}const w=Math.max(d.cardinality,m.cardinality)+1,l=new Set,s=[],f={},g={},v={},k=Rt(d.indices),S=Rt(m.indices);for(let L=0;L<d.indices.length;L++){const[D,I]=[k(L),S(L)],K=w*D+I;K in g||(g[K]=D,v[K]=I,f[K]=[]),s.push(K),f[K].push(L),l.add(K)}const A=Array.from(l).sort(mt);for(let L=0;L<s.length;L++)s[L]=A.indexOf(s[L]);const E=Object.values(g),z=Object.values(v),M={};for(let L of Reflect.ownKeys(d.data)){let D=L;if(typeof L=="string")for(;D in M;)L+="$";const[I,K]=[d.data[L],E],Z=nt(I)?St(I,K):bt.proxy(I,K);P.copy(I,Z),M[D]=Z}for(let L of Reflect.ownKeys(m.data)){let D=L;if(typeof L=="string")for(;D in M;)D+="$";const[I,K]=[m.data[L],z],Z=nt(I)?St(I,K):bt.proxy(I,K);P.copy(I,Z),M[D]=Z}const _=2;M[gt]=Object.values(f);const j=n(_,A.length,s,M);return j.parent=d,j}const h=u();return t.listen(d,"changed",()=>{const w=u();t.copyFrom(w,h)}),t.listen(m,"changed",()=>{const w=u();t.copyFrom(w,h)}),T.propagateChange(d,h,{deferred:!0}),T.propagateChange(m,h,{deferred:!0}),h}t.product=o;function y(d,m){const u={};for(let h=0;h<m.indices.length&&(u[m.indices[h]]=d.indices[h],!(Object.keys(u).length>=m.cardinality));h++);return Object.values(u)}t.parentIndices=y})(a.Factor||(a.Factor={}));const Me=255;var ie=(t=>(t[t.Base=7]="Base",t[t.First=6]="First",t[t.Second=5]="Second",t[t.Third=4]="Third",t[t.BaseTransient=3]="BaseTransient",t[t.FirstTransient=2]="FirstTransient",t[t.SecondTransient=1]="SecondTransient",t[t.ThirdTransient=0]="ThirdTransient",t))(ie||{}),rt;(t=>{function n(m){const u=Me,h=Array(m).fill(7),w=[],l=a.Factor.Type.Surjection,s=a.Factor.of(l,8,h,{[Ft]:[0,1,2,3,4,5,6,7]}),f=T.of({group:u,indices:h,transientIndices:w,factor:s});return t.listen(f,"updated",()=>a.Factor.dispatch(s,"changed")),t.listen(f,"cleared",()=>a.Factor.dispatch(s,"changed")),f}t.of=n,t.listen=T.makeListenFn(),t.dispatch=T.makeDispatchFn();function e(m,u){m.group=u}t.setGroup=e;function i(m,u,h){const w=(h==null?void 0:h.group)??m.group;if(r(m,{silent:!0}),w===Me){for(let l=0;l<u.length;l++){const s=u[l];m.indices[s]=y(m.indices[s])}m.transientIndices=u}else for(let l=0;l<u.length;l++){const s=u[l];m.indices[s]=w}h!=null&&h.silent||t.dispatch(m,"updated")}t.update=i;function c(m,u){for(let h=0;h<m.indices.length;h++)m.indices[h]=7;u!=null&&u.silent||t.dispatch(m,"cleared")}t.clearAll=c;function r(m,u){for(let h=0;h<m.transientIndices.length;h++){const w=m.transientIndices[h];m.indices[w]=d(m.indices[w])}u!=null&&u.silent||t.dispatch(m,"cleared")}t.clearTransient=r;function b(m){const{factor:u,indices:h}=m;return w=>u.data[Ft][h[w]]}t.getLayer=b;function o(m){return!(m&4)}t.isTransient=o;function y(m){return m&-5}function d(m){return m|4}})(rt||(rt={}));const Ft=Symbol("layer");var $t;(t=>{function n(r){const b={},o=[],y=q.Type.Bars,d=(r==null?void 0:r.vAnchor)??Ht.Bottom,m=(r==null?void 0:r.hAnchor)??ee.Center,u=(r==null?void 0:r.postfn)??Kt;return{type:y,data:o,scales:b,postfn:u,vAnchor:d,hAnchor:m}}t.of=n;function e(r,b){const{scales:o,postfn:y,hAnchor:d,vAnchor:m}=r,u=q.groupedData(r),h=st(Object.values(u)),w=["x","y","width","height",Ft],[l,s,f,g,v]=q.getters(u,w);for(let k=0;k<h;k++){let S=a.Scale.pushforward(o.x,l(k)),A=a.Scale.pushforward(o.y,s(k)),E=a.Scale.pushforward(o.width,f(k)),z=a.Scale.pushforward(o.height,g(k));const M=b[v(k)],_=[S,A,E,z];y(_),H.rectangleWH(M,..._,{hAnchor:d,vAnchor:m})}}t.render=e;function i(r,b){const{scales:o,postfn:y,hAnchor:d,vAnchor:m}=r,u=q.flatData(r),h=st(Object.values(u)),w=["x","y","width","height",gt],[l,s,f,g,v]=q.getters(u,w),k=[];for(let S=0;S<h;S++){let A=a.Scale.pushforward(o.x,l(S)),E=a.Scale.pushforward(o.y,s(S)),z=a.Scale.pushforward(o.width,f(S)),M=a.Scale.pushforward(o.height,g(S));const _=[A,E,z,M];y(_),[A,E,z,M]=_;const j=[A-z*d,E-M*m,A+z*d,E+M*(1-m)];if(Gt(b,j)){const L=v(S);for(let D=0;D<L.length;D++)k.push(L[D])}}return k}t.check=i;function c(r,b){const{scales:o,postfn:y,hAnchor:d,vAnchor:m}=r,u=q.flatData(r),h=st(Object.values(u)),w=["x","y","width","height"],[l,s,f,g]=q.getters(u,w);for(let v=0;v<h;v++){let k=a.Scale.pushforward(o.x,l(v)),S=a.Scale.pushforward(o.y,s(v)),A=a.Scale.pushforward(o.width,f(v)),E=a.Scale.pushforward(o.height,g(v));const z=[k,S,A,E];y(z),[k,S,A,E]=z;const M=[k-A*d,S-E*m,k+A*d,S+E*(1-m)];if(Zt(b,M)){const _={};P.hasName(u.x)&&(_[P.getName(u.x)]=l(v)),P.hasName(u.y)&&(_[P.getName(u.y)]=s(v)),P.hasName(u.height)&&(_[P.getName(u.height)]=g(v));for(const[j,L]of Object.entries(u))["x","y","width","height"].includes(j)||L&&P.hasName(L)&&(_[P.getName(L)]=q.getter(L)(v));return _}}}t.query=c})($t||($t={}));var oe;(t=>{function n(){const r={},b=[];return{type:q.Type.Lines,data:b,scales:r}}t.of=n;function e(r,b){const{scales:o}=r,y=q.groupedData(r),d=st(Object.values(y)),m=["x","y",Ft],[u,h,w]=q.getters(y,m);for(let l=0;l<d;l++){const s=a.Scale.pushforward(o.x,u(l)),f=a.Scale.pushforward(o.y,h(l)),g=b[w(l)];H.line(g,s,f)}}t.render=e;function i(r,b){const{scales:o}=r,y=q.flatData(r),d=st(Object.values(y)),m=["x","y",gt],[u,h,w]=q.getters(y,m),l=[];for(let s=0;s<d;s++){const f=a.Scale.pushforward(o.x,u(s)),g=a.Scale.pushforward(o.y,h(s));for(let v=1;v<f.length;v++){const k=[f[v-1],g[v-1],f[v],g[v]];if(ye(b,k)){const S=w(s);for(let A=0;A<S.length;A++)l.push(S[A])}}}return l}t.check=i;function c(r,b){let{scales:o}=r;const y=q.flatData(r),d=st(Object.values(y)),m=["x","y",gt],[u,h]=q.getters(y,m),w=[b[0]-1,b[1]-1,b[0]+1,b[1]+1];for(let l=0;l<d;l++){const s=a.Scale.pushforward(o.x,u(l)),f=a.Scale.pushforward(o.y,h(l));for(let g=1;g<s.length;g++){const v=[s[g-1],f[g-1],s[g],f[g]];if(ye(w,v)){const k={},[S,A]=[u(l),h(l)];for(let E=0;E<S.length;E++)k[S[E]]=A[E];for(const[E,z]of Object.entries(y))E==="x"||E==="y"||z&&P.hasName(z)&&(k[P.getName(z)]=q.getter(z)(l));return k}}}}t.query=c})(oe||(oe={}));var se;(t=>{function n(){const r={},b=[];return{type:q.Type.Points,data:b,scales:r}}t.of=n;function e(r,b){const{scales:o}=r,y=q.groupedData(r),d=st(Object.values(y)),m=["x","y","size",Ft],[u,h,w,l]=q.getters(y,m);for(let s=0;s<d;s++){const f=a.Scale.pushforward(o.x,u(s)),g=a.Scale.pushforward(o.y,h(s)),v=a.Scale.pushforward(o.size,w(s)),k=b[l(s)];H.point(k,f,g,{radius:v})}}t.render=e;function i(r,b){const{scales:o}=r,y=q.flatData(r),d=st(Object.values(y)),m=["x","y","size",gt],[u,h,w,l]=q.getters(y,m),s=[];for(let f=0;f<d;f++){const g=a.Scale.pushforward(o.x,u(f)),v=a.Scale.pushforward(o.y,h(f));let k=a.Scale.pushforward(o.size,w(f));k=k/Math.sqrt(2);const S=[g-k,v-k,g+k,v+k];if(Gt(b,S)){const A=l(f);for(let E=0;E<A.length;E++)s.push(A[E])}}return s}t.check=i;function c(r,b){const{scales:o}=r,y=q.flatData(r),d=st(Object.values(y)),m=["x","y","size"],[u,h,w]=q.getters(y,m);for(let l=0;l<d;l++){const s=a.Scale.pushforward(o.x,u(l)),f=a.Scale.pushforward(o.y,h(l));let g=a.Scale.pushforward(o.size,w(l));g=g/Math.sqrt(2);const v=[s-g,f-g,s+g,f+g];if(Zt(b,v)){const k={};k[P.getName(y.x)]=u(l),k[P.getName(y.y)]=h(l);for(const[S,A]of Object.entries(y))S==="x"||S==="y"||A&&P.hasName(A)&&(k[P.getName(A)]=q.getter(A)(l));return k}}}t.query=c})(se||(se={}));var Bt;(t=>{function n(){const r={},b=[];return{type:q.Type.Rectangles,data:b,scales:r}}t.of=n;function e(r,b){const{scales:o}=r,y=q.groupedData(r),d=st(Object.values(y)),m=["x0","y0","x1","y1","area",Ft],[u,h,w,l,s,f]=q.getters(y,m);for(let g=0;g<d;g++){let v=a.Scale.pushforward(o.x,u(g)),k=a.Scale.pushforward(o.y,h(g)),S=a.Scale.pushforward(o.x,w(g)),A=a.Scale.pushforward(o.y,l(g));const E=b[f(g)];if(y.area){const z=a.Scale.pushforward(o.area,s(g)),M=S-v,_=A-k;v=v+(1-z)/2*M,S=S-(1-z)/2*M,k=k+(1-z)/2*_,A=A-(1-z)/2*_}H.rectangleXY(E,v,k,S,A)}}t.render=e;function i(r,b){const{scales:o}=r,y=q.flatData(r),d=st(Object.values(y)),m=["x0","y0","x1","y1","area",gt],[u,h,w,l,s,f]=q.getters(y,m),g=[];for(let v=0;v<d;v++){let k=a.Scale.pushforward(o.x,u(v)),S=a.Scale.pushforward(o.y,h(v)),A=a.Scale.pushforward(o.x,w(v)),E=a.Scale.pushforward(o.y,l(v));if(y.area){const z=a.Scale.pushforward(o.area,s(v)),M=A-k,_=E-S;k=k+(1-z)/2*M,A=A-(1-z)/2*M,S=S+(1-z)/2*_,E=E-(1-z)/2*_}if(Gt(b,[k,S,A,E])){const z=f(v);for(let M=0;M<z.length;M++)g.push(z[M])}}return g}t.check=i;function c(r,b){const{scales:o}=r,y=q.flatData(r),d=st(Object.values(y)),m=["x0","y0","x1","y1","area"],[u,h,w,l,s]=q.getters(y,m);for(let f=0;f<d;f++){let g=a.Scale.pushforward(o.x,u(f)),v=a.Scale.pushforward(o.y,h(f)),k=a.Scale.pushforward(o.x,w(f)),S=a.Scale.pushforward(o.y,l(f));if(y.area){const A=a.Scale.pushforward(o.area,s(f)),E=k-g,z=S-v;g=g+(1-A)/2*E,k=k-(1-A)/2*E,v=v+(1-A)/2*z,S=S-(1-A)/2*z}if(Zt(b,[g,v,k,S])){const A={};for(const E of Object.values(y))E&&P.hasName(E)&&(A[P.getName(E)]=q.getter(E)(f));return A}}}t.query=c})(Bt||(Bt={}));var q;(t=>{(d=>{d[d.Points=0]="Points",d[d.Bars=1]="Bars",d[d.Rectangles=2]="Rectangles",d[d.Lines=3]="Lines"})(t.Type||(t.Type={}));const n={0:se,1:$t,2:Bt,3:oe};function e(d){return d.data[d.data.length-2]}t.flatData=e;function i(d){return d.data[d.data.length-1]}t.groupedData=i;function c(d,m=()=>.5){return Rt(d??m)}t.getter=c;function r(d,m,u=()=>.5){return m.map(h=>t.getter(d[h],u))}t.getters=r;function b(d,m){n[d.type].render(d,m)}t.render=b;function o(d,m){return n[d.type].check(d,m)}t.check=o;function y(d,m){return n[d.type].query(d,m)}t.query=y})(q||(q={}));const pe=Symbol("parent"),Ae=Symbol("values"),on=Symbol("indices"),Ee=Symbol("factor"),sn=Symbol("reducer");var U;(t=>{function n(h,w,l,s){const f=h;return f[Ae]=h,f[Ee]=w,f[sn]=l,s&&e(f,s),f}t.of=n,t.listen=T.makeListenFn(),t.dispatch=T.makeDispatchFn();function e(h,w){h[pe]=w}t.setParent=e;function i(h){const[,w,l,s]=u(h);if(!s)throw new Error("Parent missing");const f=a.Factor.parentIndices(o(s),w),g=St(s,f),v=n(g,o(s),l,y(s));return d(v,s),m(v,f),P.copyName(h,v),v}t.parent=i;function c(h){const[w,l,s,f,g]=u(h);if(!f)throw new Error("Cannot stack a without a parent");const v=a.Factor.parentIndices(o(f),l),{reducefn:k,initialfn:S}=s,[A,E]=[w.length,[]],z=Array.from(Array(A),()=>S()),M=bt.of(v);for(let L=0;L<w.length;L++){const D=M(L);E[D]===void 0&&(E[D]=S()),E[D]=k(E[D],w[L]),z[L]=E[D]}const _=g?St(z,g):z,j=t.of(_,l,s,f);return d(j,z),g&&m(j,g),P.copyName(h,j),j}t.stack=c;function r(h,w){const[l,s,f,g,v]=u(h);if(!g)throw new Error("Cannot normalize a without a parent");const k=a.Factor.parentIndices(o(g),s),S=St(g,k),A=[...l];for(let M=0;M<h.length;M++)A[M]=w(A[M],S[M]);const E=v?St(A,v):A,z=t.of(E,s,f,g);return d(z,A),v&&m(z,v),P.copyName(h,z),z}t.normalize=r;function b(h){const[w,l,s,f,g]=u(h),v=[];v.push(s.initialfn());for(let A=0;A<w.length-1;A++)v.push(w[A]);const k=g?St(v,g):v,S=t.of(k,l,s,f);return d(S,v),g&&m(S,g),P.copyName(h,S),S}t.shiftLeft=b;function o(h){return h[Ee]}function y(h){return h[pe]}t.getParent=y;function d(h,w){h[Ae]=w}function m(h,w){h[on]=w}function u(h){return[h[Ae],h[Ee],h[sn],h[pe],h[on]]}})(U||(U={})),a.Reducer=void 0,(t=>{t.sum={name:"sum",fallback:"count",initialfn:()=>0,reducefn:(c,r)=>c+r},t.max={name:"max",initialfn:()=>-1/0,reducefn:(c,r)=>Math.max(c,r)},t.product={name:"product",initialfn:()=>1,reducefn:(c,r)=>c*r},t.table={name:"table",initialfn:()=>({}),reducefn:(c,r)=>(c[r]=c[r]+1||0,c)};function n(c){return typeof c=="string"?t[c]:c}t.get=n;function e(c,r,b){const{indices:o,cardinality:y}=r,{initialfn:d,reducefn:m}=b,u=Array.from(Array(y),()=>d()),h=Rt(o),w=Rt(c);for(let s=0;s<o.length;s++)u[h(s)]=m(u[h(s)],w(s));const l=U.of(u,r,b);return P.copy(c,l),P.setName(l,i(u,b)??"[unknown summary]"),l}t.reduce=e;function i(c,r){return P.hasName(c)?`${r.name} of ${P.getName(c)}`:r.fallback}t.getName=i})(a.Reducer||(a.Reducer={}));var J;(t=>{function n(r,b){const o=[];for(let y=0;y<b.length;y++){const d=b[y],m=e(r,d),u=T.of(qe(m,d.data));if(o.push(u),y>0)for(const h of Object.keys(m)){const w=o[y-1][h];U.setParent(m[h],w)}a.Factor.listen(d,"changed",()=>{const h=e(r,d);for(const w of Object.keys(h))Q(h[w],m[w])}),T.propagateChange(d,u,{deferred:!0})}return o}t.of=n;function e(r,b){const o={};for(const[y,d]of Object.entries(r)){const[m,u]=d;o[y]=a.Reducer.reduce(m,b,u)}return o}function i(r,b){const o=[];for(let y=0;y<r.length;y++){let d=function(u){const h=b[y](u),w=Reflect.ownKeys(u);for(const l of w)(typeof l=="symbol"||Ze(l))&&(h[l]=u[l]);return h};const m=T.of(d(r[y]));o.push(m),T.listen(r[y],"changed",()=>{const u=d(r[y]);for(const h of Reflect.ownKeys(u))nt(u[h])&&nt(m[h])&&Q(u[h],m[h]);T.dispatch(m,"changed")})}return o}t.translate=i;function c(r,b){const o={};let y=0;for(const[d,m]of r)o[`q${y++}`]=[d(b),m];return o}t.formatQueries=c})(J||(J={}));function Sa(t,n,e){const{data:i,marker:c}=t;let[r,b]=n(i);const o=b&&(e!=null&&e.reducer)?e.reducer:a.Reducer.sum,y=b||(()=>1),d=a.Factor.from(r),m=a.Factor.product(d,c.factor),u=[d,m],h=e!=null&&e.queries?e.queries(i):{},w=J.of({stat:[y,o],...h},u),l=[],s=0,f={type:"bar",scales:{x:"band"}},g={representation:s,...a.Plot.of(f),summaries:w,coordinates:l};return a.Plot.listen(g,"n",()=>za(g)),ln(g),a.Plot.addGeom(g,$t.of()),g}function cn(t,n){if(t.ordered)zt.reorder(t);else{const e=Oe(n);zt.reorder(t,e)}}function za(t){t.representation===0?Ma(t):ln(t)}function ln(t){const{summaries:n,scales:e}=t,i=J.translate(n,[o=>({x:o.label,y:wt,height:o.stat,width:kt}),o=>({x:o.label,y:wt,height:U.stack(o.stat),width:kt})]),[c]=i,r={default:!0,ratio:!0};a.Scale.train(e.x,c.x,r),a.Scale.train(e.y,c.height,r),a.Scale.train(e.width,[0,1],r),a.Scale.train(e.height,c.height,r),a.Expanse.freeze(e.y.domain,["zero"]),a.Expanse.freeze(e.height.domain,["zero"]),zt.setWeights(e.x.domain);const b=1/new Set(c.x).size;a.Expanse.linkTo(e.y.domain,e.height.domain),a.Expanse.set(e.width.codomain,o=>{o.scale=b,o.mult=.9,o.offset=0},{default:!0}),P.setName(e.y,P.getName(c.height)),T.removeListeners(t,"o"),a.Plot.listen(t,"o",()=>cn(e.x.domain,c.height)),t.representation=0,a.Plot.setData(t,i),a.Plot.render(t),a.Plot.renderAxes(t)}function Ma(t){const{summaries:n,scales:e}=t,i=J.translate(n,[b=>({x:b.label,y:wt,height:kt,width:b.stat}),b=>({x:b.label,y:wt,height:U.normalize(U.stack(b.stat),(o,y)=>o/y),width:U.parent(b.stat)})]),[c]=i,r={default:!0,ratio:!0};a.Scale.train(e.x,c.x,r),a.Scale.train(e.y,[0,1],r),a.Scale.train(e.width,Et(c.width),r),a.Scale.train(e.height,[0,1],r),a.Expanse.freeze(e.y.domain,["zero"]),a.Expanse.freeze(e.height.domain,["zero"]),zt.setWeights(e.x.domain,c.width),a.Expanse.linkTo(e.y.domain,e.height.domain),a.Expanse.set(e.width.codomain,b=>{b.scale=1,b.mult=1,b.offset=-1},{default:!0}),P.setName(e.y,"proportion"),T.removeListeners(t,"o"),a.Plot.listen(t,"o",()=>cn(e.x.domain,c.width)),t.representation=1,a.Plot.setData(t,i),a.Plot.render(t),a.Plot.renderAxes(t)}function pa(t,n,e){const{data:i,marker:c}=t;let[r,b,o]=n(i);const y=o&&(e!=null&&e.reducer)?e.reducer:a.Reducer.sum,d=o?[...o]:()=>1,m=a.Factor.product(a.Factor.from(r),a.Factor.from(b)),u=a.Factor.product(m,c.factor),h=[m,u],w=J.formatQueries((e==null?void 0:e.queries)??[],i),l=J.of({stat:[d,y],...w},h),s=[],f=0,g={type:"fluct",scales:{x:"band",y:"band"}},v={representation:f,...a.Plot.of(g),summaries:l,coordinates:s};return a.Scale.shareCodomain(v.scales.area,v.scales.width),a.Scale.shareCodomain(v.scales.area,v.scales.height),a.Plot.listen(v,"n",()=>Aa(v)),un(v),a.Plot.addGeom(v,$t.of({vAnchor:Ht.Middle})),v}function Aa(t){t.representation===0?Ea(t):un(t)}function un(t){const{summaries:n,scales:e}=t,i=J.translate(n,[o=>({x:o.label,y:o.label$,height:o.stat,width:o.stat}),o=>({x:o.label,y:o.label$,height:U.stack(o.stat),width:U.stack(o.stat)})]),[c]=i,r={default:!0,ratio:!0};a.Scale.train(e.x,c.x,r),a.Scale.train(e.y,c.y,r),a.Scale.train(e.width,c.width,r),a.Scale.train(e.height,c.height,r);const b=Ot(new Set(c.x).size,new Set(c.y).size);a.Expanse.set(e.area.codomain,o=>{o.scale=1/b,o.mult=.9,o.offset=0},{default:!0}),a.Plot.setData(t,i),t.representation=0,a.Plot.render(t)}function Ea(t){const{summaries:n,scales:e}=t,i=J.translate(n,[o=>({x:o.label,y:o.label$,height:kt,width:kt}),o=>({x:o.label,y:o.label$,height:U.normalize(U.stack(o.stat),(y,d)=>y/d),width:U.normalize(U.stack(o.stat),(y,d)=>y/d)})]),[c]=i,r={default:!0,ratio:!0};a.Scale.train(e.x,c.x,r),a.Scale.train(e.y,c.y,r),a.Scale.train(e.width,[0,1],r),a.Scale.train(e.height,[0,1],r);const b=Ot(new Set(c.x).size,new Set(c.y).size);a.Expanse.set(e.area.codomain,o=>{o.scale=1/b,o.mult=.9,o.offset=-1},{default:!0}),a.Plot.setData(t,i),t.representation=1,a.Plot.render(t)}function _a(t,n,e){const{data:i,marker:c}=t;let[r,b]=n(i);const o=b&&(e!=null&&e.reducer)?e.reducer:a.Reducer.sum,y=b||(()=>1),[d,m]=At(r),u=m-d,h=T.of({anchor:d,width:u/15}),w=a.Factor.mono(r.length),l=a.Factor.product(w,a.Factor.bin(r,h)),s=a.Factor.product(l,c.factor),f=[w,l,s],g=e!=null&&e.queries?e.queries(i):{},v=J.of({stat:[y,o],...g},f),k=0,S=[],A={type:"histo"},E={representation:k,...a.Plot.of(A),summaries:v,coordinates:S};a.Plot.listen(E,"n",()=>Pa(E));const z=u/10;return a.Plot.listen(E,"=",()=>T.set(h,M=>M.width*=1.1111111111111112)),a.Plot.listen(E,"-",()=>T.set(h,M=>M.width*=.9)),a.Plot.listen(E,"'",()=>T.set(h,M=>M.anchor+=z)),a.Plot.listen(E,";",()=>T.set(h,M=>M.anchor-=z)),a.Plot.listen(E,"r",()=>{T.set(h,M=>(M.anchor=d,M.width=u/15))}),fn(E),a.Plot.addGeom(E,Bt.of()),E}function Pa(t){t.representation===0?Na(t):fn(t)}function fn(t){const{summaries:n}=t,e=J.translate(n,[r=>r,r=>({x0:r.binMin,y0:wt,x1:r.binMax,y1:r.stat}),r=>({x0:r.binMin,y0:wt,x1:r.binMax,y1:U.stack(r.stat)})]),{scales:i}=t,[,c]=e;a.Scale.train(i.x,c.x1,{default:!0,name:!1}),a.Scale.train(i.y,c.y1,{default:!0,ratio:!0});for(const r of t.data)T.removeListeners(r,"changed");T.listen(c,"changed",()=>{a.Scale.train(i.x,c.x1,{default:!0,name:!1}),a.Scale.train(i.y,c.y1,{default:!0,ratio:!0})}),a.Expanse.freeze(i.y.domain,["zero"]),P.setName(i.x,P.getName(n[1].breaks)),P.setName(i.y,P.getName(c.y1)),t.representation=0,a.Plot.setData(t,e),a.Plot.render(t),a.Plot.renderAxes(t)}function Na(t){const{summaries:n}=t,e=J.translate(n,[r=>r,r=>({x0:U.shiftLeft(U.stack(r.stat)),y0:wt,x1:U.stack(r.stat),y1:kt,query1:r.binMin,query2:r.binMax}),r=>({x0:U.shiftLeft(U.stack(U.parent(r.stat))),y0:wt,x1:U.stack(U.parent(r.stat)),y1:U.normalize(U.stack(r.stat),(b,o)=>b/o)})]),{scales:i}=t,[,c]=e;a.Scale.train(i.x,[0,...c.x1],{default:!0,name:!1}),a.Scale.train(i.y,[0,1],{default:!0,ratio:!0}),T.listen(c,"changed",()=>{a.Scale.train(i.x,[0,...c.x1],{default:!0,name:!1})}),a.Expanse.freeze(i.y.domain,["zero"]),P.setName(i.x,"cumulative count"),P.setName(i.y,"proportion"),a.Plot.setData(t,e),t.representation=1,a.Plot.render(t),a.Plot.renderAxes(t)}function xa(t,n,e){const{data:i,marker:c}=t;let[r,b,o]=n(i);const y=o&&(e!=null&&e.reducer)?e.reducer:a.Reducer.sum,d=o||(()=>1),[m,u]=At(r),[h,w]=At(b),[l,s]=[u-m,w-h],f=T.of({anchor:m,width:l/15}),g=T.of({anchor:h,width:s/15}),v=a.Factor.bin(r,f),k=a.Factor.bin(b,g),S=a.Factor.product(v,k),A=a.Factor.product(S,c.factor),E=[S,A],z=e!=null&&e.queries?e.queries(i):{},M=J.of({stat:[d,y],...z},E),_=0,j=[],L={type:"histo2d",ratio:e==null?void 0:e.ratio},D={representation:_,...a.Plot.of(L),summaries:M,coordinates:j};return a.Plot.listen(D,"n",()=>Ta(D)),a.Plot.listen(D,"=",()=>{T.set(f,I=>I.width*=1.1111111111111112),T.set(g,I=>I.width*=1.1111111111111112)}),a.Plot.listen(D,"-",()=>{T.set(f,I=>I.width*=.9),T.set(g,I=>I.width*=.9)}),a.Plot.listen(D,"r",()=>{T.set(f,I=>(I.anchor=m,I.width=l/15)),T.set(g,I=>(I.anchor=h,I.width=s/15))}),dn(D),a.Plot.addGeom(D,Bt.of()),D}function Ta(t){t.representation===0?La(t):dn(t)}function dn(t){const{summaries:n}=t,e=J.translate(n,[r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:r.stat}),r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:U.stack(r.stat)})]),{scales:i}=t,[,c]=e;a.Scale.train(i.x,c.x1,{default:!0}),a.Scale.train(i.y,c.y1,{default:!0}),a.Scale.train(i.area,c.area,{default:!0}),a.Expanse.set(i.area.codomain,r=>(r.min=0,r.max=1),{default:!0}),a.Expanse.freeze(i.area.codomain,["min","max"]);for(const r of t.data)T.removeListeners(r,"changed");T.listen(c,"changed",()=>{a.Scale.train(i.x,c.x1,{default:!0,name:!1}),a.Scale.train(i.y,c.y1,{default:!0,name:!1}),a.Scale.train(i.area,c.area,{default:!0})}),t.representation=0,a.Plot.setData(t,e),P.setName(i.x,P.getName(n[1].breaks)),P.setName(i.y,P.getName(n[1].breaks$)),a.Plot.render(t),a.Plot.renderAxes(t)}function La(t){const{summaries:n}=t,e=J.translate(n,[r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:kt}),r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:U.normalize(U.stack(r.stat),(b,o)=>b/o)})]),{scales:i}=t,[,c]=e;a.Scale.train(i.x,c.x1,{default:!0}),a.Scale.train(i.y,c.y1,{default:!0}),a.Scale.train(i.area,[0,1],{default:!0}),a.Expanse.set(i.area.codomain,r=>(r.min=0,r.max=1),{default:!0}),a.Expanse.freeze(i.area.codomain,["min","max"]);for(const r of t.data)T.removeListeners(r,"changed");T.listen(c,"changed",()=>{a.Scale.train(i.x,c.x1,{default:!0,name:!1}),a.Scale.train(i.y,c.y1,{default:!0,name:!1})}),t.representation=1,a.Plot.setData(t,e),P.setName(i.x,P.getName(n[1].breaks)),P.setName(i.y,P.getName(n[1].breaks$)),a.Plot.render(t),a.Plot.renderAxes(t)}function Ca(t,n,e){const{data:i,marker:c}=t,r=n(i),b=r.map(P.getName),o=bt.constant(b),y=bt.multi(r),d=e!=null&&e.queries?e.queries(i):{},m=a.Factor.bijection({x:o,y,...d}),u=a.Factor.product(m,c.factor),h=J.of({},[m,u]),w=J.translate(h,[A=>A,A=>A]),l=a.Plot.of({type:"line"}),{scales:s}=l,{expandX:f,expandY:g}=ht,v={zero:f,one:1-f},k={zero:g,one:1-g};a.Scale.setDomain(s.x,a.Expanse.split(a.Expanse.point(b,v))),a.Scale.setCoomain(s.x,a.Expanse.split(s.x.codomain));const S=r.map(A=>a.Expanse.infer(A));return a.Scale.setDomain(s.y,a.Expanse.compound(S,k)),a.Scale.setCoomain(s.y,a.Expanse.split(s.y.codomain)),P.setName(s.x,"variable"),P.setName(s.y,"value"),a.Plot.setData(l,w),a.Plot.addGeom(l,oe.of()),l}function Ra(t,n,e){const{data:i,marker:c}=t,[r,b,o]=n(i),y=e!=null&&e.queries?e==null?void 0:e.queries(i):{},d={x:r,y:b,size:o??(()=>.5),...y},m=a.Factor.bijection(d),u=a.Factor.product(m,c.factor),h=J.of({},[m,u]),w=J.translate(h,[f=>f,f=>f]),l=a.Plot.of({type:"scatter",ratio:e==null?void 0:e.ratio}),{scales:s}=l;return a.Scale.train(s.x,r,{default:!0}),a.Scale.train(s.y,b,{default:!0}),o&&a.Scale.train(s.size,o,{default:!0}),a.Plot.setData(l,w),a.Plot.addGeom(l,se.of()),{...l,summaries:h}}const ct={createElement(t,n,...e){const i=document.createElement(t);for(const[c,r]of Object.entries(n||{}))c.startsWith("on")&&c.toLowerCase()in window?i.addEventListener(c.toLowerCase().slice(2),r):i.setAttribute(c,r);return hn(i,...e),i}};function hn(t,...n){if(n.length===0)return;if(n.length>1){for(const c of n)hn(t,c);return}const e=n[0],i=Fa(e)?e:document.createTextNode(e);t.appendChild(i)}function Fa(t){return t.nodeType!=null}function Da(t){mn(t,"x"),mn(t,"y")}function mn(t,n){const e=t.scales[n];if(!e.other||!a.Expanse.isContinuous(e.other.codomain))return;const i=t.frames[`${n}Axis`],{context:c}=i,{labels:r,positions:b}=a.Scale.breaks(e),[o,y,d,m]=t.margins,u=parseInt(c.font.match(/^[0-9]*/)[0],10),h=e.other.codomain.min-u/2,{width:w,height:l}=i;if(H.clear(i),n==="x"){let[s,f]=[0,0];for(let g=0;g<r.length;g++){const v=r[g],k=b[g],S=H.textWidth(i,v)+1;bn(k,y,w-m)||yn(s,k,f,S)||([s,f]=[k,S],H.text(i,k,h,v))}}else if(n==="y"){let[s,f]=[0,0];for(let g=0;g<r.length;g++){const v=r[g],k=b[g],S=H.textWidth(i,v)+1,A=H.textHeight(i,v)+1;t.margins[1]/2<S&&(t.margins[1]=2*S,a.Plot.resize(t)),!bn(k,o,l-d)&&(yn(s,k,f,A)||([s,f]=[k,A],H.text(i,h,k,v)))}}}function Ia(t){gn(t,"x"),gn(t,"y")}function gn(t,n){const{scales:e,frames:i,margins:c}=t,r=e[n],b=i.base,o=P.getName(r),y=n==="x"?c[0]:c[1],d=a.Expanse.unnormalize(r.codomain,.5),m=a.Expanse.unnormalize(r.other.codomain,0)-y*2/3;n==="x"&&H.text(b,d,m,o),n==="y"&&H.text(b,m,d,o,{vertical:!0})}function bn(t,n,e){return t<n||t>e}function yn(t,n,e,i){const[c,r]=[t-e/2,t+e/2],[b,o]=[n-i/2,n+i/2];return c<o&&r>=b}a.Plot=void 0,(t=>{function n(p){const N=(p==null?void 0:p.type)??"unknown",C=ct.createElement("div",{id:"plot",class:"relative h-full w-full drop-shadow-md"}),F=ct.createElement("table",{class:"relative z-30 hidden bg-gray-50 shadow-md"});C.appendChild(F);const R=[],O={},X={},$=[],B=[],V=[],{expandX:W,expandY:tt}=ht,lt=[[W,tt,1-W,1-tt]],at={active:!1,locked:!1,mousedown:!1,mousebutton:0,mode:"select",mousecoords:[0,0,0,0],lastkey:"",ratio:(p==null?void 0:p.ratio)??void 0},G=Be(),it=T.of({type:N,data:R,container:C,queryTable:F,frames:O,scales:X,renderables:$,selectables:B,queryables:V,zoomStack:lt,parameters:at,margins:G});return Oa(it),qa(it,p),ja(it),it}t.of=n,t.listen=T.makeListenFn(),t.dispatch=T.makeDispatchFn(),t.scatter=Ra,t.bar=Sa,t.fluct=pa,t.histo=_a,t.histo2d=xa,t.line=Ca;function e(p,N){p.appendChild(N.container),t.resize(N)}t.append=e;function i(p,N){for(const C of p.data)T.removeListeners(C,"changed");p.data.length=0;for(let C=0;C<N.length;C++)p.data.push(N[C]);T.listen(Tt(N),"changed",()=>t.render(p))}t.setData=i;function c(p,N){N.scales=p.scales,N.data=p.data;const{renderables:C,selectables:F,queryables:R}=p;for(const O of[C,F,R])O.push(N)}t.addGeom=c;function r(p,N){const{renderables:C,selectables:F,queryables:R}=p;for(const O of[C,F,R])Lt(O,N)}t.deleteGeom=r;function b(p){We(p.container,"outline outline-2 outline-slate-600"),p.parameters.active=!0,t.dispatch(p,"activated")}t.activate=b;function o(p){Ue(p.container,"outline outline-2 outline-slate-600"),p.parameters.active=!1}t.deactivate=o;function y(p){p.parameters.locked=!0}t.lock=y;function d(p){p.parameters.locked=!1}t.unlock=d;function m(p){for(const N of va)H.clear(p.frames[N]);for(const N of p.renderables)q.render(N,p.frames)}t.render=m;function u(p){for(const N of["base","xAxis","yAxis"])H.clear(p.frames[N]);Da(p),Ia(p)}t.renderAxes=u;function h(p){H.clear(p.frames.user)}t.clearUserFrame=h;function w(p){for(const et of Object.values(p.frames))H.resize(et);const{container:N,scales:C,margins:F,frames:R,parameters:O}=p,{clientWidth:X,clientHeight:$}=N,{x:B,y:V,width:W,height:tt,area:lt}=C,[at,G]=[F[0],F[1]],[it,ut]=[$-F[2],X-F[3]],vt={default:!0};R.under.canvas.style.width=`calc(100% - ${G}px - ${F[3]}px)`,R.under.canvas.style.height=`calc(100% - ${at}px - ${F[2]}px)`,R.over.canvas.style.width=`calc(100% - ${G}px - ${F[3]}px)`,R.over.canvas.style.height=`calc(100% - ${at}px - ${F[2]}px)`;for(const et of Object.values(R))H.clip(et);a.Expanse.set(B.codomain,et=>(et.min=G,et.max=ut),vt),a.Expanse.set(V.codomain,et=>(et.min=at,et.max=it),vt);const[wn,vn]=[ut-G,it-at];if(a.Expanse.set(W.codomain,et=>et.max=wn,vt),a.Expanse.set(tt.codomain,et=>et.max=vn,vt),a.Expanse.set(lt.codomain,et=>et.max=Math.min(wn,vn),vt),O.ratio){const{expandX:et,expandY:kn}=ht;a.Expanse.set(B.domain,Wt=>(Wt.zero=et,Wt.one=1-et),vt),a.Expanse.set(V.domain,Wt=>(Wt.zero=kn,Wt.one=1-kn),vt),t.applyRatio(p,O.ratio)}}t.resize=w;function l(p){const{selectables:N,parameters:C,frames:F}=p,R=new Set;for(const O of N){const X=q.check(O,C.mousecoords);for(let $=0;$<X.length;$++)R.add(X[$])}t.dispatch(p,"set-selected",{cases:Array.from(R)}),t.dispatch(p,"lock-others"),H.clear(F.user),H.rectangleXY(F.user,...C.mousecoords)}t.checkSelection=l;function s(p,N){p.parameters.mode=N}t.setMode=s;function f(p,N){p.parameters.mousedown=N}t.setMousedown=f;function g(p,N){p.parameters.mousebutton=N}t.setMouseButton=g,t.mousemoveHandlers={select:v,pan:k,query:S};function v(p,N){const{container:C,parameters:F}=p;if(!F.active||!F.mousedown)return;t.dispatch(p,"clear-transient");const{mousecoords:R}=F,{clientHeight:O}=C,X=N.offsetX,$=O-N.offsetY;R[2]=X,R[3]=$,t.checkSelection(p)}function k(p,N){const{container:C,scales:F,parameters:R}=p;if(!R.active||!R.mousedown)return;const{mousecoords:O}=R,{clientWidth:X,clientHeight:$}=C,[B,V]=O,W=N.offsetX,tt=$-N.offsetY,lt=(W-B)/X,at=(tt-V)/$;a.Scale.move(F.x,lt),a.Scale.move(F.y,at),O[0]=W,O[1]=tt,t.clearUserFrame(p)}function S(p,N){const{offsetX:C,offsetY:F}=N,{container:R,queryTable:O,queryables:X}=p,{clientWidth:$,clientHeight:B}=R;O.style.display="none";const V=C,W=B-F;let tt;for(const it of X)if(tt=q.query(it,[V,W]),tt)break;if(!tt)return;nn(O);for(const[it,ut]of Object.entries(tt)){const vt=ct.createElement("tr",null,ct.createElement("td",{class:"border border-gray-400 px-3"},it),ct.createElement("td",{class:"border border-gray-400 px-3 font-mono"},Qe(ut)));O.appendChild(vt)}O.style.display="inline-block";const lt=getComputedStyle(O),at=parseFloat(lt.width.slice(0,-2)),{clientWidth:G}=O;V+at>$?(O.style.left="auto",O.style.right=`${G-C+5}px`):(O.style.left=`${V+5}px`,O.style.right="auto"),O.style.top=F+"px"}t.keydownHandlers={r:_,"=":A,"-":E,"[":z,"]":M,z:L,x:D,q:j};function A(p){const{area:N,size:C,width:F}=p.scales;a.Expanse.set(N.codomain,R=>(R.min*=1.1111111111111112,R.max*=1.1111111111111112)),a.Expanse.set(C.codomain,R=>(R.min*=1.1111111111111112,R.max*=1.1111111111111112)),a.Expanse.set(F.codomain,R=>R.mult<1?R.mult*=1.1111111111111112:null)}function E(p){const{area:N,width:C,size:F}=p.scales;a.Expanse.set(N.codomain,R=>(R.min*=.9,R.max*=.9)),a.Expanse.set(F.codomain,R=>(R.min*=.9,R.max*=.9)),a.Expanse.set(C.codomain,R=>R.mult*=.9)}function z(p){for(const N of an){const C=p.frames[N],F=C.context.globalAlpha;C.context.globalAlpha=Mt(F*9/10,0,1)}t.render(p)}function M(p){for(const N of an){const C=p.frames[N],F=C.context.globalAlpha;C.context.globalAlpha=Mt(F*10/9,0,1)}t.render(p)}function _(p){for(const N of Object.values(p.scales))a.Scale.restoreDefaults(N);p.zoomStack.length=1,t.clearUserFrame(p)}t.reset=_;function j(p){t.setMode(p,"query")}t.setQueryMode=j;function L(p,N){const{scales:C,parameters:F,zoomStack:R}=p;let{coords:O,units:X}=N??{};X=X??"abs";let[$,B,V,W]=O??F.mousecoords;const{x:tt,y:lt}=C;if(X==="abs"){if(Math.abs(V-$)<10||Math.abs(W-B)<10)return;$=Mt(a.Expanse.normalize(tt.codomain,$)),V=Mt(a.Expanse.normalize(tt.codomain,V)),B=Mt(a.Expanse.normalize(lt.codomain,B)),W=Mt(a.Expanse.normalize(lt.codomain,W))}[$,V]=[$,V].sort(mt),[B,W]=[B,W].sort(mt),a.Scale.expand(C.x,$,V),a.Scale.expand(C.y,B,W);const at=Nt($,V),G=Nt(B,W),it=It(Ot(at,G));a.Expanse.set(C.width.codomain,ut=>ut.max*=at),a.Expanse.set(C.height.codomain,ut=>ut.max*=G),a.Expanse.set(C.area.codomain,ut=>ut.max*=it),a.Expanse.set(C.size.codomain,ut=>ut.max*=it),R.push([$,B,V,W]),t.dispatch(p,"clear-transient"),t.render(p)}t.zoom=L;function D(p){const{scales:N,zoomStack:C}=p;if(C.length===1)return;const[F,R,O,X]=C[C.length-1],[$,B]=Jt(F,O),[V,W]=Jt(R,X);a.Scale.expand(N.x,$,B),a.Scale.expand(N.y,V,W);const tt=Nt($,B),lt=Nt(V,W),at=1/It(Ot(1/tt,1/lt));a.Expanse.set(N.width.codomain,G=>G.max*=tt),a.Expanse.set(N.height.codomain,G=>G.max*=lt),a.Expanse.set(N.area.codomain,G=>G.max*=at),a.Expanse.set(N.size.codomain,G=>G.max*=at),C.pop(),t.clearUserFrame(p),t.render(p)}t.popZoom=D;function I(p,N){const{x:C,y:F}=p.scales;if(!a.Expanse.isContinuous(C.domain)||!a.Expanse.isContinuous(F.domain))throw new Error("Both axes need to be continuous to set a ratio");p.parameters.ratio=N,t.resize(p)}t.setRatio=I;function K(p,N){const{scales:C}=p,{x:F,y:R}=C,O=a.Scale.unitRatio(F),X=a.Scale.unitRatio(R)*N;if(O>X){const $=X/O*a.Expanse.unitRange(R.domain);a.Expanse.set(F.domain,B=>(B.zero=(1-$)/2,B.one=(1+$)/2),{default:!0})}else{const $=O/X*a.Expanse.unitRange(F.domain);a.Expanse.set(R.domain,B=>(B.zero=(1-$)/2,B.one=(1+$)/2),{default:!0})}}t.applyRatio=K;function Z(p,N){const{scale:C,min:F,max:R,mult:O,labels:X,direction:$}=N,B=p.scales[C].domain,V=p.scales[C].codomain;if(!["x","y","area","size"].includes(C))throw new Error(`Unrecognized scale '${C}'`);if(F||R){if(!a.Expanse.isContinuous(B))throw new Error("Limits can only be set with a continuous scale");a.Expanse.set(B,W=>{F&&(W.min=F),R&&(W.max=R)})}if(X){if(!a.Expanse.isDiscrete(B))throw new Error("Labels can be ordered with a discrete scale only");if(!en(B.labels,X))throw new Error("Labels must match the scale's labels");const W=je(B.labels,X);a.Expanse.reorder(B,W)}$&&a.Expanse.set(B,W=>W.direction=$),O&&a.Expanse.set(V,W=>W.mult=O)}t.setScale=Z})(a.Plot||(a.Plot={}));function Oa(t){const{container:n,frames:e,margins:i}=t,[c,r,b,o]=i,y=[7,6,5,4,3,2,1,0],d="absolute top-0 right-0 w-full h-full";for(const m of y){const u=ct.createElement("canvas",{class:d});u.style.zIndex=`${7-m+2}`;const h=H.of(u),w=le[m];H.setContext(h,{fillStyle:w,strokeStyle:w}),h.margins=i,e[m]=h}e.base=H.of(ct.createElement("canvas",{class:d+" z-0 bg-gray-100"})),H.setContext(e.base,{font:`${ht.axisTitleFontsize}rem sans-serif`,textBaseline:"middle",textAlign:"center"}),e.under=H.of(ct.createElement("canvas",{class:d+" z-1 bg-white"})),e.under.canvas.style.width=`calc(100% - ${r}px - ${o}px)`,e.under.canvas.style.height=`calc(100% - ${c}px - ${b}px)`,e.under.canvas.style.top=b+"px",e.under.canvas.style.right=o+"px",e.over=H.of(ct.createElement("canvas",{class:d+"relative z-10 border border-b-black border-l-black"})),e.over.canvas.style.width=`calc(100% - ${r}px - ${o}px)`,e.over.canvas.style.height=`calc(100% - ${c}px - ${b}px)`,e.over.canvas.style.top=b+"px",e.over.canvas.style.right=o+"px",e.user=H.of(ct.createElement("canvas",{class:d+" z-10"})),e.user.margins=i,H.setContext(e.user,{globalAlpha:.06666666666666667}),e.xAxis=H.of(ct.createElement("canvas",{class:d})),H.setContext(e.xAxis,{fillStyle:"#3B4854",textBaseline:"top",textAlign:"center",font:`${ht.axisLabelFontsize}rem serif`}),e.yAxis=H.of(ct.createElement("canvas",{class:d})),H.setContext(e.yAxis,{fillStyle:"#3B4854",textBaseline:"middle",textAlign:"right",font:`${ht.axisLabelFontsize}rem serif`});for(let[m,u]of Object.entries(e))isNaN(parseFloat(m))||(m="data-"+m),u.canvas.id=`frame-${m}`,H.append(u,n)}function ja(t){const{container:n,parameters:e,frames:i}=t,{mousecoords:c}=e;window.addEventListener("resize",()=>a.Plot.resize(t)),window.addEventListener("keydown",r=>{(r.key==="q"||e.active)&&a.Plot.dispatch(t,r.key)}),window.addEventListener("keyup",()=>{e.mode="select",t.queryTable.style.display="none"}),n.addEventListener("mousedown",r=>{r.stopPropagation();const{locked:b}=e;a.Plot.activate(t),a.Plot.setMousedown(t,!0),a.Plot.setMouseButton(t,r.button),r.button===0?a.Plot.setMode(t,"select"):r.button===2&&a.Plot.setMode(t,"pan");const o=r.offsetX,y=n.clientHeight-r.offsetY;Q([o,y,o,y],c),!b&&e.mode==="select"&&(a.Plot.dispatch(t,"clear-transient"),a.Plot.checkSelection(t)),a.Plot.unlock(t)}),n.addEventListener("contextmenu",r=>{r.preventDefault(),a.Plot.setMousedown(t,!0),a.Plot.setMouseButton(t,2),a.Plot.setMode(t,"pan"),e.mousecoords[0]=r.offsetX,e.mousecoords[1]=n.clientHeight-r.offsetY,H.clear(i.user)}),n.addEventListener("mouseup",()=>a.Plot.setMousedown(t,!1)),n.addEventListener("mousemove",be(r=>{a.Plot.mousemoveHandlers[e.mode](t,r)},10));for(const[r,b]of Object.entries(a.Plot.keydownHandlers))a.Plot.listen(t,r,()=>b(t));a.Plot.listen(t,"resize",()=>a.Plot.resize(t)),a.Plot.listen(t,"activate",()=>a.Plot.activate(t)),a.Plot.listen(t,"deactivate",()=>a.Plot.deactivate(t)),a.Plot.listen(t,"render",()=>a.Plot.render(t)),a.Plot.listen(t,"lock",()=>a.Plot.lock(t)),a.Plot.listen(t,"unlock",()=>a.Plot.unlock(t)),a.Plot.listen(t,"set-mode-query",()=>a.Plot.setMode(t,"query")),a.Plot.listen(t,"render-axes",()=>a.Plot.renderAxes(t)),a.Plot.listen(t,"clear-transient",()=>a.Plot.clearUserFrame(t)),a.Plot.listen(t,"set-scale",r=>a.Plot.setScale(t,r)),a.Plot.listen(t,"zoom",r=>a.Plot.zoom(t,r));for(const r of Object.values(t.scales))a.Scale.listen(r,"changed",()=>{a.Plot.render(t),a.Plot.renderAxes(t)})}function qa(t,n){var v,k;const{scales:e,container:i}=t,{clientWidth:c,clientHeight:r}=i,b=a.Expanse[((v=n==null?void 0:n.scales)==null?void 0:v.x)??"continuous"](),o=a.Expanse[((k=n==null?void 0:n.scales)==null?void 0:k.y)??"continuous"]();e.x=a.Scale.of(b,a.Expanse.continuous(0,c)),e.y=a.Scale.of(o,a.Expanse.continuous(0,r)),e.height=a.Scale.of(a.Expanse.continuous(),a.Expanse.continuous(0,r)),e.width=a.Scale.of(a.Expanse.continuous(),a.Expanse.continuous(0,c)),e.area=a.Scale.of(a.Expanse.continuous(),a.Expanse.continuous()),e.size=a.Scale.of(a.Expanse.continuous(),a.Expanse.continuous(0,10));const{x:y,y:d,width:m,height:u,size:h,area:w}=e;y.other=d,d.other=y;const l={default:!0,silent:!0},{expandX:s,expandY:f}=ht;a.Expanse.set(w.domain,S=>S.ratio=!0,l),a.Expanse.set(h.domain,S=>S.ratio=!0,l),a.Expanse.set(w.codomain,S=>(S.trans=he,S.inv=It),l),a.Expanse.set(h.codomain,S=>(S.trans=he,S.inv=It),l),a.Expanse.set(y.domain,S=>(S.zero=s,S.one=1-s),l),a.Expanse.set(d.domain,S=>(S.zero=f,S.one=1-f),l),a.Expanse.set(m.domain,S=>S.one=1-2*s,l),a.Expanse.set(u.domain,S=>S.one=1-2*f,l),a.Expanse.set(w.domain,S=>S.one=1-2*Math.max(s,f),l);const g=S=>Math.max(S,0);a.Expanse.set(m.codomain,S=>S.inv=g,l),a.Expanse.set(u.codomain,S=>S.inv=g,l)}a.Scene=void 0,(t=>{function n(s,f){const g=ct.createElement("div",{id:"scene",class:"relate grid h-full w-full grid-cols-1 grid-rows-1 gap-5 bg-[#deded9] p-5 px-10"}),[v,k]=[1,1],S=rt.of(Object.values(s)[0].length),A=[],E={};for(const[_,j]of Object.entries(s))P.hasName(j)||P.setName(j,_);const z={send:console.log},M=T.of({data:s,container:g,rows:v,cols:k,marker:S,client:z,plots:A,plotsByType:E});if(f!=null&&f.websocketURL){const _=new WebSocket(f.websocketURL),j={sender:"scene",target:"session",type:"connected"};_.addEventListener("open",()=>_.send(JSON.stringify(j))),_.addEventListener("message",L=>{w(M,JSON.parse(L.data))}),window.addEventListener("beforeunload",()=>{_.close()}),M.client=_}return Ha(M),M}t.of=n,t.listen=T.makeListenFn(),t.dispatch=T.makeDispatchFn();function e(s,f){s.appendChild(f.container),t.resize(f)}t.append=e;function i(s,f){const{container:g,marker:v,plots:k,plotsByType:S}=s;a.Plot.listen(f,"activated",()=>{for(const M of k)M!=f&&a.Plot.dispatch(M,"deactivate")}),a.Plot.listen(f,"lock-others",()=>{for(const M of k)M!==f&&a.Plot.dispatch(M,"lock")}),a.Plot.listen(f,"set-selected",M=>{rt.update(v,M.cases)}),a.Plot.listen(f,"clear-transient",()=>{for(const M of k)a.Plot.clearUserFrame(M);rt.clearTransient(v)}),k.push(f);const{type:A}=f;S[A]||(S[A]=[]),S[A].push(f),a.Plot.append(g,f),r(s);const E=Math.ceil(Math.sqrt(k.length)),z=Math.ceil(k.length/E);t.setDimensions(s,z,E)}t.addPlot=i;function c(s,f){const{type:g,variables:v,reducer:k,queries:S}=f??{};if(!g||g==="unknown"||!v)return;for(const M of v)if(!Object.keys(s.data).includes(M))throw new Error(`Variable '${M}' is not present in the data`);const A=ke(v),E=f;if(k&&(E.reducer=a.Reducer.get(k)),S)if(Ge(S))E.queries=ke(S);else{const M=_=>S.map(([j,L])=>[_[j],a.Reducer.get(L)]);E.queries=M}const z=a.Plot[g](s,A,E);t.addPlot(s,z)}t.addPlotBySpec=c;function r(s){for(let f=0;f<s.plots.length;f++)s.plots[f].container.id=`plot${f+1}`}function b(s){const f=s.plots.pop();f&&y(s,f)}t.popPlot=b;function o(s,f){const g=h(s,f);g&&y(s,g)}t.removePlot=o;function y(s,f){Lt(s.plots,f),Lt(s.plotsByType[f.type],f),s.container.removeChild(f.container),T.removeAllListeners(f),r(s)}function d(s,f,g){const{container:v}=s;s.rows=f,s.cols=g,v.style.gridTemplateRows=Array(f).fill("1fr").join(" "),v.style.gridTemplateColumns=Array(g).fill("1fr").join(" "),t.resize(s)}t.setDimensions=d;function m(s){for(const f of s.plots)a.Plot.dispatch(f,"resize")}t.resize=m;function u(s,f){return f==="scene"?s:h(s,f)}t.getTarget=u;function h(s,f){const{plots:g,plotsByType:v}=s;let[k,S]=tn(f);const A=parseInt(S,10)-1;if(k==="plot")return g[A];if(k=k.replace("plot","").replace("gram",""),k in v)return v[k][A]}t.getPlot=h;function w(s,f){const{client:g}=s;if(!g)return;const{type:v,target:k,data:S}=f,A=u(s,k);A&&T.dispatch(A,v,S)}t.handleMessage=w;function l(s,f,g){const[v,k]=["scene","session"],S=JSON.stringify({sender:v,target:k,type:f,data:g});s.client.send(S)}t.sendMessage=l})(a.Scene||(a.Scene={}));function Ha(t){const{marker:n,plots:e,container:i}=t;i.addEventListener("mousedown",()=>{for(const c of e)a.Plot.dispatch(c,"deactivate")}),i.addEventListener("dblclick",()=>{for(const c of e)a.Plot.dispatch(c,"deactivate"),H.clear(c.frames.user);rt.clearAll(t.marker)}),window.addEventListener("keydown",c=>{var r;return(r=_e[c.code])==null?void 0:r.call(_e,t)}),window.addEventListener("keyup",()=>rt.setGroup(n,Me)),a.Scene.listen(t,"resize",()=>a.Scene.resize(t)),rt.listen(n,"cleared",()=>{for(const c of e)a.Plot.dispatch(c,"unlock")}),a.Scene.listen(t,"connected",()=>{var c;return console.log(`Connected to Websocket server on: ${(c=t.client)==null?void 0:c.url}`)}),a.Scene.listen(t,"set-dims",c=>{a.Scene.setDimensions(t,c.rows,c.cols)}),a.Scene.listen(t,"add-plot",c=>a.Scene.addPlotBySpec(t,c)),a.Scene.listen(t,"pop-plot",()=>a.Scene.popPlot(t)),a.Scene.listen(t,"remove-plot",c=>{a.Scene.removePlot(t,c.id)}),a.Scene.listen(t,"set-selected",c=>rt.update(n,c.cases)),a.Scene.listen(t,"set-assigned",c=>{const r=7-Math.min(c.group,3);rt.update(n,c.cases,{group:r})}),a.Scene.listen(t,"get-selected",()=>{const c=Se(n.indices,rt.isTransient);a.Scene.sendMessage(t,"get-selected",{cases:c})}),a.Scene.listen(t,"get-assigned",c=>{const r=o=>(o|4)===7-Math.min(c.group,3),b=Se(n.indices,r);a.Scene.sendMessage(t,"get-assigned",{cases:b,group:c.group})})}const _e={Digit1:t=>rt.setGroup(t.marker,ie.First),Digit2:t=>rt.setGroup(t.marker,ie.Second),Digit3:t=>rt.setGroup(t.marker,ie.Third)};return a.POSITIONS=gt,a.addIndexed=ca,a.addTailwind=We,a.applyDirection=Ct,a.applyWith=ba,a.binBreaks=$e,a.call=Vn,a.capitalize=Ie,a.clearNodeChildren=nn,a.compareAlphaNumeric=xt,a.convertToSuperscript=Je,a.copyProps=ge,a.copyValues=Q,a.cumsum=Et,a.dec=Yn,a.diff=mt,a.exp10=Kn,a.exponentialToSuperscript=Ke,a.fetchJSON=oa,a.filterIndices=Se,a.findLength=st,a.formatAxisLabels=we,a.formatLabel=Qe,a.formatText=la,a.getMargins=Be,a.identity=Kt,a.inc=Xn,a.invertRange=Jt,a.isArray=nt,a.isIntegerString=Ze,a.isNumber=ga,a.isNumberArray=ve,a.isPrimitive=ma,a.isStringArray=Ge,a.just=de,a.keysToSelectors=ke,a.last=Tt,a.log10=Qn,a.makeGetter=Rt,a.max=Ot,a.merge=qe,a.minDecimal=Ve,a.minmax=At,a.one=kt,a.orderBy=ra,a.orderIndices=Oe,a.orderIndicesByTable=je,a.ordered=pt,a.pointInRect=Zt,a.prettyBreaks=He,a.prod=Zn,a.randomInteger=me,a.rangeInverse=Nt,a.rectSegmentIntersect=ye,a.rectsIntersect=Gt,a.remove=Lt,a.removeTailwind=Ue,a.rep=na,a.round=jt,a.row=ya,a.segmentsIntersect=qt,a.selector=wa,a.seq=aa,a.splitNumericSuffix=tn,a.sqrt=It,a.square=he,a.stringArraysMatch=en,a.stripWS=ea,a.subset=St,a.sum=Jn,a.throttle=be,a.timeExecution=sa,a.toLowerCase=Gn,a.toUpperCase=ta,a.trunc=Mt,a.uniqueIntegers=ia,a.zero=wt,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a}({});
