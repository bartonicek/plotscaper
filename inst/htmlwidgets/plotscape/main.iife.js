var plotscape=function(exports){"use strict";var __vite_style__=document.createElement("style");__vite_style__.textContent=`*:where(.tailwind,.tailwind *),:before:where(.tailwind,.tailwind *),:after:where(.tailwind,.tailwind *){box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before:where(.tailwind,.tailwind *),:after:where(.tailwind,.tailwind *){--tw-content: ""}.tailwind{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}.tailwind{margin:0;line-height:inherit}hr:where(.tailwind,.tailwind *){height:0;color:inherit;border-top-width:1px}abbr:where([title]):where(.tailwind,.tailwind *){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1:where(.tailwind,.tailwind *),h2:where(.tailwind,.tailwind *),h3:where(.tailwind,.tailwind *),h4:where(.tailwind,.tailwind *),h5:where(.tailwind,.tailwind *),h6:where(.tailwind,.tailwind *){font-size:inherit;font-weight:inherit}a:where(.tailwind,.tailwind *){color:inherit;text-decoration:inherit}b:where(.tailwind,.tailwind *),strong:where(.tailwind,.tailwind *){font-weight:bolder}code:where(.tailwind,.tailwind *),kbd:where(.tailwind,.tailwind *),samp:where(.tailwind,.tailwind *),pre:where(.tailwind,.tailwind *){font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small:where(.tailwind,.tailwind *){font-size:80%}sub:where(.tailwind,.tailwind *),sup:where(.tailwind,.tailwind *){font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub:where(.tailwind,.tailwind *){bottom:-.25em}sup:where(.tailwind,.tailwind *){top:-.5em}table:where(.tailwind,.tailwind *){text-indent:0;border-color:inherit;border-collapse:collapse}button:where(.tailwind,.tailwind *),input:where(.tailwind,.tailwind *),optgroup:where(.tailwind,.tailwind *),select:where(.tailwind,.tailwind *),textarea:where(.tailwind,.tailwind *){font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button:where(.tailwind,.tailwind *),select:where(.tailwind,.tailwind *){text-transform:none}button:where(.tailwind,.tailwind *),input:where([type=button]):where(.tailwind,.tailwind *),input:where([type=reset]):where(.tailwind,.tailwind *),input:where([type=submit]):where(.tailwind,.tailwind *){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring:where(.tailwind,.tailwind *){outline:auto}:-moz-ui-invalid:where(.tailwind,.tailwind *){box-shadow:none}progress:where(.tailwind,.tailwind *){vertical-align:baseline}::-webkit-inner-spin-button:where(.tailwind,.tailwind *),::-webkit-outer-spin-button:where(.tailwind,.tailwind *){height:auto}[type=search]:where(.tailwind,.tailwind *){-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration:where(.tailwind,.tailwind *){-webkit-appearance:none}::-webkit-file-upload-button:where(.tailwind,.tailwind *){-webkit-appearance:button;font:inherit}summary:where(.tailwind,.tailwind *){display:list-item}blockquote:where(.tailwind,.tailwind *),dl:where(.tailwind,.tailwind *),dd:where(.tailwind,.tailwind *),h1:where(.tailwind,.tailwind *),h2:where(.tailwind,.tailwind *),h3:where(.tailwind,.tailwind *),h4:where(.tailwind,.tailwind *),h5:where(.tailwind,.tailwind *),h6:where(.tailwind,.tailwind *),hr:where(.tailwind,.tailwind *),figure:where(.tailwind,.tailwind *),p:where(.tailwind,.tailwind *),pre:where(.tailwind,.tailwind *){margin:0}fieldset:where(.tailwind,.tailwind *){margin:0;padding:0}legend:where(.tailwind,.tailwind *){padding:0}ol:where(.tailwind,.tailwind *),ul:where(.tailwind,.tailwind *),menu:where(.tailwind,.tailwind *){list-style:none;margin:0;padding:0}dialog:where(.tailwind,.tailwind *){padding:0}textarea:where(.tailwind,.tailwind *){resize:vertical}input::-moz-placeholder:where(.tailwind,.tailwind *),textarea::-moz-placeholder:where(.tailwind,.tailwind *){opacity:1;color:#9ca3af}input::placeholder:where(.tailwind,.tailwind *),textarea::placeholder:where(.tailwind,.tailwind *){opacity:1;color:#9ca3af}button:where(.tailwind,.tailwind *),[role=button]:where(.tailwind,.tailwind *){cursor:pointer}:disabled:where(.tailwind,.tailwind *){cursor:default}img:where(.tailwind,.tailwind *),svg:where(.tailwind,.tailwind *),video:where(.tailwind,.tailwind *),canvas:where(.tailwind,.tailwind *),audio:where(.tailwind,.tailwind *),iframe:where(.tailwind,.tailwind *),embed:where(.tailwind,.tailwind *),object:where(.tailwind,.tailwind *){display:block;vertical-align:middle}img:where(.tailwind,.tailwind *),video:where(.tailwind,.tailwind *){max-width:100%;height:auto}[hidden]:where(.tailwind,.tailwind *){display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.tw-absolute{position:absolute}.tw-relative{position:relative}.tw-left-0{left:0}.tw-right-0{right:0}.tw-top-0{top:0}.tw-z-10{z-index:10}.tw-z-30{z-index:30}.tw-z-50{z-index:50}.tw-m-1{margin:.25rem}.tw-flex{display:flex}.tw-grid{display:grid}.tw-size-full{width:100%;height:100%}.tw-h-5\\/6{height:83.333333%}.tw-h-fit{height:-moz-fit-content;height:fit-content}.tw-h-full{height:100%}.tw-h-screen{height:100vh}.tw-w-5\\/6{width:83.333333%}.tw-w-8{width:2rem}.tw-w-fit{width:-moz-fit-content;width:fit-content}.tw-w-full{width:100%}.tw-select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.tw-grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.tw-grid-rows-1{grid-template-rows:repeat(1,minmax(0,1fr))}.tw-flex-row{flex-direction:row}.tw-flex-col{flex-direction:column}.tw-flex-wrap{flex-wrap:wrap}.tw-content-center{align-content:center}.tw-items-center{align-items:center}.tw-justify-start{justify-content:flex-start}.tw-justify-center{justify-content:center}.tw-gap-\\[1em\\]{gap:1em}.tw-rounded-md{border-radius:.375rem}.tw-rounded-bl-md{border-bottom-left-radius:.375rem}.tw-border{border-width:1px}.tw-border-l-1{border-left-width:1px}.tw-border-r-1{border-right-width:1px}.\\!tw-border-black{--tw-border-opacity: 1 !important;border-color:rgb(0 0 0 / var(--tw-border-opacity))!important}.tw-border-b-black{--tw-border-opacity: 1;border-bottom-color:rgb(0 0 0 / var(--tw-border-opacity))}.tw-border-l-black{--tw-border-opacity: 1;border-left-color:rgb(0 0 0 / var(--tw-border-opacity))}.tw-bg-\\[\\#deded9\\]{--tw-bg-opacity: 1;background-color:rgb(222 222 217 / var(--tw-bg-opacity))}.tw-bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.tw-bg-gray-300{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity))}.tw-bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.tw-bg-slate-200{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity))}.tw-bg-slate-800{--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity))}.tw-bg-opacity-80{--tw-bg-opacity: .8}.tw-p-1{padding:.25rem}.tw-p-10{padding:2.5rem}.tw-px-2{padding-left:.5rem;padding-right:.5rem}.tw-px-3{padding-left:.75rem;padding-right:.75rem}.tw-py-1{padding-top:.25rem;padding-bottom:.25rem}.tw-py-10{padding-top:2.5rem;padding-bottom:2.5rem}.tw-text-center{text-align:center}.tw-font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.tw-text-sm{font-size:.875rem;line-height:1.25rem}.tw-text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.tw-text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.tw-shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.tw-outline-none{outline:2px solid transparent;outline-offset:2px}.tw-outline{outline-style:solid}.tw-outline-2{outline-width:2px}.tw-outline-slate-600{outline-color:#475569}.tw-drop-shadow-md{--tw-drop-shadow: drop-shadow(0 4px 3px rgb(0 0 0 / .07)) drop-shadow(0 2px 2px rgb(0 0 0 / .06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:tw-bg-gray-400:hover{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.hover\\:tw-bg-gray-500:hover{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity))}.hover\\:tw-bg-slate-200:hover{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity))}
`,document.head.appendChild(__vite_style__);var DOM;(e=>{function t(s,a){const f=document.createElement(s);return a!=null&&a.id&&(f.id=a.id),a!=null&&a.classes&&u(f,a.classes),a!=null&&a.textContent&&(f.textContent=a.textContent),f}e.element=t;function r(s,a){s.appendChild(a)}e.append=r;function o(s,a){return s.querySelector(a)}e.select=o;function l(s,a){for(const[f,p]of Object.entries(a))s.style[f]=p}e.setStyles=l;function u(s,a){if(a.length)for(const f of a)s.classList.add(f)}e.addClasses=u;function d(s,a){for(const f of a)s.classList.remove(f)}e.removeClasses=d;function n(s){s.innerHTML=""}e.clearChildren=n})(DOM||(DOM={}));const METADATA=Symbol("metadata");var Metadata;(e=>{function t(s){return s[METADATA]={},s}e.of=t;function r(s){return(isObject(s)||isFunction(s))&&!!s[METADATA]}e.hasMetadata=r;function o(s,a){var f;return r(s)&&!!((f=s[METADATA])!=null&&f[a])}e.has=o;function l(s,a){return Array.isArray(a)?a.map(f=>u(s,f)):u(s,a)}e.get=l;function u(s,a){var f;return a==="length"&&Array.isArray(s)?s.length:(f=s[METADATA])==null?void 0:f[a]}function d(s,a){r(s)||(s[METADATA]={});for(const[f,p]of Object.entries(a))s[METADATA][f]=p}e.set=d;function n(s,a,f){if(!r(s))return;r(a)||(a[METADATA]={});const p=f??Object.keys(s[METADATA]);for(const c of p){let i=l(s,c);isSerializable(i)&&(i=structuredClone(i)),a[METADATA][c]=i}}e.copy=n})(Metadata||(Metadata={}));var Getter;(e=>{function t(n){if(typeof n=="function")return n;if(Array.isArray(n)||isTypedArray(n)){const s=a=>n[a];return Metadata.set(s,{length:n.length}),s}return()=>n}e.of=t;function r(n){return()=>n}e.constant=r;function o(n,s){const a=e.of(n),f=p=>a(s[p]);return isObject(n)&&Metadata.copy(n,f),Metadata.set(f,{length:s.length}),f}e.proxy=o;function l(n){const s=n.map(e.of),a=f=>s.map(p=>p(f));return Metadata.copy(n[0],a,["length"]),a}e.multi=l;function u(n){const s={};for(const a of Reflect.ownKeys(n))s[a]=e.of(n[a]);return s}e.mapObject=u;function d(n,s){const a=e.of(s),f=Array(n);for(let p=0;p<n;p++)f[p]=a(p);return f}e.array=d})(Getter||(Getter={}));function identity(e){return e}const just=e=>()=>e,zero=just(0),one=just(1);function inc(e){return e+1}function dec(e){return e-1}function call(e){return e()}function bimap(e,t,r){if(e.length!==t.length)throw new Error("Arrays must be of the same length");const o=Array(e.length);for(let l=0;l<e.length;l++)o[l]=r(e[l],t[l]);return o}function square(e){return e**2}const sqrt=Math.sqrt,log10=Math.log10;function exp10(e){return 10**e}const max=Math.max;function diff(e,t){return e-t}function sum(e,t){return e+t}function prod(e,t){return e*t}function trunc(e,t=0,r=1){return Math.min(Math.max(e,t),r)}function rangeInverse(e,t){return 1/(t-e)}function invertRange(e,t){const r=rangeInverse(e,t);return[-e*r,r-e*r]}function round(e,t=0){return Math.round(e*10**t)/10**t}function compareAlphaNumeric(e,t){return e.localeCompare(t,"en",{numeric:!0})}function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function toLowerCase(e){return e.toLocaleLowerCase()}function toUpperCase(e){return e.toLocaleUpperCase()}function stripWS(e){return e.replace(/\s/g,"")}function last(e){return e[e.length-1]}function rep(e,t){return Array(t).fill(e)}function seq(e,t,r){const o=Math.abs(t-e);r=r??Math.ceil(o)+1;const l=o/(r-1),u=t>=e?1:-1;return Array.from(Array(r),(d,n)=>e+u*l*n)}function seqLength(e,t){return Array.from(Array(t),(r,o)=>e+o)}function subset(e,t){const r=Array(t.length);for(let o=0;o<t.length;o++)r[o]=e[t[o]];return r}function remove(e,t){const r=e.indexOf(t);r!==-1&&e.splice(r,1)}function ordered(e,t){const r=Array(t.length);for(let o=0;o<t.length;o++)r[t[o]]=e[o];return r}function orderIndices(e){const t=e.toSorted(diff),r={},o={};for(let l=0;l<t.length;l++){const u=e[l];o[u]=o[u]+1||0,r[l]=t.indexOf(u)+o[u]}return Object.values(r)}function orderBy(e,t){const r=Array(e.length);for(let o=0;o<e.length;o++)r[o]=e[t[o]];for(let o=0;o<e.length;o++)e[o]=r[o]}function orderIndicesByTable(e,t){const r=Array(e.length);for(let o=0;o<e.length;o++)r[o]=t.indexOf(e[o]);return r}function minmax(e){let[t,r]=[1/0,-1/0];for(let o=0;o<e.length;o++)t=Math.min(t,e[o]),r=Math.max(r,e[o]);return[t,r]}function cumsum(e){const t=Array(e.length);t[0]=e[0];for(let r=1;r<e.length;r++)t[r]=e[r]+t[r-1];return t}function randomInteger(e,t){return Math.floor(e+Math.random()*t)}function uniqueIntegers(e,t,r=t-e){const o=t-e,l=[],u=new Set;for(;l.length<Math.min(r,o);){let d=randomInteger(e,t);for(;u.has(d);)d=randomInteger(e,t);l.push(d),u.add(d)}return l}async function fetchJSON(e){return await(await fetch(e)).json()}function merge(e,t){return{...e,...t}}function copyValues(e,t){if(e!==t){if(isTypedArray(e)&&isTypedArray(t))t.set(e);else if(Array.isArray(e)&&Array.isArray(t)){t.length=e.length;for(let r=0;r<e.length;r++)t[r]=e[r]}}}function copyProps(e,t){for(const[r,o]of Object.entries(e))Array.isArray(o)&&Array.isArray(e[r])?copyValues(o,e[r]):t[r]=o}function applyDirection(e,t){return .5*(1-t)+t*e}function prettyBreaks(e,t,r=4){const o=(t-e)/r,l=Math.floor(Math.log10(o)),u=[1,2,4,5,10];let[d,n]=[1/0,0];for(let i=0;i<u.length;i++){const h=(u[i]*10**l-o)**2;h<d&&([d,n]=[h,u[i]])}const s=10**l*n,a=Math.ceil(e/s)*s,f=Math.floor(t/s)*s,p=Math.round((f-a)/s),c=[];for(let i=0;i<p+1;i++){const h=a+i*s;c.push(h)}return c}function binBreaks(e,t){let{width:r,anchor:o,nBins:l}=t||{};const[u,d]=minmax(e),n=d-u;l=l??(r?Math.ceil(n/r)+1:10),r=r??n/(l-1),o=o??u;const s=u-r+(o-u)%r,a=d+r-(d-o)%r,f=Array(l+2);f[0]=s,f[f.length-1]=a;for(let p=1;p<f.length-1;p++)f[p]=s+p*r;return f}function tw(e){return e===""?[]:e.trim().split(/\s+/)}function addTailwind(e,t){for(const r of t.trim().split(/\s+/))e.classList.add(r)}function removeTailwind(e,t){for(const r of t.trim().split(/\s+/))e.classList.remove(r)}function throttle(e,t){let r=0;return function(...o){const l=new Date().getTime();l-r<t||(r=l,e(...o))}}function timeExecution(e){const t=performance.now();return e(),performance.now()-t}function segmentToPointVec(e){const[t,r,o,l]=e;return[t,r,o-t,l-r]}function inRange(e,t,r){return!(e<t)&&!(e>r)}function segmentsIntersect(e,t){let[r,o,l,u]=segmentToPointVec(e),[d,n,s,a]=segmentToPointVec(t);const f=s*u-l*a,p=((r-d)*u-(o-n)*l)/f,c=-(-(r-d)*a+(o-n)*s)/f;return inRange(p,0,1)&&inRange(c,0,1)}function rectSegmentIntersect(e,t){const[r,o,l,u]=e;return segmentsIntersect([r,o,l,o],t)||segmentsIntersect([r,o,r,u],t)||segmentsIntersect([l,o,l,u],t)||segmentsIntersect([r,u,l,u],t)}function pointInRect(e,t){const[r,o]=e;let[l,u,d,n]=t;return[l,d]=[l,d].sort(diff),[u,n]=[u,n].sort(diff),!(r<l||r>d||o<u||o>n)}function rectsIntersect(e,t){const[r,o]=[e[0],e[2]].sort(diff),[l,u]=[e[1],e[3]].sort(diff),[d,n]=[t[0],t[2]].sort(diff),[s,a]=[t[1],t[3]].sort(diff);return!(o<d||r>n||u<s||l>a)}function addIndexed(e,t,r){const l=Object.keys(e).filter(n=>n.replace(/[0-9]*$/,"")===t);if(l.length===0){e[`${t}1`]=r;return}const u=l.map(n=>parseInt(n.match(/[0-9]*$/)[0],10)),d=Math.max(...u);e[`${t}${d+1}`]=r}function minDecimal(e){let t=1/0;for(let r=0;r<e.length;r++)e[r]!==0&&(t=Math.min(t,Math.log10(Math.abs(e[r]))));return t>3?0:Math.floor(Math.abs(t))+2}function formatText(e,t={lowercase:!0,capitalize:!0,split:!0}){return t!=null&&t.split&&(e=e.replace(/_/g," ")),t!=null&&t.lowercase&&(e=e.toLocaleLowerCase()),t!=null&&t.capitalize&&(e=capitalize(e)),e}function formatLabel(e){if(typeof e=="string")return e;if(e===0)return e.toString();const t=Math.floor(Math.log10(Math.abs(e)));return t>=3?round(e).toString():t<=-3?round(e,-t+1).toString():round(e,2).toString()}function formatAxisLabels(e,t){if(!isNumberArray(e))return e;const r=(t==null?void 0:t.tens)??4,o=n=>n!=0&&Math.abs(Math.log10(n))>r,l=(t==null?void 0:t.decimals)??minDecimal(e);e=e.map(n=>round(n,l));const d=minmax(e).some(o)?superscriptFn:noSuperscriptFn;return e.map(d)}function superscriptFn(e){return e===0?"0":exponentialToSuperscript(e.toExponential())}function noSuperscriptFn(e){return e===0?"0":parseFloat(e.toPrecision(12)).toString()}function exponentialToSuperscript(e){let[t,r]=e.split("e");return r=convertToSuperscript(r),t+"×10"+r}const sups={"-":"⁻","+":"",0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹"};function convertToSuperscript(e){return e.split("").map(t=>sups[t]).join("")}function isDefined(e){return e!=null}const primitives=["string","number","boolean","undefined"];function isPrimitive(e){return e===null||primitives.includes(typeof e)}function isFunction(e){return typeof e=="function"}function isSerializable(e){if(isPrimitive(e)||e===null||e===void 0)return!0;if(isFunction(e))return!1;const t=Object.values(e);for(const r of t)if(!isSerializable(r))return!1;return!0}function isObject(e){return typeof e=="object"&&e!==null}function isTypedArray(e){return ArrayBuffer.isView(e)}function isString(e){return typeof e=="string"}function isNumber(e){return typeof e=="number"}function isIntegerString(e){return/^[0-9]+/.test(e)}function isNumberArray(e){return Array.isArray(e)&&isNumber(e[0])&&isNumber(last(e))}function isStringArray(e){return typeof Array.isArray(e)&&isString(e[0])&&isString(last(e))}function isEventTarget(e){return"addEventListener"in e}function areNumberArrays(e){return Array.isArray(e)&&e.every(isNumberArray)}function applyWith(...e){return function(t){return t(...e)}}function row(e,t){const r={};for(const[o,l]of Object.entries(e))r[o]=Getter.of(l)(t);return r}function selector(e){return function(t){return t[e]}}function keysToSelectors(e){return function(t){return e.map(r=>t[r])}}function splitNumericSuffix(e){let t=e.length-1;for(;t>0&&/[0-9]/.test(e[t]);)t--;return t+=1,[e.substring(0,t),e.substring(t,e.length)]}function filterIndices(e,t){const r=[];for(let o=0;o<e.length;o++)t(e[o])&&r.push(o);return r}function stringArraysMatch(e,t){if(e.length!==t.length)return!1;const r=e.toSorted(compareAlphaNumeric).join(""),o=t.toSorted(compareAlphaNumeric).join("");return r===o}function stringifyFunction(e){return""+e}function deepModifyProp(e,t,r,o={}){t in e&&(o[t]=r(e[t]));for(const l of Object.values(e))isObject(l)&&deepModifyProp(l,t,r,o)}function swap(e,t,r){const o=e[t];e[t]=e[r],e[r]=o}function cycles(e){const t=[],r=Array(e.length).fill(!1);let[o,l]=[0,0];for(;o<e.length;){let[u,d]=[l,e[l]];if(r[u]=!0,u===d){t.push([d]),l=r.indexOf(!1),o++;continue}r[d]=!0;const n=[u,d];for(o+=2,u=d,d=e[d];d!==l;)n.push(d),r[d]=!0,u=d,d=e[d],o++;t.push(n),l=r.indexOf(!1)}return t}function permuteWithCycles(e,t){for(const r of t)for(let o=1;o<r.length;o++)swap(e,r[o-1],r[o])}const VAnchor={Top:1,Middle:1/2,Bottom:0},HAnchor={Left:1,Center:1/2,Right:0},MouseButton={Left:0,Right:2},dataLayers=[0,1,2,3,4,5,6,7],baseLayers=[4,5,6,7];exports.CanvasFrame=void 0,(e=>{function t(v){const S=DOM.element("canvas"),z=S.getContext("2d"),{classes:C="",style:D={}}=v;DOM.addClasses(S,tw(C??"")),DOM.setStyles(S,D);const{clientWidth:I,clientHeight:A,clientLeft:w,clientTop:b}=S,O=I-w,_=A-b,E=2,{margins:T=[0,0,0,0],context:F={}}=v;return{canvas:S,context:z,width:O,height:_,margins:T,scalingFactor:E,contextProps:F}}e.of=t;function r(v,S){S.appendChild(v.canvas),e.resize(v)}e.append=r;function o(v,S){for(const[z,C]of Object.entries(S))v.contextProps[z]=C,v.context[z]=C}e.setContext=o;function l(v){const{context:S,canvas:z,scalingFactor:C}=v,{clientWidth:D,clientHeight:I,clientLeft:A,clientTop:w}=z,b=D-A,O=I-w;v.width=b,v.height=O,v.canvas.width=b*C,v.canvas.height=O*C;for(const[_,E]of Object.entries(v.contextProps))v.context[_]=E;S.scale(C,C),e.clip(v)}e.resize=l;function u(v){const{context:S}=v;let{width:z,height:C}=v;const[D,I,A,w]=v.margins;z=Math.max(z-I-w,0),C=Math.max(C-A-D,0),S.beginPath(),S.rect(I,A,z,C),S.clip()}e.clip=u;function d(v){v.context.clearRect(0,0,v.width,v.height)}e.clear=d;function n(v,S){v.context.globalAlpha=S(v.context.globalAlpha)}e.setAlpha=n;function s(v){v.context.globalAlpha=1}e.resetAlpha=s;function a(v,S){return v.context.measureText(S).width}e.textWidth=a;function f(v,S){const z=v.context.measureText(S);return z.actualBoundingBoxAscent+z.actualBoundingBoxDescent}e.textHeight=f;function p(v,S,z,C,D){const{context:I}=v,A=v.canvas.clientHeight,w=(D==null?void 0:D.hAnchor)??HAnchor.Center,b=(D==null?void 0:D.vAnchor)??VAnchor.Middle;S=S+2*(w-.5)*C,z=A-z+2*(.5-b)*C,I.beginPath(),I.arc(S,z,C,0,Math.PI*2),I.fill()}e.point=p;function c(v,S,z,C,D){for(let I=0;I<S.length;I++)p(v[I],S[I],z[I],C[I],D)}e.points=c;function i(v,S,z,C,D,I){const{context:A,height:w}=v,b=C-S,O=D-z;S=S+(1-I)/2*b,C=C-(1-I)/2*b,z=z+(1-I)/2*O,D=D-(1-I)/2*O,A.fillRect(S,w-z,C-S,z-D)}e.rectangleXY=i;function h(v,S,z,C,D,I){for(let A=0;A<S.length;A++)i(v[A],S[A],z[A],C[A],D[A],I[A])}e.rectanglesXY=h;function g(v,S,z,C,D,I){const{context:A,height:w}=v,b=(I==null?void 0:I.hAnchor)??HAnchor.Center,O=(I==null?void 0:I.vAnchor)??VAnchor.Middle;S=S-b*C,z=w-z+O*D,A.fillRect(S,z,C,-D)}e.rectangleWH=g;function x(v,S,z,C,D,I){for(let A=0;A<S.length;A++)g(v[A],S[A],z[A],C[A],D[A],I)}e.rectanglesWH=x;function m(v,S,z){const{context:C,height:D}=v;C.beginPath(),C.moveTo(S[0],D-z[0]);for(let I=0;I<S.length;I++)C.lineTo(S[I],D-z[I]);C.stroke()}e.line=m;function M(v,S,z){for(let C=0;C<S.length;C++)m(v[C],S[C],z[C])}e.lines=M;function y(v,S,z,C,D){const{context:I,height:A}=v;I.save(),I.translate(S,A-z),D!=null&&D.vertical&&I.rotate(-Math.PI/2),I.fillText(C,0,0),I.translate(-S,-(A-z)),I.restore()}e.text=y})(exports.CanvasFrame||(exports.CanvasFrame={}));function isCanvas(e){return e.nodeName==="CANVAS"}const METHODS=Symbol("methods");exports.Polymorphic=void 0,(e=>{function t(u,d){const n=function(...s){const a=d?d(s):s[0].type;return r(n,u,a)(...s)};return n[METHODS]={},n}e.of=t;function r(u,d,n){return u[METHODS][n]??d}e.dispatch=r;function o(u,d,n){u[METHODS][d]=n}e.set=o;function l(u,d,n){return new Error(`Method '${u}' not implemented for ${d} of type ${n}`)}e.error=l})(exports.Polymorphic||(exports.Polymorphic={})),exports.Renderer=void 0,(e=>{e.render=exports.Polymorphic.of(t),e.clear=exports.Polymorphic.of(r),e.resize=exports.Polymorphic.of(o),e.append=exports.Polymorphic.of(l),e.setAlpha=exports.Polymorphic.of(u),e.resetAlpha=exports.Polymorphic.of(d);function t(n,s){throw exports.Polymorphic.error("render","renderer",n.type)}e.renderDefault=t;function r(n){throw exports.Polymorphic.error("clear","renderer",n.type)}e.clearDefault=r;function o(n){throw exports.Polymorphic.error("resize","renderer",n.type)}e.resizeDefault=o;function l(n,s){throw exports.Polymorphic.error("append","renderer",n.type)}e.appendDefault=l;function u(n,s){throw exports.Polymorphic.error("setAlpha","renderer",n.type)}e.setAlphaDefault=u;function d(n){throw exports.Polymorphic.error("resetAlpha","renderer",n.type)}e.resetAlphaDefault=d})(exports.Renderer||(exports.Renderer={})),exports.CanvasRenderer=void 0,(e=>{const t="canvas";function r(i){const h={};for(const[g,x]of Object.entries(i))h[g]=exports.CanvasFrame.of(x),h[g].canvas.id=`frame-${g}`;return{type:t,frames:h}}e.of=r,exports.Polymorphic.set(exports.Renderer.append,t,o),exports.Polymorphic.set(exports.Renderer.render,t,s),exports.Polymorphic.set(exports.Renderer.clear,t,n),exports.Polymorphic.set(exports.Renderer.resize,t,l),exports.Polymorphic.set(exports.Renderer.setAlpha,t,u),exports.Polymorphic.set(exports.Renderer.resetAlpha,t,d);function o(i,h){for(const g of Object.values(i.frames))h.appendChild(g.canvas)}e.append=o;function l(i,h){h=h??Object.keys(i.frames);for(const g of h)exports.CanvasFrame.resize(i.frames[g])}e.resize=l;function u(i,h,g){g=g??Object.keys(i.frames);for(const x of g)exports.CanvasFrame.setAlpha(i.frames[x],h)}e.setAlpha=u;function d(i,h){h=h??Object.keys(i.frames);for(const g of h)exports.CanvasFrame.resetAlpha(i.frames[g])}e.resetAlpha=d;function n(i,h){h=h??Object.keys(i.frames);for(const g of h)exports.CanvasFrame.clear(i.frames[g])}e.clear=n;function s(i,h){switch(h.primitive){case"points":{const{layer:x,x:m,y:M,radius:y,options:v}=h;a(i,x,m,M,y,v);break}case"rectanglesXY":{const{layer:x,x0:m,y0:M,x1:y,y1:v,area:S}=h;f(i,x,m,M,y,v,S);break}case"rectanglesWH":{const{layer:x,x:m,y:M,w:y,h:v}=h;p(i,x,m,M,y,v);break}case"lines":{const{layer:x,x:m,y:M}=h;c(i,x,m,M);break}}}e.render=s;function a(i,h,g,x,m,M){const{frames:y}=i;for(let v=0;v<h.length;v++){const S=y[h[v]];exports.CanvasFrame.point(S,g[v],x[v],m[v],M)}}e.points=a;function f(i,h,g,x,m,M,y){const{frames:v}=i;for(let S=0;S<h.length;S++){const z=v[h[S]];exports.CanvasFrame.rectangleXY(z,g[S],x[S],m[S],M[S],y[S])}}e.rectanglesXY=f;function p(i,h,g,x,m,M,y){const{frames:v}=i;for(let S=0;S<h.length;S++){const z=v[h[S]];exports.CanvasFrame.rectangleWH(z,g[S],x[S],m[S],M[S],y)}}e.rectanglesWH=p;function c(i,h,g,x){const{frames:m}=i;for(let M=0;M<h.length;M++){const y=m[h[M]];exports.CanvasFrame.line(y,g[M],x[M])}}e.lines=c})(exports.CanvasRenderer||(exports.CanvasRenderer={}));const LISTENERS=Symbol("listeners");var Reactive;(e=>{function t(){return function(p){if(Array.isArray(p)){const c=[...p];return c[LISTENERS]={},c}return{...p,[LISTENERS]:{}}}}e.of=t;function r(p){return(p==null?void 0:p[LISTENERS])!==void 0}e.isReactive=r;function o(p,c,i,h){if(!e.isReactive(p))return;h!=null&&h.throttle&&(i=throttle(i,h.throttle));const g=(h==null?void 0:h.priority)??1,x=p[LISTENERS],m={priority:g,callback:i};x[c]||(x[c]=[]),x[c].includes(m)||x[c].push(m),x[c].sort((M,y)=>M.priority-y.priority)}e.listen=o;function l(p,c,i,h){if(!p.every(r))return;h!=null&&h.throttle&&(i=throttle(i,h.throttle));const g=[];function x(){g.push(!0),g.length===p.length&&(i(),g.length=0)}for(const m of p)e.listen(m,c,x,{priority:2})}e.listenAll=l;function u(p,c,i){if(!r(p))return;const h=p[LISTENERS][c];if(h)for(const{callback:g}of h)g(i)}e.dispatch=u;function d(p,c,i,h,g){if(!r(p)||!r(c))return;o(p,i,()=>u(c,h??i),g)}e.propagate=d;function n(p,c){r(p)&&(Object.assign(p,c(p)),u(p,"changed"))}e.set=n;function s(p,c,i){if(!r(p))return;const h=p[LISTENERS][c]??[];for(let g=0;g<h.length;g++)h[g].callback===i&&h.splice(g,1)}e.remove=s;function a(p,c){r(p)&&p[LISTENERS][c]&&(p[LISTENERS][c].length=0)}e.removeAll=a;function f(p){if(!r(p))return;const c=p[LISTENERS];if(c)for(const i of Object.values(c))i.length=0}e.removeAllListeners=f})(Reactive||(Reactive={})),exports.Expanse=void 0,(e=>{e.normalize=exports.Polymorphic.of(t),e.unnormalize=exports.Polymorphic.of(r),e.train=exports.Polymorphic.of(o),e.breaks=exports.Polymorphic.of(l),e.reorder=exports.Polymorphic.of(d),e.reset=exports.Polymorphic.of(u);function t(m,M){throw exports.Polymorphic.error("normalize","expanse",m.type)}function r(m,M){throw exports.Polymorphic.error("unnormalize","expanse",m.type)}function o(m,M,y){throw exports.Polymorphic.error("train","expanse",m.type)}e.trainDefault=o;function l(m,M,y){throw exports.Polymorphic.error("breaks","expanse",m.type)}function u(m,M){const{defaults:y}=m;for(const[v,S]of Object.entries(y))Array.isArray(S)&&Array.isArray(m.props[v])?copyValues(S,m.props[v]):m.props[v]=S;M!=null&&M.silent||Reactive.dispatch(m,"changed")}e.resetDefault=u;function d(m,M){throw exports.Polymorphic.error("reorder","expanse",m.type)}function n(){return Reactive.of()({})}e.base=n;function s(m,M,y){const{frozen:v,props:S}=m,z=M({...S});if(!(y!=null&&y.unfreeze))for(const C of v)delete z[C];for(const C of Object.keys(z))z[C]===m.props[C]&&delete z[C];copyProps(z,m.props),y!=null&&y.default&&copyProps(z,m.defaults),y!=null&&y.silent||Reactive.dispatch(m,"changed")}e.set=s;function a(m,M){for(const y of M)m.frozen.includes(y)||m.frozen.push(y)}e.freeze=a;function f(m){return m.type==="continuous"||m.type==="split"}e.isContinuous=f;function p(m){return m.type==="point"}e.isPoint=p;function c(m){return m.type==="point"||m.type==="band"}e.isDiscrete=c;function i(m){return m.type==="band"}e.isBand=i;function h(m){return m.type==="compound"}e.isCompound=h;function g(m){return m.type==="split"}e.isSplit=g;function x(m){return!h(m)&&!g(m)}e.isUnivariate=x})(exports.Expanse||(exports.Expanse={}));var ExpanseBand;(e=>{const t="band";function r(f=[]){const p=exports.Expanse.base(),[c,i]=[!1,seqLength(0,f.length)],h=Array(f.length).fill(1),g=cumsum(h),x={labels:f,ordered:c,order:i,weights:h,cumulativeWeights:g},m=structuredClone(x);return{...p,type:t,props:x,defaults:m,frozen:[]}}e.of=r,exports.Polymorphic.set(exports.Expanse.normalize,t,o),exports.Polymorphic.set(exports.Expanse.unnormalize,t,l),exports.Polymorphic.set(exports.Expanse.train,t,d),exports.Polymorphic.set(exports.Expanse.breaks,t,s),exports.Polymorphic.set(exports.Expanse.reorder,t,n);function o(f,p){const{labels:c}=f.props,i=c.indexOf(p);return u(f,i)}e.normalize=o;function l(f,p){const{labels:c,order:i,cumulativeWeights:h}=f.props,g=p*last(h);let x=0;for(;x<h.length-1&&!(h[x]>=g);)x++;return c[i[x]]}e.unnormalize=l;function u(f,p){const{order:c,cumulativeWeights:i}=f.props;p=c[p];const h=i[p-1]??0,g=i[p],x=last(i);return(h+g)/2/x}function d(f,p,c){const{props:i}=f,{order:h}=i,g=Array.from(new Set(p)).sort(compareAlphaNumeric);if(!h.length){for(let y=0;y<g.length;y++)h[y]=y;f.defaults.order=[...h],i.ordered=!1}const x=Array(g.length).fill(1),m=cumsum(ordered(x,h)),M={labels:g,weights:x,cumulativeWeights:m};for(const[y,v]of Object.entries(M))copyValues(v,f.props[y]),c!=null&&c.default&&copyValues(v,f.defaults[y]);exports.Expanse.set(f,()=>({}),c)}e.train=d;function n(f,p){const{props:c,defaults:i}=f,{order:h,weights:g,cumulativeWeights:x}=f.props,m=!!p;p=p??i.order,copyValues(p,h),copyValues(cumsum(ordered(g,h)),x),c.ordered=m,Reactive.dispatch(f,"changed")}e.reorder=n;function s(f){const{labels:p,order:c}=f.props;return ordered(p,c)}e.breaks=s;function a(f,p){const{props:c,defaults:i}=f;if(p=p??Array(c.labels.length).fill(1),p.length!=c.labels.length){const x="The length of the weights must match the length of the labels";throw new Error(x)}const{order:h}=c,g=cumsum(ordered(p,h));copyValues(p,c.weights),copyValues(p,i.weights),copyValues(g,c.cumulativeWeights),copyValues(g,i.cumulativeWeights),Reactive.dispatch(f,"changed")}e.setWeights=a})(ExpanseBand||(ExpanseBand={}));var ExpanseContinuous;(e=>{const t="continuous";function r(s=0,a=1){const f=exports.Expanse.base(),[p,c,i,h]=[identity,identity,0,!1],g={min:s,max:a,offset:i,ratio:h,trans:p,inv:c},x={...g,trans:p,inv:c};return{...f,type:t,props:g,defaults:x,frozen:[]}}e.of=r,exports.Polymorphic.set(exports.Expanse.normalize,t,o),exports.Polymorphic.set(exports.Expanse.unnormalize,t,l),exports.Polymorphic.set(exports.Expanse.train,t,u),exports.Polymorphic.set(exports.Expanse.breaks,t,d);function o(s,a){const{min:f,max:p,offset:c,trans:i}=s.props;return(i(a-c)-i(f))/(i(p)-i(f))}e.normalize=o;function l(s,a){const{min:f,max:p,offset:c,trans:i,inv:h}=s.props;return h(i(f)+a*(i(p)-i(f)))+c}e.unnormalize=l;function u(s,a,f){const{ratio:p}=s.props;let c=Metadata.get(a,"min"),i=Metadata.get(a,"max");(!c||!i)&&([c,i]=minmax(a)),c=p||f!=null&&f.ratio?0:c,exports.Expanse.set(s,()=>({min:c,max:i}),f)}e.train=u;function d(s,a=0,f=1){let[p,c]=[a,f].map(h=>l(s,h));return[p,c]=[p,c].sort(diff),prettyBreaks(p,c,4)}e.breaks=d;function n(s){const{min:a,max:f}=s.props;return f-a}e.range=n,e.transformations={sqrt:{trans:sqrt,inv:square},log10:{trans:log10,inv:exp10}}})(ExpanseContinuous||(ExpanseContinuous={})),exports.Scale=void 0,(e=>{function t(A,w){const[b,O,_]=[0,1,1],[E,T]=[1,1],F={zero:b,one:O,direction:_,scale:E,mult:T},k={...F},[R,P]=[[],[]],L=Reactive.of()({domain:A,codomain:w,props:F,defaults:k,frozen:P,linked:R});return Reactive.propagate(A,L,"changed"),Reactive.propagate(w,L,"changed"),L}e.of=t;function r(){return e.of(ExpanseContinuous.of(),ExpanseContinuous.of())}e.linear=r;function o(A,w){const{domain:b,codomain:O,props:_}=A;let E=exports.Expanse.normalize(b,w);return Array.isArray(E)?E=E.map(T=>u(T,_)):E=u(E,_),exports.Expanse.unnormalize(O,E)}e.pushforward=o;function l(A,w){const{domain:b,codomain:O,props:_}=A;let E=exports.Expanse.normalize(O,w);return Array.isArray(E)?E=E.map(T=>d(T,_)):E=d(E,_),exports.Expanse.unnormalize(b,E)}e.pullback=l;function u(A,w){const{zero:b,one:O,direction:_,scale:E,mult:T}=w;return A=A*E*T,A=b+A*(O-b),n(A,_)}function d(A,w){const{zero:b,one:O,direction:_,scale:E,mult:T}=w;return A=n(A,_),A=(A-b)/(O-b),A/(E*T)}function n(A,w){return .5*(1-w)+w*A}function s(A,w,b){const{linked:O,frozen:_,props:E}=A,T=w({...E});if(!(b!=null&&b.unfreeze))for(const F of _)delete T[F];Object.assign(E,T),b!=null&&b.default&&Object.assign(A.defaults,T),b!=null&&b.silent||Reactive.dispatch(A,"changed");for(const F of O)e.set(F,w,b)}e.set=s;function a(A,w){Reactive.removeAll(A.domain,"changed"),A.domain=w,Reactive.propagate(A.domain,A,"changed")}e.setDomain=a;function f(A,w){Reactive.removeAll(A.codomain,"changed"),A.codomain=w,Reactive.propagate(A.codomain,A,"changed")}e.setCodomain=f;function p(A,w){for(const b of w)A.frozen.includes(b)||A.frozen.push(b)}e.freeze=p;function c(A){e.set(A,w=>({direction:-1*w.direction}))}e.flip=c;function i(A,w){let{direction:b,zero:O,one:_}=A.props;O+=b*w,_+=b*w,e.set(A,()=>({zero:O,one:_}))}e.move=i;function h(A,w,b,O){const{zero:_,one:E,direction:T}=A.props,F=E-_;T===-1&&([w,b]=[1-w,1-b]),[w,b]=[w,b].map(k=>(k-_)/F),[w,b]=invertRange(w,b),T===-1&&([w,b]=[1-w,1-b]),e.set(A,()=>({zero:w,one:b}),O)}e.expand=h;function g(A,w,b){if(((b==null?void 0:b.name)??!0)&&Metadata.has(w,"name")&&Metadata.copy(w,A,["name"]),typeof w[0]=="string"&&exports.Expanse.isContinuous(A.domain)){const _=Array.from(new Set(w));A.domain=ExpanseBand.of(_)}exports.Expanse.train(A.domain,w,b)}e.train=g;function x(A,w){Object.assign(A.props,A.defaults),w!=null&&w.silent||Reactive.dispatch(A,"changed")}e.reset=x;function m(A){exports.Expanse.reset(A.domain,{silent:!0}),exports.Expanse.reset(A.codomain,{silent:!0}),e.reset(A)}e.restore=m;function M(A){const{domain:w,codomain:b,props:O}=A;let{zero:_,one:E}=O;[_,E]=invertRange(_,E);let T=exports.Expanse.breaks(w,_,E),F=formatAxisLabels(T),k;return exports.Expanse.isCompound(w)?(F=formatAxisLabels(T,{decimals:1}),w.commonScale&&(T=exports.Expanse.normalize(w,T)),T=T.map(R=>u(R,O)),k=exports.Expanse.unnormalize(A.codomain,T)):exports.Expanse.isSplit(b)?k=e.pushforward(A,T):k=T.map(R=>e.pushforward(A,R)),{labels:F,positions:k}}e.breaks=M;function y(A,w){for(const b of w)A.linked.includes(b)||A.linked.push(b)}e.link=y;function v(A,w){for(const b of w)b.codomain=A.codomain}e.shareCodomain=v;function S(A){return A.props.one-A.props.zero}e.unitRange=S;function z(A){const{domain:w}=A;if(exports.Expanse.isContinuous(w))return ExpanseContinuous.range(w)/S(A)}e.domainRange=z;function C(A){const{codomain:w}=A;if(exports.Expanse.isContinuous(w))return ExpanseContinuous.range(w)*S(A)}e.codomainRange=C;function D(A){if(!I(A))throw new Error("Both domain and codomain need to be continuous");const{domain:w,codomain:b}=A,O=ExpanseContinuous.range(w);return ExpanseContinuous.range(b)*S(A)/O}e.unitRatio=D;function I(A){const{domain:w,codomain:b}=A;return exports.Expanse.isContinuous(w)&&exports.Expanse.isContinuous(b)}e.isContinuous=I})(exports.Scale||(exports.Scale={})),exports.Factor=void 0,(e=>{e.POSITIONS=Symbol("positions"),e.CHILD_INDICES=Symbol("child-indices");function t(c,i,h,g){return Reactive.of()({type:c,cardinality:i,indices:h,data:g})}e.of=t;function r(c,i){i.cardinality=c.cardinality,copyValues(c.indices,i.indices);for(const h of Reflect.ownKeys(c.data)){const[g,x]=[c.data[h],i.data[h]];Array.isArray(g)&&Array.isArray(x)?(copyValues(g,x),Metadata.copy(g,x)):i.data[h]=c.data[h]}}e.copyFrom=r;function o(c,i){if([c,i].some(h=>h.type==="bijection"))return!0;if(c.indices.length!==i.indices.length)throw new Error("Factors do not have matching length")}function l(c){return Getter.of(c.data[e.POSITIONS])}e.positions=l;function u(c){Getter.of(c.data[e.CHILD_INDICES])}e.childIndices=u;function d(c,i){const g=new Uint32Array(seq(0,c)),x=y=>[y];i=i??{};for(const y of Object.values(i))(isObject(y)||isFunction(y))&&Metadata.set(y,{queryable:!0});const m="bijection",M={...i,[e.POSITIONS]:x};return t(m,1/0,g,M)}e.bijection=d;function n(c){const h=new Uint32Array(c).fill(0),g=()=>Array.from(h),x="constant",m={[e.POSITIONS]:g};return t(x,1,h,m)}e.mono=n;function s(c,i){const h=c.map(v=>v.toString());i=i??Array.from(new Set(h)).sort(compareAlphaNumeric),Metadata.has(c,"name")&&Metadata.copy(c,i,["name"]);const g=new Uint32Array(c.length),x={};for(let v=0;v<h.length;v++){const S=i.indexOf(h[v]);x[S]||(x[S]=[]),g[v]=S,x[S].push(v)}Metadata.set(i,{queryable:!0,isDimension:!0});const m=Object.values(x),M="surjection",y={label:i,[e.POSITIONS]:m};return t(M,i.length,g,y)}e.from=s;function a(c,i){function h(){const x=(i==null?void 0:i.breaks)??binBreaks(c,i),m=new Set,M=new Uint32Array(c.length),y={};for(let E=0;E<c.length;E++){const T=x.findIndex(F=>F>=c[E])-1;y[T]||(y[T]=[]),M[E]=T,y[T].push(E),m.add(T)}const v=Array.from(m).sort(diff);for(let E=0;E<M.length;E++)M[E]=v.indexOf(M[E]);const[S,z]=[[],[]];for(let E=0;E<v.length;E++)S.push(x[v[E]]),z.push(x[v[E]+1]);const[C,D]=[x[v[0]],x[last(v)+1]],I=`min of ${Metadata.get(c,"name")}`,A=`max of ${Metadata.get(c,"name")}`,w={queryable:!0,isDimension:!0};Metadata.set(S,{min:C,max:D,name:I,...w}),Metadata.set(z,{min:C,max:D,name:A,...w}),Metadata.copy(c,x,["name"]);const b=Object.values(y),O="surjection",_={binMin:S,binMax:z,breaks:x,[e.POSITIONS]:b};return t(O,v.length,M,_)}const g=h();return i&&Reactive.isReactive(i)&&Reactive.listen(i,"changed",()=>{const x=h();e.copyFrom(x,g),Reactive.dispatch(g,"changed")}),g}e.bin=a;function f(c,i){o(c,i),c.data[e.CHILD_INDICES]=[];function h(){if(c.type==="bijection"){const F={};for(const H of Reflect.ownKeys(c.data))F[H]=Getter.of(c.data[H]),Metadata.copy(c.data[H],F[H]);for(const H of Reflect.ownKeys(i.data))F[H]=Getter.proxy(i.data[H],i.indices),Metadata.copy(i.data[H],F[H]);const k="bijection",R=i.indices.length,P=new Uint32Array(i.indices.length),L=t(k,R,P,F);L.parent=c;const G=Array.from(Array(P.length),(H,N)=>[N]);return copyValues(G,c.data[e.CHILD_INDICES]),L}if(c.type==="constant"){const{type:F,data:k,cardinality:R,indices:P}=i,L=t(F,R,P,k);return L.parent=c,L}const x=Math.max(c.cardinality,i.cardinality)+1,m=new Set,M=new Uint32Array(c.indices.length),y={},v={},S={},z=Getter.of(c.indices),C=Getter.of(i.indices);for(let F=0;F<c.indices.length;F++){const[k,R]=[z(F),C(F)],P=x*k+R;P in v||(v[P]=k,S[P]=R,y[P]=[]),M[F]=P,y[P].push(F),m.add(P)}const D=Array.from(m).sort(diff),I={};for(const F of Object.keys(v))I[parseInt(F)]=D.indexOf(parseInt(F));for(let F=0;F<M.length;F++)M[F]=I[M[F]];const A={};for(const[F,k]of Object.entries(v))k in A||(A[k]=[]),A[k].push(I[parseInt(F)]);const w=Object.values(v),b=Object.values(S),O={};for(let F of Reflect.ownKeys(c.data)){let k=F;if(typeof F=="string")for(;k in O;)F+="$";const[R,P]=[c.data[F],w],L=Array.isArray(R)?subset(R,P):Getter.proxy(R,P);Metadata.copy(R,L),O[k]=L}for(let F of Reflect.ownKeys(i.data)){let k=F;if(typeof F=="string")for(;k in O;)k+="$";const[R,P]=[i.data[F],b],L=Array.isArray(R)?subset(R,P):Getter.proxy(R,P);Metadata.copy(R,L),O[k]=L}const _="surjection";O[e.POSITIONS]=Object.values(y);const E=t(_,D.length,M,O);E.parent=c;const T=Object.values(A);return copyValues(T,c.data[e.CHILD_INDICES]),E}const g=h();return Reactive.listen(c,"changed",()=>{const x=h();e.copyFrom(x,g),Reactive.dispatch(g,"changed")},{priority:2}),Reactive.listen(i,"changed",()=>{const x=h();e.copyFrom(x,g),Reactive.dispatch(g,"changed")},{priority:2}),g}e.product=f;function p(c,i){const h={};for(let g=0;g<i.indices.length&&(h[i.indices[g]]=c.indices[g],!(Object.keys(h).length>=i.cardinality));g++);return Object.values(h)}e.parentIndices=p})(exports.Factor||(exports.Factor={}));const Transient=255,Group={Base:7,First:6,Second:5,Third:4,BaseTransient:3,FirstTransient:2,SecondTransient:1,ThirdTransient:0},LAYER=Symbol("layer");var Marker;(e=>{function t(f){const p=Transient,c=new Uint32Array(f).fill(Group.Base),i=[],h="surjection",g=[0,1,2,3,4,5,6,7],x=exports.Factor.of(h,8,c,{[LAYER]:g});Metadata.set(g,{queryable:!0});const m=Reactive.of()({group:p,indices:c,transientIndices:i,factor:x});return Reactive.propagate(m,x,"changed"),m}e.of=t;function r(f,p){f.group=p}e.setGroup=r;function o(f,p,c){const i=(c==null?void 0:c.group)??f.group;if(u(f,{silent:!0}),i===Transient){for(let h=0;h<p.length;h++){const g=p[h];f.indices[g]=s(f.indices[g])}f.transientIndices=p}else for(let h=0;h<p.length;h++){const g=p[h];f.indices[g]=i}c!=null&&c.silent||Reactive.dispatch(f,"changed")}e.update=o;function l(f,p){for(let c=0;c<f.indices.length;c++)f.indices[c]=Group.Base;p!=null&&p.silent||(Reactive.dispatch(f,"changed"),Reactive.dispatch(f,"cleared"))}e.clearAll=l;function u(f,p){for(let c=0;c<f.transientIndices.length;c++){const i=f.transientIndices[c];f.indices[i]=a(f.indices[i])}p!=null&&p.silent||(Reactive.dispatch(f,"changed"),Reactive.dispatch(f,"cleared"))}e.clearTransient=u;function d(f){const{factor:p,indices:c}=f;return i=>p.data[LAYER][c[i]]}e.getLayer=d;function n(f){return!(f&4)}e.isTransient=n;function s(f){return f&-5}function a(f){return f|4}})(Marker||(Marker={}));var Reduced;(e=>{e.PARENT=Symbol("parent"),e.VALUES=Symbol("values"),e.INDICES=Symbol("indices"),e.FACTOR=Symbol("factor"),e.REDUCER=Symbol("reducer"),e.ORIGINAL_VALUES=Symbol("original-values");function t(i,h,g,x){const m=i;return m[e.VALUES]=i,m[e.FACTOR]=h,m[e.REDUCER]=g,m[e.ORIGINAL_VALUES]=i,x&&o(m,x),m}e.of=t;function r(i){return i[e.ORIGINAL_VALUES]}e.originalValues=r;function o(i,h){i[e.PARENT]=h}e.setParent=o;function l(i){const[,h,g,x]=c(i);if(!x)throw new Error("Parent missing");const m=exports.Factor.parentIndices(s(x),h),M=subset(x,m),y=t(M,s(x),g,a(x));return f(y,x),p(y,m),y[e.ORIGINAL_VALUES]=i[e.ORIGINAL_VALUES],Metadata.copy(i,y,["name","queryable","reduced"]),y}e.parent=l;function u(i){const[h,g,x,m,M]=c(i);if(!m)throw new Error("Cannot stack a without a parent");const y=exports.Factor.parentIndices(s(m),g),{reducefn:v,initialfn:S}=x,[z,C]=[h.length,[]],D=Array.from(Array(z),()=>S()),I=Getter.of(y);for(let b=0;b<h.length;b++){const O=I(b);C[O]===void 0&&(C[O]=S()),C[O]=v(C[O],h[b]),D[b]=C[O]}const A=M?subset(D,M):D,w=e.of(A,g,x,m);return f(w,D),M&&p(w,M),w[e.ORIGINAL_VALUES]=i[e.ORIGINAL_VALUES],Metadata.copy(i,w,["name","queryable","reduced"]),w}e.stack=u;function d(i,h){const[g,x,m,M,y]=c(i);if(!M)throw new Error("Cannot normalize a without a parent");const v=exports.Factor.parentIndices(s(M),x),S=subset(M,v),z=[...g];for(let I=0;I<i.length;I++)z[I]=h(z[I],S[I]);const C=y?subset(z,y):z,D=e.of(C,x,m,M);return f(D,z),y&&p(D,y),D[e.ORIGINAL_VALUES]=i[e.ORIGINAL_VALUES],Metadata.copy(i,D,["name","queryable","reduced"]),D}e.normalize=d;function n(i){const[h,g,x,m,M]=c(i),y=[];y.push(x.initialfn());for(let z=0;z<h.length-1;z++)y.push(h[z]);const v=M?subset(y,M):y,S=e.of(v,g,x,m);return f(S,y),M&&p(S,M),S[e.ORIGINAL_VALUES]=i[e.ORIGINAL_VALUES],Metadata.copy(i,S,["name","queryable"]),S}e.shiftLeft=n;function s(i){return i[e.FACTOR]}function a(i){return i[e.PARENT]}e.getParent=a;function f(i,h){i[e.VALUES]=h}function p(i,h){i[e.INDICES]=h}function c(i){return[i[e.VALUES],i[e.FACTOR],i[e.REDUCER],i[e.PARENT],i[e.INDICES]]}})(Reduced||(Reduced={}));var Geom;(e=>{function t(c){const i=Reactive.of()(c),h=last(c.coordinates)??Reactive.of()({});return Reactive.propagate(h,i,"changed","coords-changed"),i}e.of=t,e.render=exports.Polymorphic.of(r),e.check=exports.Polymorphic.of(o),e.query=exports.Polymorphic.of(l);function r(c,i){throw exports.Polymorphic.error("render","geom",c.type)}function o(c,i){throw exports.Polymorphic.error("check","geom",c.type)}function l(c,i){throw exports.Polymorphic.error("query","geom",c.type)}function u(c,i){const h=last(c.coordinates)??Reactive.of()({});Reactive.removeAllListeners(h),c.coordinates=i;const g=last(i)??{};Reactive.listen(g,"changed",()=>Reactive.dispatch(c,"coords-changed"),{priority:2}),Reactive.dispatch(c,"coords-swapped")}e.setCoordinates=u;function d(c){return c.coordinates[c.coordinates.length-2]}e.flatData=d;function n(c){return c.coordinates[c.coordinates.length-1]}e.groupedData=n;function s(c,i,h){const[g,x]=[Array(c),Getter.of(i)];for(let m=0;m<c;m++)g[m]=h[x(m)];return g}e.frames=s;function a(c,i){const h=[];for(const[g,x]of i){const m=Array(c),M=Getter.of(g??1);for(let y=0;y<c;y++)m[y]=exports.Scale.pushforward(x,M(y));h.push(m)}return h}e.scaledArrays=a;function f(c,i){const h=i[0],x=[p(c,h,{dimension:"only"})];for(let m=0;m<i.length;m++){const M=i[m],y=p(c,M,{dimension:"exclude"});y[LAYER]=Getter.of(c[LAYER])(M),x.push(y)}return x}e.getQueryInfo=f;function p(c,i,h){const g={},x=h==null?void 0:h.dimension;for(const m of Object.values(c)){if(!Metadata.hasMetadata(m)||x==="exclude"&&Metadata.get(m,"isDimension")||x==="only"&&!Metadata.get(m,"isDimension"))continue;const[M,y,v]=Metadata.get(m,["name","queryable","reduced"]);if(!M||!y)continue;const S=v?Reduced.originalValues(m):m,z=Getter.of(S);g[M]=z(i)}return g}})(Geom||(Geom={}));var Dataframe;(e=>{function t(o){let l=-1;for(const d of Object.values(o)){if(!d)continue;const n=Metadata.get(d,"length");if(!n)continue;const s="All arrays in the dataframe must have the same length";if(l!==-1&&n!=l)throw new Error(s);l=n}const u="No fixed-length variables present in the dataframe";if(l===-1)throw new Error(u);return l}e.findLength=t;function r(o){t(o)}e.checkLength=r})(Dataframe||(Dataframe={}));var Bars;(e=>{const t="bars";function r(d,n,s){const a=(s==null?void 0:s.vAnchor)??VAnchor.Bottom,f=(s==null?void 0:s.hAnchor)??HAnchor.Center;return Geom.of({type:t,coordinates:d,scales:n,vAnchor:a,hAnchor:f})}e.of=r,exports.Polymorphic.set(Geom.render,t,o),exports.Polymorphic.set(Geom.check,t,l),exports.Polymorphic.set(Geom.query,t,u);function o(d,n){const{scales:s,hAnchor:a,vAnchor:f}=d,p=Geom.groupedData(d),c=Dataframe.findLength(p),[i,h,g,x]=Geom.scaledArrays(c,[[p.x,s.x],[p.y,s.y],[p.width,s.width],[p.height,s.height]]),m=Geom.frames(c,p[LAYER],n);exports.CanvasFrame.rectanglesWH(m,i,h,g,x,{hAnchor:a,vAnchor:f})}e.render=o;function l(d,n){const{scales:s,hAnchor:a,vAnchor:f}=d,p=Geom.flatData(d),c=Dataframe.findLength(p),{x:i,y:h,width:g,height:x}=Getter.mapObject(p),m=Getter.of(p[exports.Factor.POSITIONS]),M=[];for(let y=0;y<c;y++){let v=exports.Scale.pushforward(s.x,i(y)),S=exports.Scale.pushforward(s.y,h(y)),z=exports.Scale.pushforward(s.width,g(y)),C=exports.Scale.pushforward(s.height,x(y));const D=[v-z*a,S-C*f,v+z*a,S+C*(1-f)];if(rectsIntersect(n,D)){const I=m(y);for(let A=0;A<I.length;A++)M.push(I[A])}}return M}e.check=l;function u(d,n){var M;const{scales:s,hAnchor:a,vAnchor:f}=d,p=Geom.flatData(d),c=Geom.groupedData(d),i=Dataframe.findLength(p),{x:h,y:g,width:x,height:m}=Getter.mapObject(p);for(let y=0;y<i;y++){let v=exports.Scale.pushforward(s.x,h(y)),S=exports.Scale.pushforward(s.y,g(y)),z=exports.Scale.pushforward(s.width,x(y)),C=exports.Scale.pushforward(s.height,m(y));const D=[v-z*a,S-C*f,v+z*a,S+C*(1-f)];if(pointInRect(n,D)){const I=(M=p[exports.Factor.CHILD_INDICES])==null?void 0:M[y];return Geom.getQueryInfo(c,I??[])}}}e.query=u})(Bars||(Bars={}));var ExpanseCompound;(e=>{const t="compound";function r(a){const f=exports.Expanse.base(),p=ExpanseContinuous.of();return{...f,continuous:p,type:t,commonScale:!1,expanses:a}}e.of=r,exports.Polymorphic.set(exports.Expanse.normalize,t,o),exports.Polymorphic.set(exports.Expanse.unnormalize,t,l),exports.Polymorphic.set(exports.Expanse.train,t,u),exports.Polymorphic.set(exports.Expanse.breaks,t,d),exports.Polymorphic.set(exports.Expanse.reset,t,n);function o(a,f){const{expanses:p}=a;return a.commonScale===!0?f.map(c=>exports.Expanse.normalize(a.continuous,c)):f.map((c,i)=>exports.Expanse.normalize(p[i],c))}e.normalize=o;function l(a,f){const{expanses:p}=a;return a.commonScale===!0?f.map(c=>exports.Expanse.normalize(a.continuous,c)):f.map((c,i)=>exports.Expanse.unnormalize(p[i],c))}e.unnormalize=l;function u(a,f){const{expanses:p}=a;if(f.length!=p.length)throw new Error("The number of arrays does not match the number of expanses.");for(let c=0;c<f.length;c++)exports.Expanse.train(p[c],f[c],{default:!0})}e.train=u;function d(a,f,p){return ExpanseContinuous.breaks(a.continuous,f,p)}e.breaks=d;function n(a){for(const f of a.expanses)exports.Expanse.reset(f);exports.Expanse.reset(a.continuous)}e.reset=n;function s(a,f){const{expanses:p,continuous:c}=a;if(!f){a.commonScale=!1,Object.assign(c.props,{min:0,max:1}),Object.assign(c.defaults,{min:0,max:1}),Reactive.dispatch(a,"changed");return}if(p.some(g=>!exports.Expanse.isContinuous(g)))throw new Error("Common scale can only be set if all expanses are continuous.");let[i,h]=[1/0,-1/0];for(const g of p)i=Math.min(i,g.props.min),h=Math.max(h,g.props.max);Object.assign(c.props,{min:i,max:h}),Object.assign(c.defaults,{min:i,max:h}),a.commonScale=!0,Reactive.dispatch(a,"changed")}e.setCommonScale=s})(ExpanseCompound||(ExpanseCompound={}));var ExpansePoint;(e=>{const t="point";function r(s=[]){const a=exports.Expanse.base(),[f,p]=[!1,seqLength(0,s.length)],c={labels:s,ordered:f,order:p},i=structuredClone(c);return{...a,type:t,props:c,defaults:i,frozen:[]}}e.of=r,exports.Polymorphic.set(exports.Expanse.normalize,t,o),exports.Polymorphic.set(exports.Expanse.unnormalize,t,l),exports.Polymorphic.set(exports.Expanse.train,t,u),exports.Polymorphic.set(exports.Expanse.breaks,t,n),exports.Polymorphic.set(exports.Expanse.reorder,t,d);function o(s,a){const{labels:f,order:p}=s.props,c=p[f.indexOf(a)];return c===-1?c:c/(f.length-1)}e.normalize=o;function l(s,a){const{labels:f,order:p}=s.props;return a=Math.round(a*(f.length-1)),f[p[a]]}e.unnormalize=l;function u(s,a,f){const{props:p,defaults:c}=s,{order:i}=p,h=Array.from(new Set(a)).sort(compareAlphaNumeric);if(!i.length){for(let g=0;g<h.length;g++)i[g]=g;c.order=[...i],p.ordered=!1}copyValues(h,p.labels),f!=null&&f.default&&copyValues(h,c.labels),Reactive.dispatch(s,"changed")}e.train=u;function d(s,a){const{props:f,defaults:p}=s,{order:c}=f,i=!!a;a=a??p.order,copyValues(a,c),f.ordered=i,Reactive.dispatch(s,"changed")}e.reorder=d;function n(s){const{labels:a,order:f}=s.props;return ordered(a,f)}e.breaks=n})(ExpansePoint||(ExpansePoint={}));var ExpanseSplit;(e=>{const t="split";function r(n){const s=n??ExpanseContinuous.of(),a={...s.props,innerType:s.type};return{...s,type:t,props:a}}e.of=r,exports.Polymorphic.set(exports.Expanse.normalize,t,o),exports.Polymorphic.set(exports.Expanse.unnormalize,t,l),exports.Polymorphic.set(exports.Expanse.train,t,u),exports.Polymorphic.set(exports.Expanse.breaks,t,d);function o(n,s){const{innerType:a}=n.props,f=exports.Polymorphic.dispatch(exports.Expanse.normalize,identity,a);return Array.isArray(s)?s.map(p=>f(n,p)):f(n,s)}e.normalize=o;function l(n,s){const{innerType:a}=n.props,f=exports.Polymorphic.dispatch(exports.Expanse.unnormalize,identity,a);return Array.isArray(s)?s.map(p=>f(n,p)):f(n,s)}e.unnormalize=l;function u(n,s){const{innerType:a}=n.props;exports.Polymorphic.dispatch(exports.Expanse.train,identity,a)(n,s)}e.train=u;function d(n){const{innerType:s}=n.props;return exports.Polymorphic.dispatch(exports.Expanse.breaks,identity,s)(n)}e.breaks=d})(ExpanseSplit||(ExpanseSplit={}));const expanseMap={continuous:ExpanseContinuous,point:ExpansePoint,band:ExpanseBand,split:ExpanseSplit,compound:ExpanseCompound},scaleNames=["x","y","size","area","areaPct","width","height"];exports.Scales=void 0,(e=>{function t(o){const l={};for(const u of scaleNames)l[u]=exports.Scale.linear();for(const[u,[d,n]]of Object.entries(o??{}))l[u]=exports.Scale.of(expanseMap[d].of(),expanseMap[n].of());return l}e.of=t;function r(o,l,u){return{...o,[l]:u}}e.set=r})(exports.Scales||(exports.Scales={})),exports.Reducer=void 0,(Reducer=>{Reducer.sum={name:"sum",fallback:"count",initialfn:()=>0,reducefn:(e,t)=>e+t},Reducer.max={name:"max",initialfn:()=>-1/0,reducefn:(e,t)=>Math.max(e,t)},Reducer.product={name:"product",initialfn:()=>1,reducefn:(e,t)=>e*t},Reducer.table={name:"table",initialfn:()=>({}),reducefn:(e,t)=>(e[t]=e[t]+1||0,e)};function registerReducer(e){e.name in Reducer||(Reducer[e.name]=e)}Reducer.registerReducer=registerReducer;function parse(value){if(typeof value=="string")return Reducer[value];const{initialfn,reducefn}=value;if(isString(reducefn)&&isString(initialfn)){const parsed={name:value.name};return parsed.initialfn=eval(initialfn),parsed.reducefn=eval(reducefn),parsed}return value}Reducer.parse=parse;function reduce(e,t,r){const{indices:o,cardinality:l}=t,{initialfn:u,reducefn:d}=r,n=Array.from(Array(l),()=>u()),s=Getter.of(o),a=Getter.of(e);for(let c=0;c<o.length;c++){const i=s(c);n[i]=d(n[i],a(c))}const f=Reduced.of(n,t,r);isObject(e)&&Metadata.copy(e,f);const p=getName(n,r)??"[unknown summary]";return Metadata.set(f,{name:p,queryable:!0,reduced:!0}),f}Reducer.reduce=reduce;function getName(e,t){return Metadata.has(e,"name")?`${t.name} of ${Metadata.get(e,"name")}`:t.fallback}Reducer.getName=getName})(exports.Reducer||(exports.Reducer={}));var Summaries;(e=>{function t(u,d){const n=[];for(let s=0;s<d.length;s++){const a=d[s],f=r(u,a),p=Reactive.of()(merge(f,a.data));if(n.push(p),s>0)for(const c of Object.keys(f)){const i=n[s-1][c];Reduced.setParent(f[c],i)}Reactive.listen(a,"changed",()=>{const c=r(u,a);for(const i of Object.keys(c))copyValues(c[i],f[i]);for(const i of Reflect.ownKeys(a.data)){const h=a.data[i];Array.isArray(h)&&copyValues(h,p[i])}}),Reactive.propagate(a,p,"changed","changed",{priority:2})}return n}e.of=t;function r(u,d){const n={};for(const[s,a]of Object.entries(u)){const[f,p]=a;n[s]=exports.Reducer.reduce(f,d,p)}return n}function o(u,d){const n=[];for(let s=0;s<u.length;s++){let a=function(p){const c=d[s](p),i=Reflect.ownKeys(p);for(const h of i)(typeof h=="symbol"||isIntegerString(h))&&(c[h]=p[h]);return c};const f=Reactive.of()(a(u[s]));n.push(f),Reactive.listen(u[s],"changed",()=>{const p=a(u[s]);for(const c of Reflect.ownKeys(p))Array.isArray(p[c])&&Array.isArray(f[c])&&copyValues(p[c],f[c]);Reactive.dispatch(f,"changed")})}return n}e.translate=o;function l(u,d){const n={};let s=0;for(const[a,f]of u)n[`q${s++}`]=[a(d),f];return n}e.formatQueries=l})(Summaries||(Summaries={}));function Barplot(e,t,r){const{data:o,marker:l}=e;let[u,d]=t(o);const n=d&&(r!=null&&r.reducer)?r.reducer:exports.Reducer.sum,s=d||(()=>1),a=exports.Factor.from(u),f=exports.Factor.product(a,l.factor),p=[a,f],c=r!=null&&r.queries?r.queries(o):{},i=[s,n],h=Summaries.of({stat:i,...c},p),g=exports.Scales.of({x:["band","continuous"]}),[x,m]=["bar","absolute"],M={...r,type:x,representation:m},y=Bars.of([],g),v=Object.assign(exports.Plot.of(h,g,M),{bars:y});return barplot(v),exports.Plot.addGeom(v,y),exports.Scale.link(g.y,[g.height]),exports.Scale.freeze(g.y,["zero"]),exports.Scale.freeze(g.height,["zero"]),Reactive.listen(v,"normalize",()=>switchRepresentation$5(v)),v}function sortAxis$1(e,t){if(e.props.ordered)ExpanseBand.reorder(e);else{const r=orderIndices(t);ExpanseBand.reorder(e,r)}}function switchRepresentation$5(e){e.representation==="absolute"?spineplot(e):barplot(e)}function barplot(e){const{data:t,scales:r,bars:o}=e,l=Summaries.translate(t,[a=>({x:a.label,y:zero,height:a.stat,width:one}),a=>({x:a.label,y:zero,height:Reduced.stack(a.stat),width:one})]),[u]=l,d={default:!0,ratio:!0};exports.Scale.train(r.x,u.x,d),exports.Scale.train(r.y,u.height,d),exports.Scale.train(r.width,[0,1],d),exports.Scale.train(r.height,u.height,d),ExpanseBand.setWeights(r.x.domain);const s={scale:1/new Set(u.x).size,mult:.9};return exports.Scale.set(r.width,()=>s,{default:!0}),exports.Expanse.set(r.width.codomain,()=>({offset:0}),{default:!0}),Metadata.copy(u.height,r.y,["name"]),Reactive.removeAll(e,"reorder"),Reactive.listen(e,"reorder",()=>sortAxis$1(r.x.domain,u.height)),Geom.setCoordinates(o,l),e.representation="absolute",exports.Plot.render(e),exports.Plot.renderAxes(e),e}function spineplot(e){const{data:t,scales:r,bars:o}=e,l=Summaries.translate(t,[s=>({x:s.label,y:zero,height:one,width:s.stat}),s=>({x:s.label,y:zero,height:Reduced.normalize(Reduced.stack(s.stat),(a,f)=>a/f),width:Reduced.parent(s.stat)})]),[u]=l,d={default:!0,ratio:!0};exports.Scale.train(r.x,u.x,d),exports.Scale.train(r.y,[0,1],d),exports.Scale.train(r.width,cumsum(u.width),d),exports.Scale.train(r.height,[0,1],d),ExpanseBand.setWeights(r.x.domain,u.width);const n={scale:1,mult:1};exports.Scale.set(r.width,()=>n,{default:!0}),exports.Expanse.set(r.width.codomain,()=>({offset:-1}),{default:!0}),Metadata.set(r.y,{name:"proportion"}),Reactive.removeAll(e,"reorder"),Reactive.listen(e,"reorder",()=>sortAxis$1(r.x.domain,u.width)),Geom.setCoordinates(o,l),e.representation="proportion",exports.Plot.render(e),exports.Plot.renderAxes(e)}function Bibarplot(e,t,r){const{data:o,marker:l}=e;let[u,d,n]=t(o);const s=exports.Reducer.sum,a=exports.Reducer.sum,f=n?d:()=>1,p=n||d,c=exports.Factor.from(u),i=exports.Factor.product(c,l.factor),h=[c,i],g=r!=null&&r.queries?r.queries(o):{},x=[f,s],m=[p,a],M=Summaries.of({stat1:x,stat2:m,...g},h),y=exports.Scales.of({x:["band","continuous"],heightUp:["continuous","continuous"],heightDown:["continuous","continuous"]}),v={type:"bar",representation:"absolute"},S={...y,height:y.heightUp},z={...y,height:y.heightDown},C=Bars.of([],S),D=Bars.of([],z),I={bars1:C,bars2:D},A=Object.assign(exports.Plot.of(M,y,v),I);bibarplot(A),exports.Plot.addGeom(A,C),exports.Plot.addGeom(A,D);const w={default:!0};return exports.Scale.shareCodomain(y.height,[y.heightUp,y.heightDown]),exports.Scale.set(y.heightUp,()=>({one:.4}),w),exports.Scale.set(y.heightDown,()=>({one:-.4}),w),exports.Expanse.set(y.height.codomain,()=>({inv:identity}),w),Reactive.listen(A,"normalize",()=>switchRepresentation$4(A)),A}function sortAxis(e,t){if(e.props.ordered)ExpanseBand.reorder(e);else{const r=orderIndices(t);ExpanseBand.reorder(e,r)}}function switchRepresentation$4(e){e.representation==="absolute"?normalizedbibarplot(e):bibarplot(e)}function bibarplot(e){const{data:t,scales:r,bars1:o,bars2:l}=e,u=Summaries.translate(t,[m=>({x:m.label,y:zero,height:m.stat1,width:one}),m=>({x:m.label,y:zero,height:Reduced.stack(m.stat1),width:one})]),d=Summaries.translate(t,[m=>({x:m.label,y:zero,height:m.stat2,width:one}),m=>({x:m.label,y:zero,height:Reduced.stack(m.stat2),width:one})]),[n]=u,s={default:!0,ratio:!0},{stat1:a,stat2:f}=t[0],p=Math.max(...a),c=Math.max(...f);exports.Scale.train(r.x,n.x,s),exports.Scale.train(r.y,[-1,1],{default:!0,ratio:!1}),exports.Scale.train(r.width,[0,1],s),exports.Scale.train(r.heightUp,[0,p],s),exports.Scale.train(r.heightDown,[0,c],s),ExpanseBand.setWeights(r.x.domain);const[i,h]=[a,f].map(m=>Metadata.get(m,"name"));Metadata.set(r.y,{name:`${h} / ${i}`});const x={scale:1/new Set(n.x).size,mult:.9,offset:0};return exports.Scale.set(r.width,()=>x,{default:!0}),Reactive.removeAll(e,"reorder"),Reactive.listen(e,"reorder",()=>sortAxis(r.x.domain,n.height)),Geom.setCoordinates(o,u),Geom.setCoordinates(l,d),e.representation="absolute",exports.Plot.render(e),exports.Plot.renderAxes(e),e}function normalizedbibarplot(e){const{data:t,scales:r,bars1:o,bars2:l}=e,u=Summaries.translate(t,[p=>({x:p.label,y:zero,height:one,width:one}),p=>({x:p.label,y:zero,height:Reduced.normalize(Reduced.stack(p.stat1),(c,i)=>c/i),width:one})]),d=Summaries.translate(t,[p=>({x:p.label,y:zero,height:one,width:one}),p=>({x:p.label,y:zero,height:Reduced.normalize(Reduced.stack(p.stat2),(c,i)=>c/i),width:one})]),[n]=u,s={default:!0,ratio:!0};exports.Scale.train(r.x,n.x,s),exports.Scale.train(r.y,[-1,1],{default:!0,ratio:!1}),exports.Scale.train(r.width,[0,1],s),exports.Scale.train(r.heightUp,[0,1],s),exports.Scale.train(r.heightDown,[0,1],s),ExpanseBand.setWeights(r.x.domain),Metadata.set(r.y,{name:"proportion"});const f={scale:1/new Set(n.x).size,mult:.9,offset:0};return exports.Scale.set(r.width,()=>f,{default:!0}),Reactive.removeAll(e,"reorder"),Geom.setCoordinates(o,u),Geom.setCoordinates(l,d),e.representation="proportion",exports.Plot.render(e),exports.Plot.renderAxes(e),e}function Fluctuationplot(e,t,r){const{data:o,marker:l}=e;let[u,d,n]=t(o);const s=n&&(r!=null&&r.reducer)?r.reducer:exports.Reducer.sum,a=n||(()=>1),f=exports.Factor.product(exports.Factor.from(u),exports.Factor.from(d)),p=exports.Factor.product(f,l.factor),c=[f,p],i=r!=null&&r.queries?r.queries(o):{},h=[a,s],g=Summaries.of({stat:h,...i},c),x=exports.Scales.of({x:["band","continuous"],y:["band","continuous"]}),[m,M]=["fluct","absolute"],y={...r,type:m,representation:M},v=Bars.of([],x,{vAnchor:VAnchor.Middle}),S=Object.assign(exports.Plot.of(g,x,y),{bars:v});return exports.Scale.link(x.area,[x.width,x.height]),exports.Scale.shareCodomain(x.area,[x.width,x.height]),fluctplot(S),exports.Plot.addGeom(S,v),Reactive.listen(S,"normalize",()=>switchRepresentation$3(S)),S}function switchRepresentation$3(e){e.representation==="absolute"?pctfluctplot(e):fluctplot(e)}function fluctplot(e){const{data:t,scales:r,bars:o}=e,l=Summaries.translate(t,[a=>({x:a.label,y:a.label$,height:a.stat,width:a.stat}),a=>({x:a.label,y:a.label$,height:Reduced.stack(a.stat),width:Reduced.stack(a.stat)})]),[u]=l,d={default:!0,ratio:!0};exports.Scale.train(r.x,u.x,d),exports.Scale.train(r.y,u.y,d),exports.Scale.train(r.width,u.width,d),exports.Scale.train(r.height,u.height,d);const s={scale:1/max(new Set(u.x).size,new Set(u.y).size)**2,mult:.9};exports.Scale.set(r.area,()=>s,{default:!0}),exports.Expanse.set(r.area.codomain,()=>({offset:0})),Geom.setCoordinates(o,l),e.representation="absolute",exports.Plot.render(e)}function pctfluctplot(e){const{data:t,scales:r,bars:o}=e,l=Summaries.translate(t,[a=>({x:a.label,y:a.label$,height:one,width:one}),a=>({x:a.label,y:a.label$,height:Reduced.normalize(Reduced.stack(a.stat),(f,p)=>f/p),width:Reduced.normalize(Reduced.stack(a.stat),(f,p)=>f/p)})]),[u]=l,d={default:!0,ratio:!0};exports.Scale.train(r.x,u.x,d),exports.Scale.train(r.y,u.y,d),exports.Scale.train(r.width,[0,1],d),exports.Scale.train(r.height,[0,1],d);const s={scale:1/max(new Set(u.x).size,new Set(u.y).size)**2,mult:.9};exports.Scale.set(r.area,()=>s,{default:!0}),exports.Expanse.set(r.area.codomain,()=>({offset:-2})),Geom.setCoordinates(o,l),e.representation="proportion",exports.Plot.render(e)}var Rectangles;(e=>{const t="rectangles";function r(d,n){return Geom.of({type:t,coordinates:d,scales:n})}e.of=r,exports.Polymorphic.set(Geom.render,t,o),exports.Polymorphic.set(Geom.check,t,l),exports.Polymorphic.set(Geom.query,t,u);function o(d,n){const{scales:s}=d,a=Geom.groupedData(d),f=Dataframe.findLength(a),[p,c,i,h,g]=Geom.scaledArrays(f,[[a.x0,s.x],[a.y0,s.y],[a.x1,s.x],[a.y1,s.y],[a.area,s.areaPct]]),x=Geom.frames(f,a[LAYER],n);exports.CanvasFrame.rectanglesXY(x,p,c,i,h,g)}e.render=o;function l(d,n){const{scales:s}=d,a=Geom.flatData(d),f=Dataframe.findLength(a),{x0:p,y0:c,x1:i,y1:h,area:g}=Getter.mapObject(a),x=Getter.of(a[exports.Factor.POSITIONS]),m=[];for(let M=0;M<f;M++){let y=exports.Scale.pushforward(s.x,p(M)),v=exports.Scale.pushforward(s.y,c(M)),S=exports.Scale.pushforward(s.x,i(M)),z=exports.Scale.pushforward(s.y,h(M));if(a.area){const C=exports.Scale.pushforward(s.areaPct,g(M)),D=S-y,I=z-v;y=y+(1-C)/2*D,S=S-(1-C)/2*D,v=v+(1-C)/2*I,z=z-(1-C)/2*I}if(rectsIntersect(n,[y,v,S,z])){const C=x(M);for(let D=0;D<C.length;D++)m.push(C[D])}}return m}e.check=l;function u(d,n){var m;const{scales:s}=d,a=Geom.flatData(d),f=Geom.groupedData(d),p=Dataframe.findLength(a),{x0:c,y0:i,x1:h,y1:g,area:x}=Getter.mapObject(a);for(let M=0;M<p;M++){let y=exports.Scale.pushforward(s.x,c(M)),v=exports.Scale.pushforward(s.y,i(M)),S=exports.Scale.pushforward(s.x,h(M)),z=exports.Scale.pushforward(s.y,g(M));if(a.area){const C=exports.Scale.pushforward(s.areaPct,x(M)),D=S-y,I=z-v;y=y+(1-C)/2*D,S=S-(1-C)/2*D,v=v+(1-C)/2*I,z=z-(1-C)/2*I}if(pointInRect(n,[y,v,S,z])){const C=(m=a[exports.Factor.CHILD_INDICES])==null?void 0:m[M];return Geom.getQueryInfo(f,C)}}}e.query=u})(Rectangles||(Rectangles={}));function Histogram(e,t,r){const{data:o,marker:l}=e;let[u,d]=t(o);const n=d&&(r!=null&&r.reducer)?r.reducer:exports.Reducer.sum,s=d||(()=>1),[a,f]=minmax(u),p=f-a,c=Reactive.of()({anchor:a,width:p/15}),i=exports.Factor.mono(u.length),h=exports.Factor.product(i,exports.Factor.bin(u,c)),g=exports.Factor.product(h,l.factor),x=[i,h,g],m=r!=null&&r.queries?r.queries(o):{},M=[s,n],y=Summaries.of({stat:M,...m},x),v=exports.Scales.of(),[S,z]=["histo","absolute"],C={...r,type:S,representation:z},D=Rectangles.of([],v),I=Object.assign(exports.Plot.of(y,v,C),{rectangles:D});histogram(I),exports.Plot.addGeom(I,D),Reactive.listen(I,"normalize",()=>switchRepresentation$2(I));const A=p/10;return Reactive.listen(I,"set-parameters",w=>{w&&(w.width&&Reactive.set(c,()=>({width:w.width})),w.anchor&&Reactive.set(c,()=>({anchor:w.anchor})))}),Reactive.listen(I,"grow",()=>Reactive.set(c,w=>({width:w.width*10/9}))),Reactive.listen(I,"shrink",()=>Reactive.set(c,w=>({width:w.width*9/10}))),Reactive.listen(I,"increment-anchor",()=>Reactive.set(c,w=>({anchor:w.anchor+A}))),Reactive.listen(I,"decrement-anchor",()=>Reactive.set(c,w=>({anchor:w.anchor-A}))),Reactive.listen(I,"reset",()=>{Reactive.set(c,()=>({anchor:a,width:p/15}))}),I}function switchRepresentation$2(e){e.representation==="absolute"?spinogram(e):histogram(e)}function histogram(e){const{data:t,rectangles:r}=e,o=Summaries.translate(t,[d=>d,d=>({x0:d.binMin,y0:zero,x1:d.binMax,y1:d.stat}),d=>({x0:d.binMin,y0:zero,x1:d.binMax,y1:Reduced.stack(d.stat)})]),{scales:l}=e,[,u]=o;exports.Scale.train(l.x,u.x1,{default:!0,name:!1}),exports.Scale.train(l.y,u.y1,{default:!0,ratio:!0}),exports.Scale.freeze(l.y,["zero"]),Reactive.removeAll(r.coordinates[1],"changed"),Reactive.listen(o[1],"changed",()=>{exports.Scale.train(l.x,u.x1,{default:!0,name:!1}),exports.Scale.train(l.y,u.y1,{default:!0,ratio:!0})}),Metadata.copy(t[1].breaks,l.x,["name"]),Metadata.copy(u.y1,l.y,["name"]),Geom.setCoordinates(r,o),e.representation="absolute",exports.Plot.render(e),exports.Plot.renderAxes(e)}function spinogram(e){const{data:t,rectangles:r}=e,o=Summaries.translate(t,[d=>d,d=>({x0:Reduced.shiftLeft(Reduced.stack(d.stat)),y0:zero,x1:Reduced.stack(d.stat),y1:one}),d=>({x0:Reduced.shiftLeft(Reduced.stack(Reduced.parent(d.stat))),y0:zero,x1:Reduced.stack(Reduced.parent(d.stat)),y1:Reduced.normalize(Reduced.stack(d.stat),(n,s)=>n/s),query1:d.binMin,query2:d.binMax})]),{scales:l}=e,[,u]=o;exports.Scale.train(l.x,[0,...u.x1],{default:!0,name:!1}),exports.Scale.train(l.y,[0,1],{default:!0,ratio:!0}),exports.Scale.freeze(l.y,["zero"]),Reactive.removeAll(r.coordinates[1],"changed"),Reactive.listen(o[1],"changed",()=>{exports.Scale.train(l.x,[0,...u.x1],{default:!0,name:!1})}),Metadata.set(l.x,{name:"cumulative count"}),Metadata.set(l.y,{name:"proportion"}),Geom.setCoordinates(r,o),e.representation="proportion",exports.Plot.render(e),exports.Plot.renderAxes(e)}function Histogram2d(e,t,r){const{data:o,marker:l}=e;let[u,d,n]=t(o);const s=n&&(r!=null&&r.reducer)?r.reducer:exports.Reducer.sum,a=n||(()=>1),[f,p]=minmax(u),[c,i]=minmax(d),[h,g]=[p-f,i-c],x=Reactive.of()({anchor:f,width:h/15}),m=Reactive.of()({anchor:c,width:g/15}),M=exports.Factor.bin(u,x),y=exports.Factor.bin(d,m),v=exports.Factor.product(M,y),S=exports.Factor.product(v,l.factor),z=[v,S],C=r!=null&&r.queries?r.queries(o):{},D=[a,s],I=Summaries.of({stat:D,...C},z),A=exports.Scales.of(),[w,b]=["histo2d","absolute"],O={...r,type:w,representation:b},_=Rectangles.of([],A),E=Object.assign(exports.Plot.of(I,A,O),{rectangles:_});return histogram2d(E),exports.Plot.addGeom(E,_),Reactive.listen(E,"normalize",()=>switchRepresentation$1(E)),Reactive.listen(E,"set-parameters",T=>{T&&(T.width1&&Reactive.set(x,()=>({width:T.width1})),T.anchor1&&Reactive.set(x,()=>({anchor:T.anchor1})),T.width2&&Reactive.set(m,()=>({width:T.width2})),T.anchor2&&Reactive.set(m,()=>({anchor:T.anchor2})))}),Reactive.listen(E,"grow",()=>{Reactive.set(x,T=>({width:T.width*10/9})),Reactive.set(m,T=>({width:T.width*10/9}))}),Reactive.listen(E,"shrink",()=>{Reactive.set(x,T=>({width:T.width*9/10})),Reactive.set(m,T=>({width:T.width*9/10}))}),Reactive.listen(E,"reset",()=>{Reactive.set(x,()=>({anchor:f,width:h/15})),Reactive.set(m,()=>({anchor:c,width:g/15}))}),E}function switchRepresentation$1(e){e.representation==="absolute"?spinogram2d(e):histogram2d(e)}function histogram2d(e){const{data:t,rectangles:r}=e,o=Summaries.translate(t,[n=>({x0:n.binMin,y0:n.binMin$,x1:n.binMax,y1:n.binMax$,area:n.stat}),n=>({x0:n.binMin,y0:n.binMin$,x1:n.binMax,y1:n.binMax$,area:Reduced.stack(n.stat)})]),{scales:l}=e,[,u]=o,d={default:!0};exports.Scale.train(l.x,u.x1,d),exports.Scale.train(l.y,u.y1,d),exports.Scale.train(l.areaPct,u.area,d),exports.Expanse.set(l.area.codomain,()=>({min:0,max:1}),d),exports.Expanse.freeze(l.area.codomain,["min","max"]),Reactive.removeAll(r.coordinates[0],"changed"),Reactive.listen(o[0],"changed",()=>{exports.Scale.train(l.x,u.x1,{default:!0,name:!1}),exports.Scale.train(l.y,u.y1,{default:!0,name:!1}),exports.Scale.train(l.areaPct,u.area,d)}),e.representation="absolute",Geom.setCoordinates(r,o),Metadata.copy(t[1].breaks,l.x,["name"]),Metadata.copy(t[1].breaks$,l.y,["name"]),exports.Plot.render(e),exports.Plot.renderAxes(e)}function spinogram2d(e){const{data:t,rectangles:r}=e,o=Summaries.translate(t,[n=>({x0:n.binMin,y0:n.binMin$,x1:n.binMax,y1:n.binMax$,area:one}),n=>({x0:n.binMin,y0:n.binMin$,x1:n.binMax,y1:n.binMax$,area:Reduced.normalize(Reduced.stack(n.stat),(s,a)=>s/a)})]),{scales:l}=e,[,u]=o,d={default:!0};exports.Scale.train(l.x,u.x1,d),exports.Scale.train(l.y,u.y1,d),exports.Scale.train(l.areaPct,[0,1],d),exports.Expanse.set(l.area.codomain,()=>({min:0,max:1}),d),exports.Expanse.freeze(l.area.codomain,["min","max"]),Reactive.removeAll(r.coordinates[0],"changed"),Reactive.listen(o[0],"changed",()=>{exports.Scale.train(l.x,u.x1,{default:!0,name:!1}),exports.Scale.train(l.y,u.y1,{default:!0,name:!1})}),e.representation="proportion",Geom.setCoordinates(r,o),Metadata.copy(t[1].breaks,l.x,["name"]),Metadata.copy(t[1].breaks$,l.y,["name"]),exports.Plot.render(e),exports.Plot.renderAxes(e)}var Lines;(e=>{const t="lines";function r(d,n){return Geom.of({type:t,coordinates:d,scales:n})}e.of=r,exports.Polymorphic.set(Geom.render,t,o),exports.Polymorphic.set(Geom.check,t,l),exports.Polymorphic.set(Geom.query,t,u);function o(d,n){const{scales:s}=d,a=Geom.groupedData(d),f=Dataframe.findLength(a),[p,c]=Geom.scaledArrays(f,[[a.x,s.x],[a.y,s.y]]),i=Geom.frames(f,a[LAYER],n);exports.CanvasFrame.lines(i,p,c)}e.render=o;function l(d,n){const{scales:s}=d,a=Geom.flatData(d),f=Dataframe.findLength(a),{x:p,y:c}=Getter.mapObject(a),i=Getter.of(a[exports.Factor.POSITIONS]),h=[];for(let g=0;g<f;g++){const x=exports.Scale.pushforward(s.x,p(g)),m=exports.Scale.pushforward(s.y,c(g));for(let M=1;M<x.length;M++){const y=[x[M-1],m[M-1],x[M],m[M]];if(rectSegmentIntersect(n,y)){const v=i(g);for(let S=0;S<v.length;S++)h.push(v[S])}}}return h}e.check=l;function u(d,n){var g;let{scales:s}=d;const a=Geom.flatData(d),f=Geom.groupedData(d),p=Dataframe.findLength(a),{x:c,y:i}=Getter.mapObject(a),h=bimap([...n,...n],[-1,-1,1,1],sum);for(let x=0;x<p;x++){const m=exports.Scale.pushforward(s.x,c(x)),M=exports.Scale.pushforward(s.y,i(x));for(let y=1;y<m.length;y++){const v=[m[y-1],M[y-1],m[y],M[y]];if(rectSegmentIntersect(h,v)){const S=(g=a[exports.Factor.CHILD_INDICES])==null?void 0:g[x],z=c(x),C=i(x),D={};for(let A=0;A<z.length;A++)D[z[A]]=C[A];const I=S[0];return D[LAYER]=Getter.of(f[LAYER])(I),[D]}}}}e.query=u})(Lines||(Lines={}));function inferExpanse(e,t={train:!0}){const o=isNumberArray(e)?ExpanseContinuous.of():ExpansePoint.of();return t.train&&exports.Expanse.train(o,e,{default:!0}),o}function Pcoordsplot(e,t,r){const{data:o,marker:l}=e,u=t(o),d=u.map(S=>Metadata.get(S,"name")),n=Getter.constant(d),s=Getter.multi(u),a=r!=null&&r.queries?r.queries(o):{},f=exports.Factor.bijection(u[0].length,{x:n,y:s,...a}),p=exports.Factor.product(f,l.factor),c=Summaries.of({},[f,p]),i=exports.Scales.of({x:["split","split"],y:["compound","split"]}),h=Summaries.translate(c,[S=>S,S=>S]),g=Lines.of(h,i),[x,m]=["pcoords","proportion"],M={...r,type:x,representation:m},y=Object.assign(exports.Plot.of(c,i,M),{lines:g});exports.Plot.addGeom(y,g);const v=u.map(S=>inferExpanse(S));return exports.Scale.setDomain(i.x,ExpanseSplit.of(ExpansePoint.of(d))),exports.Scale.setDomain(i.y,ExpanseCompound.of(v)),Metadata.set(i.x,{name:"variable"}),Metadata.set(i.y,{name:"value"}),Reactive.listen(y,"normalize",()=>switchRepresentation(y)),y}function switchRepresentation(e){e.representation==="proportion"?(ExpanseCompound.setCommonScale(e.scales.y.domain,!0),e.representation="absolute"):(ExpanseCompound.setCommonScale(e.scales.y.domain,!1),e.representation="proportion"),exports.Plot.renderAxes(e)}var Points;(e=>{const t="points";function r(d,n){return Geom.of({type:t,coordinates:d,scales:n})}e.of=r,exports.Polymorphic.set(Geom.render,t,o),exports.Polymorphic.set(Geom.check,t,l),exports.Polymorphic.set(Geom.query,t,u);function o(d,n){const{scales:s}=d,a=Geom.groupedData(d),f=Dataframe.findLength(a),[p,c,i]=Geom.scaledArrays(f,[[a.x,s.x],[a.y,s.y],[a.size,s.size]]),h=Geom.frames(f,a[LAYER],n);exports.CanvasFrame.points(h,p,c,i)}e.render=o;function l(d,n){const{scales:s}=d,a=Geom.flatData(d),f=Dataframe.findLength(a),{x:p,y:c,size:i}=Getter.mapObject(a),h=Getter.of(a[exports.Factor.POSITIONS]),g=[];for(let x=0;x<f;x++){const m=exports.Scale.pushforward(s.x,p(x)),M=exports.Scale.pushforward(s.y,c(x));let y=exports.Scale.pushforward(s.size,i(x));y=y/Math.sqrt(2);const v=[m-y,M-y,m+y,M+y];if(rectsIntersect(n,v)){const S=h(x);for(let z=0;z<S.length;z++)g.push(S[z])}}return g}e.check=l;function u(d,n){var g;const{scales:s}=d,a=Geom.flatData(d),f=Geom.groupedData(d),p=Dataframe.findLength(a),{x:c,y:i,size:h}=Getter.mapObject(a);for(let x=0;x<p;x++){const m=exports.Scale.pushforward(s.x,c(x)),M=exports.Scale.pushforward(s.y,i(x));let y=exports.Scale.pushforward(s.size,h(x));y=y/Math.sqrt(2);const v=[m-y,M-y,m+y,M+y];if(pointInRect(n,v)){const S=(g=a[exports.Factor.CHILD_INDICES])==null?void 0:g[x];return Geom.getQueryInfo(f,S)}}}e.query=u})(Points||(Points={}));function Scatterplot(e,t,r){const{data:o,marker:l}=e,[u,d,n]=t(o),s=r!=null&&r.queries?r==null?void 0:r.queries(o):{},a={x:u,y:d,size:n??(()=>.5),...s},f=exports.Factor.bijection(u.length,a),p=exports.Factor.product(f,l.factor),c=Summaries.of({},[f,p]),i=Summaries.translate(c,[y=>y,y=>y]),h=exports.Scales.of(),g={...r,type:"scatter"},x=exports.Plot.of(c,h,g);exports.Scale.train(h.x,u,{default:!0}),exports.Scale.train(h.y,d,{default:!0}),n&&exports.Scale.train(h.size,n,{default:!0});const m=30/Math.log(u.length+2);exports.Expanse.set(h.size.codomain,()=>({max:m}),{default:!0});const M=Points.of(i,h);return exports.Plot.addGeom(x,M),x}const defaultOptions={size:10,expandX:.1,expandY:.1,gapPct:.8,gapPx:1,axisLabelSize:1,axisTitleSize:1.25,margins:[0,0,0,0],marginLines:[3.5,3.5,1,1],colors:["#FF7F00","#E31A1C","#33A02C","#1F78B4","#FDBF6F","#FB9A99","#B2DF8A","#A6CEE3"],axisTextFont:"serif",axisTitleFont:"sans-serif",plotBackground:"#ffffff",marginBackground:"#f3f4f6"};var Axes;(e=>{function t(a){r(a),o(a)}e.renderLabels=t;function r(a){const{frames:f,scales:p,options:c}=a,{margins:i}=c,h=p.x,g=p.y,x=f.xAxis,{context:m,width:M}=x,y=parseInt(m.font.match(/^[0-9]*/)[0],10),v=g.codomain.props.min-y/2,[,S,,z]=i,{labels:C,positions:D}=exports.Scale.breaks(h);exports.CanvasFrame.clear(x);let[I,A]=[0,0];for(let w=0;w<C.length;w++){const b=C[w],O=D[w],_=exports.CanvasFrame.textWidth(x,b)+1;n(O+_/2,S,M-z)||s(I,O,A,_)||([I,A]=[O,_],exports.CanvasFrame.text(x,O,v,b))}}function o(a){const{frames:f,scales:p,options:c}=a,{margins:i,marginLines:h}=c,g=p.y,x=p.x,m=f.yAxis,{context:M,height:y}=m,v=parseInt(M.font.match(/^[0-9]*/)[0],10),S=x.codomain.props.min-v/2,[z,,C]=i,{labels:D,positions:I}=exports.Scale.breaks(g);exports.CanvasFrame.clear(m);let[A,w]=[0,0];for(let b=0;b<D.length;b++){const O=D[b],_=I[b],E=exports.CanvasFrame.textWidth(m,O)+1,T=exports.CanvasFrame.textHeight(m,O)+1;if(!n(_-T/2,z,y-C)&&!s(A,_,w,T)){for(;i[1]/2<E+T;)h[1]*=1.05,exports.Plot.resize(a);[A,w]=[_,T],exports.CanvasFrame.text(m,S,_,O)}}}function l(a){exports.CanvasFrame.clear(a.frames.base),u(a),d(a)}e.renderTitles=l;function u(a){const{scales:f,frames:p,options:c}=a,{margins:i}=c,h=f.x,g=f.y,x=p.base,m=Metadata.get(h,"name"),M=i[0],y=exports.Expanse.unnormalize(h.codomain,.5),v=exports.Expanse.unnormalize(g.codomain,0)-M*2/3;exports.CanvasFrame.text(x,y,v,m)}function d(a){const{scales:f,frames:p,options:c}=a,{margins:i}=c,h=f.y,g=f.x,x=p.base,m=Metadata.get(h,"name"),M=i[1],y=exports.Expanse.unnormalize(h.codomain,.5),v=exports.Expanse.unnormalize(g.codomain,0)-M*2/3;exports.CanvasFrame.text(x,v,y,m,{vertical:!0})}function n(a,f,p){return a<f||a>p}function s(a,f,p,c){const[i,h]=[a-p/2,a+p/2],[g,x]=[f-c/2,f+c/2];return i<x&&h>=g}})(Axes||(Axes={}));function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var trimLeft=/^\s+/,trimRight=/\s+$/;function tinycolor(e,t){if(e=e||"",t=t||{},e instanceof tinycolor)return e;if(!(this instanceof tinycolor))return new tinycolor(e,t);var r=inputToRGB(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}tinycolor.prototype={isDark:function e(){return this.getBrightness()<128},isLight:function e(){return!this.isDark()},isValid:function e(){return this._ok},getOriginalInput:function e(){return this._originalInput},getFormat:function e(){return this._format},getAlpha:function e(){return this._a},getBrightness:function e(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function e(){var t=this.toRgb(),r,o,l,u,d,n;return r=t.r/255,o=t.g/255,l=t.b/255,r<=.03928?u=r/12.92:u=Math.pow((r+.055)/1.055,2.4),o<=.03928?d=o/12.92:d=Math.pow((o+.055)/1.055,2.4),l<=.03928?n=l/12.92:n=Math.pow((l+.055)/1.055,2.4),.2126*u+.7152*d+.0722*n},setAlpha:function e(t){return this._a=boundAlpha(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function e(){var t=rgbToHsv(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function e(){var t=rgbToHsv(this._r,this._g,this._b),r=Math.round(t.h*360),o=Math.round(t.s*100),l=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+o+"%, "+l+"%)":"hsva("+r+", "+o+"%, "+l+"%, "+this._roundA+")"},toHsl:function e(){var t=rgbToHsl(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function e(){var t=rgbToHsl(this._r,this._g,this._b),r=Math.round(t.h*360),o=Math.round(t.s*100),l=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+o+"%, "+l+"%)":"hsla("+r+", "+o+"%, "+l+"%, "+this._roundA+")"},toHex:function e(t){return rgbToHex(this._r,this._g,this._b,t)},toHexString:function e(t){return"#"+this.toHex(t)},toHex8:function e(t){return rgbaToHex(this._r,this._g,this._b,this._a,t)},toHex8String:function e(t){return"#"+this.toHex8(t)},toRgb:function e(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function e(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function e(){return{r:Math.round(bound01(this._r,255)*100)+"%",g:Math.round(bound01(this._g,255)*100)+"%",b:Math.round(bound01(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function e(){return this._a==1?"rgb("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%)":"rgba("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%, "+this._roundA+")"},toName:function e(){return this._a===0?"transparent":this._a<1?!1:hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function e(t){var r="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),o=r,l=this._gradientType?"GradientType = 1, ":"";if(t){var u=tinycolor(t);o="#"+rgbaToArgbHex(u._r,u._g,u._b,u._a)}return"progid:DXImageTransform.Microsoft.gradient("+l+"startColorstr="+r+",endColorstr="+o+")"},toString:function e(t){var r=!!t;t=t||this._format;var o=!1,l=this._a<1&&this._a>=0,u=!r&&l&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return u?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(o=this.toRgbString()),t==="prgb"&&(o=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(o=this.toHexString()),t==="hex3"&&(o=this.toHexString(!0)),t==="hex4"&&(o=this.toHex8String(!0)),t==="hex8"&&(o=this.toHex8String()),t==="name"&&(o=this.toName()),t==="hsl"&&(o=this.toHslString()),t==="hsv"&&(o=this.toHsvString()),o||this.toHexString())},clone:function e(){return tinycolor(this.toString())},_applyModification:function e(t,r){var o=t.apply(null,[this].concat([].slice.call(r)));return this._r=o._r,this._g=o._g,this._b=o._b,this.setAlpha(o._a),this},lighten:function e(){return this._applyModification(_lighten,arguments)},brighten:function e(){return this._applyModification(_brighten,arguments)},darken:function e(){return this._applyModification(_darken,arguments)},desaturate:function e(){return this._applyModification(_desaturate,arguments)},saturate:function e(){return this._applyModification(_saturate,arguments)},greyscale:function e(){return this._applyModification(_greyscale,arguments)},spin:function e(){return this._applyModification(_spin,arguments)},_applyCombination:function e(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function e(){return this._applyCombination(_analogous,arguments)},complement:function e(){return this._applyCombination(_complement,arguments)},monochromatic:function e(){return this._applyCombination(_monochromatic,arguments)},splitcomplement:function e(){return this._applyCombination(_splitcomplement,arguments)},triad:function e(){return this._applyCombination(polyad,[3])},tetrad:function e(){return this._applyCombination(polyad,[4])}},tinycolor.fromRatio=function(e,t){if(_typeof(e)=="object"){var r={};for(var o in e)e.hasOwnProperty(o)&&(o==="a"?r[o]=e[o]:r[o]=convertToPercentage(e[o]));e=r}return tinycolor(e,t)};function inputToRGB(e){var t={r:0,g:0,b:0},r=1,o=null,l=null,u=null,d=!1,n=!1;return typeof e=="string"&&(e=stringInputToObject(e)),_typeof(e)=="object"&&(isValidCSSUnit(e.r)&&isValidCSSUnit(e.g)&&isValidCSSUnit(e.b)?(t=rgbToRgb(e.r,e.g,e.b),d=!0,n=String(e.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(e.h)&&isValidCSSUnit(e.s)&&isValidCSSUnit(e.v)?(o=convertToPercentage(e.s),l=convertToPercentage(e.v),t=hsvToRgb(e.h,o,l),d=!0,n="hsv"):isValidCSSUnit(e.h)&&isValidCSSUnit(e.s)&&isValidCSSUnit(e.l)&&(o=convertToPercentage(e.s),u=convertToPercentage(e.l),t=hslToRgb(e.h,o,u),d=!0,n="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=boundAlpha(r),{ok:d,format:e.format||n,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function rgbToRgb(e,t,r){return{r:bound01(e,255)*255,g:bound01(t,255)*255,b:bound01(r,255)*255}}function rgbToHsl(e,t,r){e=bound01(e,255),t=bound01(t,255),r=bound01(r,255);var o=Math.max(e,t,r),l=Math.min(e,t,r),u,d,n=(o+l)/2;if(o==l)u=d=0;else{var s=o-l;switch(d=n>.5?s/(2-o-l):s/(o+l),o){case e:u=(t-r)/s+(t<r?6:0);break;case t:u=(r-e)/s+2;break;case r:u=(e-t)/s+4;break}u/=6}return{h:u,s:d,l:n}}function hslToRgb(e,t,r){var o,l,u;e=bound01(e,360),t=bound01(t,100),r=bound01(r,100);function d(a,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<.16666666666666666?a+(f-a)*6*p:p<.5?f:p<.6666666666666666?a+(f-a)*(.6666666666666666-p)*6:a}if(t===0)o=l=u=r;else{var n=r<.5?r*(1+t):r+t-r*t,s=2*r-n;o=d(s,n,e+.3333333333333333),l=d(s,n,e),u=d(s,n,e-.3333333333333333)}return{r:o*255,g:l*255,b:u*255}}function rgbToHsv(e,t,r){e=bound01(e,255),t=bound01(t,255),r=bound01(r,255);var o=Math.max(e,t,r),l=Math.min(e,t,r),u,d,n=o,s=o-l;if(d=o===0?0:s/o,o==l)u=0;else{switch(o){case e:u=(t-r)/s+(t<r?6:0);break;case t:u=(r-e)/s+2;break;case r:u=(e-t)/s+4;break}u/=6}return{h:u,s:d,v:n}}function hsvToRgb(e,t,r){e=bound01(e,360)*6,t=bound01(t,100),r=bound01(r,100);var o=Math.floor(e),l=e-o,u=r*(1-t),d=r*(1-l*t),n=r*(1-(1-l)*t),s=o%6,a=[r,d,u,u,n,r][s],f=[n,r,r,d,u,u][s],p=[u,u,n,r,r,d][s];return{r:a*255,g:f*255,b:p*255}}function rgbToHex(e,t,r,o){var l=[pad2(Math.round(e).toString(16)),pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16))];return o&&l[0].charAt(0)==l[0].charAt(1)&&l[1].charAt(0)==l[1].charAt(1)&&l[2].charAt(0)==l[2].charAt(1)?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0):l.join("")}function rgbaToHex(e,t,r,o,l){var u=[pad2(Math.round(e).toString(16)),pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16)),pad2(convertDecimalToHex(o))];return l&&u[0].charAt(0)==u[0].charAt(1)&&u[1].charAt(0)==u[1].charAt(1)&&u[2].charAt(0)==u[2].charAt(1)&&u[3].charAt(0)==u[3].charAt(1)?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0):u.join("")}function rgbaToArgbHex(e,t,r,o){var l=[pad2(convertDecimalToHex(o)),pad2(Math.round(e).toString(16)),pad2(Math.round(t).toString(16)),pad2(Math.round(r).toString(16))];return l.join("")}tinycolor.equals=function(e,t){return!e||!t?!1:tinycolor(e).toRgbString()==tinycolor(t).toRgbString()},tinycolor.random=function(){return tinycolor.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function _desaturate(e,t){t=t===0?0:t||10;var r=tinycolor(e).toHsl();return r.s-=t/100,r.s=clamp01(r.s),tinycolor(r)}function _saturate(e,t){t=t===0?0:t||10;var r=tinycolor(e).toHsl();return r.s+=t/100,r.s=clamp01(r.s),tinycolor(r)}function _greyscale(e){return tinycolor(e).desaturate(100)}function _lighten(e,t){t=t===0?0:t||10;var r=tinycolor(e).toHsl();return r.l+=t/100,r.l=clamp01(r.l),tinycolor(r)}function _brighten(e,t){t=t===0?0:t||10;var r=tinycolor(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),tinycolor(r)}function _darken(e,t){t=t===0?0:t||10;var r=tinycolor(e).toHsl();return r.l-=t/100,r.l=clamp01(r.l),tinycolor(r)}function _spin(e,t){var r=tinycolor(e).toHsl(),o=(r.h+t)%360;return r.h=o<0?360+o:o,tinycolor(r)}function _complement(e){var t=tinycolor(e).toHsl();return t.h=(t.h+180)%360,tinycolor(t)}function polyad(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=tinycolor(e).toHsl(),o=[tinycolor(e)],l=360/t,u=1;u<t;u++)o.push(tinycolor({h:(r.h+u*l)%360,s:r.s,l:r.l}));return o}function _splitcomplement(e){var t=tinycolor(e).toHsl(),r=t.h;return[tinycolor(e),tinycolor({h:(r+72)%360,s:t.s,l:t.l}),tinycolor({h:(r+216)%360,s:t.s,l:t.l})]}function _analogous(e,t,r){t=t||6,r=r||30;var o=tinycolor(e).toHsl(),l=360/r,u=[tinycolor(e)];for(o.h=(o.h-(l*t>>1)+720)%360;--t;)o.h=(o.h+l)%360,u.push(tinycolor(o));return u}function _monochromatic(e,t){t=t||6;for(var r=tinycolor(e).toHsv(),o=r.h,l=r.s,u=r.v,d=[],n=1/t;t--;)d.push(tinycolor({h:o,s:l,v:u})),u=(u+n)%1;return d}tinycolor.mix=function(e,t,r){r=r===0?0:r||50;var o=tinycolor(e).toRgb(),l=tinycolor(t).toRgb(),u=r/100,d={r:(l.r-o.r)*u+o.r,g:(l.g-o.g)*u+o.g,b:(l.b-o.b)*u+o.b,a:(l.a-o.a)*u+o.a};return tinycolor(d)},tinycolor.readability=function(e,t){var r=tinycolor(e),o=tinycolor(t);return(Math.max(r.getLuminance(),o.getLuminance())+.05)/(Math.min(r.getLuminance(),o.getLuminance())+.05)},tinycolor.isReadable=function(e,t,r){var o=tinycolor.readability(e,t),l,u;switch(u=!1,l=validateWCAG2Parms(r),l.level+l.size){case"AAsmall":case"AAAlarge":u=o>=4.5;break;case"AAlarge":u=o>=3;break;case"AAAsmall":u=o>=7;break}return u},tinycolor.mostReadable=function(e,t,r){var o=null,l=0,u,d,n,s;r=r||{},d=r.includeFallbackColors,n=r.level,s=r.size;for(var a=0;a<t.length;a++)u=tinycolor.readability(e,t[a]),u>l&&(l=u,o=tinycolor(t[a]));return tinycolor.isReadable(e,o,{level:n,size:s})||!d?o:(r.includeFallbackColors=!1,tinycolor.mostReadable(e,["#fff","#000"],r))};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names);function flip(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function boundAlpha(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function bound01(e,t){isOnePointZero(e)&&(e="100%");var r=isPercentage(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function clamp01(e){return Math.min(1,Math.max(0,e))}function parseIntFromHex(e){return parseInt(e,16)}function isOnePointZero(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function isPercentage(e){return typeof e=="string"&&e.indexOf("%")!=-1}function pad2(e){return e.length==1?"0"+e:""+e}function convertToPercentage(e){return e<=1&&(e=e*100+"%"),e}function convertDecimalToHex(e){return Math.round(parseFloat(e)*255).toString(16)}function convertHexToDecimal(e){return parseIntFromHex(e)/255}var matchers=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",l="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+o),rgba:new RegExp("rgba"+l),hsl:new RegExp("hsl"+o),hsla:new RegExp("hsla"+l),hsv:new RegExp("hsv"+o),hsva:new RegExp("hsva"+l),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function isValidCSSUnit(e){return!!matchers.CSS_UNIT.exec(e)}function stringInputToObject(e){e=e.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var t=!1;if(names[e])e=names[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=matchers.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=matchers.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=matchers.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=matchers.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=matchers.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=matchers.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=matchers.hex8.exec(e))?{r:parseIntFromHex(r[1]),g:parseIntFromHex(r[2]),b:parseIntFromHex(r[3]),a:convertHexToDecimal(r[4]),format:t?"name":"hex8"}:(r=matchers.hex6.exec(e))?{r:parseIntFromHex(r[1]),g:parseIntFromHex(r[2]),b:parseIntFromHex(r[3]),format:t?"name":"hex"}:(r=matchers.hex4.exec(e))?{r:parseIntFromHex(r[1]+""+r[1]),g:parseIntFromHex(r[2]+""+r[2]),b:parseIntFromHex(r[3]+""+r[3]),a:convertHexToDecimal(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=matchers.hex3.exec(e))?{r:parseIntFromHex(r[1]+""+r[1]),g:parseIntFromHex(r[2]+""+r[2]),b:parseIntFromHex(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function validateWCAG2Parms(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var QueryTable;(e=>{function t(o,l){if(DOM.clearChildren(o),!Array.isArray(l)){for(const[u,d]of Object.entries(l)){const n=r(u,d);DOM.append(o,n)}return}for(const u of Object.values(l))for(const[d,n]of Object.entries(u)){const s=r(d,n,defaultOptions.colors[u[LAYER]]);DOM.append(o,s)}}e.formatQueryTable=t;function r(o,l,u){const d=DOM.element("tr"),n=DOM.element("td",{classes:tw("tw-border tw-border-l-1 tw-border-r-1 !tw-border-black tw-px-3 tw-py-1"),textContent:o}),s=DOM.element("td",{classes:tw("tw-border tw-border-l-1 tw-border-r-1 !tw-border-black tw-px-3 tw-py-1 tw-font-mono"),textContent:formatLabel(l)});if(u){const[a,f]=[u,"black"];DOM.setStyles(n,{backgroundColor:a,borderColor:f}),DOM.setStyles(s,{backgroundColor:a,borderColor:f}),tinycolor(u).getBrightness()<127&&(DOM.setStyles(n,{color:"white"}),DOM.setStyles(s,{color:"white"}))}return DOM.append(d,n),DOM.append(d,s),d}})(QueryTable||(QueryTable={})),exports.Plot=void 0,(e=>{function t(k,R,P){const L=DOM.element("div",{id:"plot",classes:tw("tw-relative tw-h-full tw-w-full tw-drop-shadow-md")});k=k??[],R=R??exports.Scales.of();const G={},H=[],N=[],q=[];P.renderer=P.renderer??"canvas";const B={...structuredClone(defaultOptions),...P},{expandX:$,expandY:j}=B,U=[[$,j,1-$,1-j]],W={active:!1,locked:!1,mousedown:!1,mousebutton:MouseButton.Left,mode:"select",mousecoords:[0,0,0,0],lastkey:"",ratio:P==null?void 0:P.ratio},V=P.type??"unknown",K=P.representation??"absolute",X=Reactive.of()({type:V,data:k,container:L,representation:K,frames:G,scales:R,renderables:H,selectables:N,queryables:q,zoomStack:U,parameters:W,options:B});return setupFrames(X,B),setupScales(X),setupEvents$1(X),X}e.of=t,e.scatter=Scatterplot,e.bar=Barplot,e.fluct=Fluctuationplot,e.histo=Histogram,e.histo2d=Histogram2d,e.pcoords=Pcoordsplot,e.bibar=Bibarplot;function r(k,R){k.appendChild(R.container),e.resize(R)}e.append=r;function o(k,R){const{renderables:P,selectables:L,queryables:G}=k;for(const H of[P,L,G])H.push(R);for(const H of P)Reactive.removeAll(H,"coords-changed");Reactive.listenAll(P,"coords-changed",()=>e.render(k))}e.addGeom=o;function l(k,R){const{renderables:P,selectables:L,queryables:G}=k;for(const H of[P,L,G])remove(H,R);Reactive.removeAllListeners(R)}e.deleteGeom=l;const u=tw("tw-outline tw-outline-2 tw-outline-slate-600");function d(k){DOM.addClasses(k.container,u),k.parameters.active=!0,Reactive.dispatch(k,"activated")}e.activate=d;function n(k){DOM.removeClasses(k.container,u),k.parameters.active=!1,Reactive.dispatch(k,"deactivated")}e.deactivate=n;function s(k){k.parameters.locked=!0}e.lock=s;function a(k){k.parameters.locked=!1}e.unlock=a;function f(k){for(const R of dataLayers)exports.CanvasFrame.clear(k.frames[R]);for(const R of k.renderables)Geom.render(R,k.frames)}e.render=f;function p(k){Axes.renderLabels(k),Axes.renderTitles(k)}e.renderAxes=p;function c(k){exports.CanvasFrame.clear(k.frames.user)}e.clearUserFrame=c;function i(k){const{container:R,scales:P,frames:L,parameters:G,options:H}=k,{clientWidth:N,clientHeight:q}=R,{x:B,y:$,width:j,height:U,area:W}=P,{margins:V,marginLines:K}=H,X=getComputedStyle(k.container),J=parseFloat(X.fontSize);for(let ee=0;ee<V.length;ee++)V[ee]=K[ee]*J;for(const ee of Object.values(k.frames))exports.CanvasFrame.resize(ee);const[Z,Y]=[V[0],V[1]],[re,Q]=[q-V[2],N-V[3]];DOM.setStyles(L.under.canvas,{width:`calc(100% - ${Y}px - ${V[3]}px)`,height:`calc(100% - ${Z}px - ${V[2]}px)`,top:`${V[2]}px`,right:`${V[3]}px`}),DOM.setStyles(L.over.canvas,{width:`calc(100% - ${Y}px - ${V[3]}px)`,height:`calc(100% - ${Z}px - ${V[2]}px)`,top:`${V[2]}px`,right:`${V[3]}px`});const te={default:!0,silent:!0};exports.Expanse.set(B.codomain,()=>({min:Y,max:Q}),te),exports.Expanse.set($.codomain,()=>({min:Z,max:re}),te);const[ne,oe]=[Q-Y,re-Z];if(exports.Expanse.set(j.codomain,()=>({max:ne}),te),exports.Expanse.set(U.codomain,()=>({max:oe}),te),exports.Expanse.set(W.codomain,()=>({max:Math.min(ne,oe)}),te),G.ratio){const{expandX:ee,expandY:se}=defaultOptions;exports.Scale.set(B,()=>({zero:ee,one:1-ee}),te),exports.Scale.set($,()=>({zero:se,one:1-se}),te),e.applyRatio(k,G.ratio)}e.render(k),e.renderAxes(k)}e.resize=i;function h(k,R){const{selectables:P,parameters:L}=k;R=R??L.mousecoords;const G=new Set;for(const N of P){const q=Geom.check(N,R);for(let B=0;B<q.length;B++)G.add(q[B])}const H=Array.from(G);Reactive.dispatch(k,"set-selected",{cases:H})}e.checkSelection=h;function g(k,R,P){const{frames:L,scales:G,options:H}=k,{margins:N}=H,q=(P==null?void 0:P.units)??"pct";q==="screen"?(R[0]+=N[1],R[1]+=N[0],R[2]+=N[1],R[3]+=N[0]):q==="pct"?(R[0]=exports.Expanse.unnormalize(G.x.codomain,R[0]),R[1]=exports.Expanse.unnormalize(G.y.codomain,R[1]),R[2]=exports.Expanse.unnormalize(G.x.codomain,R[2]),R[3]=exports.Expanse.unnormalize(G.y.codomain,R[3])):q==="data"&&(R[0]=exports.Scale.pushforward(G.x,R[0]),R[1]=exports.Scale.pushforward(G.y,R[1]),R[2]=exports.Scale.pushforward(G.x,R[2]),R[3]=exports.Scale.pushforward(G.y,R[3])),h(k,R),e.clearUserFrame(k),exports.CanvasFrame.rectangleXY(L.user,...R,1)}e.selectRegion=g;function x(k,R){k.parameters.mode=R}e.setMode=x;function m(k,R){k.parameters.mousedown=R}e.setMousedown=m;function M(k,R){k.parameters.mousebutton=R}e.setMouseButton=M,e.mousemoveHandlers={select:y,pan:v,query:S};function y(k,R){const{container:P,parameters:L,frames:G}=k;if(!L.active||!L.mousedown)return;const{mousecoords:H}=L,{clientHeight:N}=P,q=R.offsetX,B=N-R.offsetY;H[2]=q,H[3]=B,e.checkSelection(k),Reactive.dispatch(k,"lock-others"),e.clearUserFrame(k),exports.CanvasFrame.rectangleXY(G.user,...L.mousecoords,1)}function v(k,R){const{container:P,scales:L,parameters:G}=k;if(!G.active||!G.mousedown)return;const{mousecoords:H}=G,{clientWidth:N,clientHeight:q}=P,[B,$]=H,j=R.offsetX,U=q-R.offsetY,W=(j-B)/N,V=(U-$)/q;exports.Scale.move(L.x,W),exports.Scale.move(L.y,V),H[0]=j,H[1]=U,Reactive.dispatch(k,"clear-transient")}function S(k,R){const{offsetX:P,offsetY:L}=R,{queryTable:G,queryables:H,container:N}=k,{clientHeight:q}=N;if(!G)return;DOM.setStyles(G,{display:"none"});const[B,$]=[P,q-L];let j;for(const U of H)if(j=Geom.query(U,[B,$]),j)break;j&&(QueryTable.formatQueryTable(G,j),G.style.display="inline-block")}e.keybindings={"=":"grow","-":"shrink","]":"unfade","[":"fade",z:"zoom",x:"pop-zoom",o:"reorder",";":"decrement-anchor","'":"increment-anchor",n:"normalize"};function z(k){const{area:R,size:P,width:L}=k.scales,G=10/9,H={silent:!0};exports.Expanse.set(R.codomain,N=>({min:N.min*G,max:N.max*G}),H),exports.Expanse.set(P.codomain,N=>({min:N.min*G,max:N.max*G}),H),exports.Expanse.set(L.codomain,N=>N.mult<1?{mult:N.mult*G}:{},H),e.render(k)}e.grow=z;function C(k){const{area:R,size:P,width:L}=k.scales,G=9/10,H={silent:!0};exports.Expanse.set(R.codomain,N=>({min:N.min*G,max:N.max*G}),H),exports.Expanse.set(P.codomain,N=>({min:N.min*G,max:N.max*G}),H),exports.Expanse.set(L.codomain,N=>({mult:N.mult*9/10}),H),e.render(k)}e.shrink=C;function D(k){const{frames:R}=k;for(const P of baseLayers)exports.CanvasFrame.setAlpha(R[P],L=>L*9/10);e.render(k)}e.fade=D;function I(k){const{frames:R}=k;for(const P of baseLayers)exports.CanvasFrame.setAlpha(R[P],L=>L*10/9);e.render(k)}e.unfade=I;function A(k){const{frames:R,scales:P}=k;for(const L of baseLayers)exports.CanvasFrame.resetAlpha(R[L]);for(const L of Object.values(P))exports.Scale.restore(L);k.zoomStack.length=1,e.clearUserFrame(k)}e.reset=A;function w(k){e.setMode(k,"query")}e.setQueryMode=w;function b(k,R){const{scales:P,parameters:L,zoomStack:G}=k;let{coords:H,units:N}=R??{};N=N??"screen";let[q,B,$,j]=H??L.mousecoords;const{x:U,y:W}=P;if(N==="data"){const Q={silent:!0};exports.Scale.set(U,()=>({zero:0,one:1}),Q),exports.Scale.set(W,()=>({zero:0,one:1}),Q),q=exports.Expanse.normalize(U.domain,q),$=exports.Expanse.normalize(U.domain,$),B=exports.Expanse.normalize(W.domain,B),j=exports.Expanse.normalize(W.domain,j)}if(N==="screen"){if(Math.abs($-q)<10||Math.abs(j-B)<10)return;q=trunc(exports.Expanse.normalize(U.codomain,q)),$=trunc(exports.Expanse.normalize(U.codomain,$)),B=trunc(exports.Expanse.normalize(W.codomain,B)),j=trunc(exports.Expanse.normalize(W.codomain,j))}[q,$]=[q,$].sort(diff),[B,j]=[B,j].sort(diff),exports.Scale.expand(P.x,q,$),exports.Scale.expand(P.y,B,j);const V=rangeInverse(q,$),K=rangeInverse(B,j),X=sqrt(max(V,K)),{width:J,height:Z,area:Y,size:re}=P;J.codomain!==Y.codomain&&exports.Expanse.set(J.codomain,Q=>({max:Q.max*V})),Z.codomain!==Y.codomain&&exports.Expanse.set(Z.codomain,Q=>({max:Q.max*K})),exports.Expanse.set(Y.codomain,Q=>({max:Q.max*X})),exports.Expanse.set(re.codomain,Q=>({max:Q.max*X})),G.push([q,B,$,j]),Reactive.dispatch(k,"clear-transient"),e.render(k)}e.zoom=b;function O(k){const{scales:R,zoomStack:P}=k;if(P.length===1)return;const[L,G,H,N]=P[P.length-1],[q,B]=invertRange(L,H),[$,j]=invertRange(G,N);exports.Scale.expand(R.x,q,B),exports.Scale.expand(R.y,$,j);const U=rangeInverse(q,B),W=rangeInverse($,j),V=1/sqrt(max(1/U,1/W)),{width:K,height:X,area:J,size:Z}=R;K.codomain!==J.codomain&&exports.Expanse.set(K.codomain,Y=>({max:Y.max*U})),X.codomain!==J.codomain&&exports.Expanse.set(X.codomain,Y=>({max:Y.max*W})),exports.Expanse.set(J.codomain,Y=>({max:Y.max*V})),exports.Expanse.set(Z.codomain,Y=>({max:Y.max*V})),P.pop(),e.clearUserFrame(k),e.render(k)}e.popZoom=O;function _(k,R){const{x:P,y:L}=k.scales;if(!exports.Expanse.isContinuous(P.domain)||!exports.Expanse.isContinuous(L.domain))throw new Error("Both axes need to be continuous to set a ratio");k.parameters.ratio=R,e.resize(k)}e.setRatio=_;function E(k,R){const{scales:P}=k,{x:L,y:G}=P,H=exports.Scale.unitRatio(L),N=exports.Scale.unitRatio(G)*R,q={default:!0,silent:!0},[B,$]=H<N?[L,G]:[G,L];let j=B===L?H/N:N/H;j=j*exports.Scale.unitRange(B);const[U,W]=[(1-j)/2,(1+j)/2];exports.Scale.set($,()=>({zero:U,one:W}),q)}e.applyRatio=E;function T(k,R){return k.scales[R]}e.getScale=T;function F(k,R,P){if(!Object.keys(k.scales).includes(R))throw new Error(`Unrecognized scale '${R}'`);const L=k.scales[R],G=L.domain,H={default:P.default??!1,unfreeze:P.unfreeze??!1};let{zero:N,one:q}=P;[N,q].some(isDefined)&&(N=N??L.props.zero,q=q??L.props.one,exports.Scale.set(L,()=>({zero:N,one:q}),H),k.parameters.ratio=void 0);let{min:B,max:$}=P;if([B,$].some(isDefined)){if(!exports.Expanse.isContinuous(G))throw new Error("Limits can only be set with a continuous domain");N=isDefined(B)?N??0:L.props.zero,q=isDefined($)?q??1:L.props.one,B=B??G.props.min,$=$??G.props.max,exports.Expanse.set(G,()=>({min:B,max:$}),H),exports.Scale.set(L,()=>({zero:N,one:q}),H),k.parameters.ratio=void 0}const{transformation:j}=P;let{trans:U,inv:W}=j?ExpanseContinuous.transformations[j]:P;if([U,W].some(isDefined)){if(!exports.Expanse.isContinuous(G))throw new Error("Transformations can only be set with a continuous domain");U=U??identity,W=W??identity,exports.Expanse.set(G,()=>({trans:U,inv:W}),H)}const{labels:V}=P;if(V){if(!exports.Expanse.isDiscrete(G))throw new Error("Labels can be ordered with a discrete domain only");if(!stringArraysMatch(G.props.labels,V))throw new Error("Labels must match the scale's labels");const J=orderIndicesByTable(G.props.labels,V);exports.Expanse.reorder(G,J)}let{mult:K,direction:X}=P;X&&exports.Scale.set(L,()=>({direction:X}),H),K&&exports.Scale.set(L,()=>({mult:K}),H)}e.setScale=F})(exports.Plot||(exports.Plot={}));function setupFrames(e,t){const{container:r,frames:o}=e,{margins:l,colors:u,axisLabelSize:d,axisTitleSize:n}=t,[s,a,f,p]=l,c=[7,6,5,4,3,2,1,0],i="tw-absolute tw-top-0 tw-right-0 tw-w-full tw-h-full ";for(const I of c){const A={zIndex:`${7-I+2}`},w=u[I],b={fillStyle:w,strokeStyle:w},O=exports.CanvasFrame.of({classes:i,style:A,context:b,margins:l});o[I]=O}const h=exports.CanvasFrame.of({classes:i});exports.CanvasFrame.setContext(h,{font:`${n}em ${t.axisTitleFont}`,textBaseline:"middle",textAlign:"center"}),DOM.setStyles(h.canvas,{background:t.marginBackground});const g=`calc(100% - ${a}px - ${p}px)`,x=`calc(100% - ${s}px - ${f}px)`,m={width:g,height:x,top:f+"px",right:p+"px"},M=exports.CanvasFrame.of({classes:i+"tw-z-1",style:m});DOM.setStyles(M.canvas,{background:t.plotBackground});const v=exports.CanvasFrame.of({classes:i+"tw-z-10 tw-border tw-border-b-black tw-border-l-black",style:m}),S=exports.CanvasFrame.of({classes:i+"tw-z-10",margins:l});exports.CanvasFrame.setContext(S,{globalAlpha:.06666666666666667});const z="#3B4854",C=exports.CanvasFrame.of({classes:i});exports.CanvasFrame.setContext(C,{fillStyle:z,textBaseline:"top",textAlign:"center",font:`${d}em ${t.axisTextFont}`});const D=exports.CanvasFrame.of({classes:i});exports.CanvasFrame.setContext(D,{fillStyle:"#3B4854",textBaseline:"middle",textAlign:"right",font:`${d}em ${t.axisTextFont}`}),Object.assign(o,{base:h,under:M,over:v,user:S,xAxis:C,yAxis:D});for(let[I,A]of Object.entries(o))isNaN(parseFloat(I))||(I="data-"+I),A.canvas.id=`frame-${I}`,exports.CanvasFrame.append(A,r)}function setupEvents$1(e){const{container:t,parameters:r}=e,{mousecoords:o}=r;for(const[l,u]of Object.entries(exports.Plot.keybindings))Reactive.listen(e,l,()=>Reactive.dispatch(e,u));t.addEventListener("mousedown",l=>{const{locked:u}=r;exports.Plot.activate(e),exports.Plot.setMousedown(e,!0),exports.Plot.setMouseButton(e,l.button),l.button===MouseButton.Left?exports.Plot.setMode(e,"select"):l.button===MouseButton.Right&&exports.Plot.setMode(e,"pan");const d=l.offsetX,n=t.clientHeight-l.offsetY;copyValues([d,n,d,n],o),!u&&r.mode==="select"&&(Reactive.dispatch(e,"clear-transient"),exports.Plot.checkSelection(e)),exports.Plot.unlock(e)}),t.addEventListener("contextmenu",l=>{l.preventDefault(),exports.Plot.setMousedown(e,!0),exports.Plot.setMouseButton(e,MouseButton.Right),exports.Plot.setMode(e,"pan"),o[0]=l.offsetX,o[1]=t.clientHeight-l.offsetY,exports.Plot.clearUserFrame(e)}),t.addEventListener("mouseup",()=>exports.Plot.setMousedown(e,!1)),t.addEventListener("mousemove",throttle(l=>{exports.Plot.mousemoveHandlers[r.mode](e,l)},20)),Reactive.listen(e,"reset",()=>exports.Plot.reset(e)),Reactive.listen(e,"resize",()=>exports.Plot.resize(e)),Reactive.listen(e,"activate",()=>exports.Plot.activate(e)),Reactive.listen(e,"deactivate",()=>exports.Plot.deactivate(e)),Reactive.listen(e,"render",()=>exports.Plot.render(e)),Reactive.listen(e,"lock",()=>exports.Plot.lock(e)),Reactive.listen(e,"unlock",()=>exports.Plot.unlock(e)),Reactive.listen(e,"query-mode",()=>exports.Plot.setMode(e,"query")),Reactive.listen(e,"render-axes",()=>exports.Plot.renderAxes(e)),Reactive.listen(e,"clear-transient",()=>exports.Plot.clearUserFrame(e)),Reactive.listen(e,"get-scale",l=>{if(!(!l||!l.scale))return exports.Plot.getScale(e,l.scale)}),Reactive.listen(e,"set-scale",l=>{!l||!l.scale||exports.Plot.setScale(e,l.scale,l)}),Reactive.listen(e,"grow",()=>exports.Plot.grow(e),{throttle:10}),Reactive.listen(e,"shrink",()=>exports.Plot.shrink(e),{throttle:10}),Reactive.listen(e,"fade",()=>exports.Plot.fade(e),{throttle:10}),Reactive.listen(e,"unfade",()=>exports.Plot.unfade(e),{throttle:10}),Reactive.listen(e,"zoom",l=>exports.Plot.zoom(e,l)),Reactive.listen(e,"pop-zoom",()=>exports.Plot.popZoom(e));for(const l of Object.values(e.scales))Reactive.listen(l,"changed",()=>{exports.Plot.render(e),exports.Plot.renderAxes(e)})}function setupScales(e){const{scales:t}=e,{x:r,y:o,width:l,height:u,size:d,area:n,areaPct:s}=t,a={default:!0,silent:!0},{expandX:f,expandY:p}=defaultOptions;exports.Expanse.set(n.domain,()=>({ratio:!0}),a),exports.Expanse.set(s.domain,()=>({ratio:!0}),a),exports.Expanse.set(d.domain,()=>({ratio:!0}),a),exports.Expanse.set(d.codomain,()=>({trans:square,inv:sqrt}),a),exports.Expanse.set(n.codomain,()=>({trans:square,inv:sqrt}),a),exports.Expanse.set(s.codomain,()=>({trans:square,inv:sqrt}),a),exports.Scale.set(r,()=>({zero:f,one:1-f}),a),exports.Scale.set(o,()=>({zero:p,one:1-p}),a),exports.Scale.set(l,()=>({one:1-2*f}),a),exports.Scale.set(u,()=>({one:1-2*p}),a),exports.Scale.set(n,()=>({one:1-2*Math.max(f,p)}),a);const c=i=>Math.max(i,0);exports.Expanse.set(l.codomain,()=>({inv:c}),a),exports.Expanse.set(u.codomain,()=>({inv:c}),a)}var KeybindingsMenu;(e=>{function t(o){const l=DOM.element("div"),u=DOM.element("div",{id:"modal"}),d=DOM.element("div",{id:"bindings"}),n=DOM.element("button",{textContent:"key bindings"});DOM.addClasses(u,tw("tw-absolute tw-left-0 tw-top-0 tw-z-50 tw-flex tw-size-full tw-flex-col tw-items-center tw-bg-slate-800 tw-bg-opacity-80 tw-p-10")),DOM.addClasses(d,tw("tw-relative tw-flex tw-h-full tw-w-fit tw-flex-col tw-flex-wrap tw-justify-start tw-py-10")),DOM.addClasses(n,tw("tw-absolute tw-right-0 tw-top-0 tw-z-30 tw-select-none tw-rounded-bl-md tw-bg-gray-300 tw-p-1 tw-px-2 tw-text-sm tw-text-white hover:tw-bg-gray-400")),DOM.append(l,u),DOM.append(l,n),DOM.append(u,d),d.style.columnFill="auto",u.style.display="none";let s=!1;function a(){u.style.display="flex"}function f(){s||(u.style.display="none")}n.addEventListener("click",a),u.addEventListener("click",f);for(const[p,c]of Object.entries(o)){const i=DOM.element("span",{classes:tw("tw-m-1 tw-flex tw-flex-row")}),h=DOM.element("button",{textContent:p}),g=DOM.element("div",{classes:tw("tw-m-1 tw-p-1 tw-px-2 tw-text-white"),textContent:capitalize(c.replaceAll("-"," "))});DOM.addClasses(h,tw("tw-m-1 tw-w-8 tw-rounded-md tw-bg-gray-400 tw-p-1 tw-px-2 tw-text-center tw-text-white tw-outline-none hover:tw-bg-gray-500")),DOM.append(i,h),DOM.append(i,g),g.addEventListener("click",m=>m.stopPropagation()),h.addEventListener("click",m=>{s||(m.stopPropagation(),DOM.addClasses(h,tw("text-black bg-slate-200 hover:bg-slate-200")),window.addEventListener("keydown",x),s=!0)});const x=m=>{const{key:M}=m,y=h.innerText;M in o&&M!==y||(r(o,M,c),h.innerText=m.key,DOM.removeClasses(h,tw("tw-text-black tw-bg-slate-200 hover:tw-bg-slate-200")),window.removeEventListener("keydown",x),s=!1)};d.appendChild(i)}return l}e.of=t;function r(o,l,u){let d;for(const[n,s]of Object.entries(o))if(s===u){d=n;break}d&&delete o[d],o[l]=u}})(KeybindingsMenu||(KeybindingsMenu={})),exports.Scene=void 0,(e=>{function t(w,b){Dataframe.checkLength(w);const O=DOM.element("div",{id:"scene-container"}),_=DOM.element("div",{id:"plots-container"});DOM.addClasses(O,tw("tailwind tw-pr-15 tw-relative tw-flex tw-h-full tw-w-full tw-content-center tw-items-center tw-justify-center tw-bg-[#deded9] tw-p-10")),DOM.addClasses(_,tw("tw-grid tw-h-full tw-w-full tw-grid-cols-1 tw-grid-rows-1 tw-gap-[1em]"));const E=DOM.element("table",{classes:tw("tw-absolute tw-w-fit tw-h-fit tw-z-30 tw-bg-gray-100 tw-shadow-md")});DOM.setStyles(E,{pointerEvents:"none"});const T={...e.keybindings,...exports.Plot.keybindings},F=KeybindingsMenu.of(T);DOM.append(O,_),DOM.append(O,F),DOM.append(O,E);const[k,R,P]=[1,1,!1],L=Marker.of(Object.values(w)[0].length),G=[],H={},N=void 0,q=(b==null?void 0:b.echo)??!1,B=Object.assign(defaultOptions,b);for(const[j,U]of Object.entries(w))Metadata.hasMetadata(U)||(w[j]=Metadata.of(U)),Metadata.has(U,"name")||Metadata.set(U,{name:j});const $=Reactive.of()({data:w,container:O,plotsContainer:_,queryTable:E,rows:k,cols:R,active:P,echo:q,marker:L,client:N,plots:G,plotIndicesByType:H,options:B,keybindings:T});if(b!=null&&b.websocketURL){const j=new WebSocket(b.websocketURL),U={sender:"scene",target:"server",type:"connected"};j.addEventListener("open",()=>j.send(JSON.stringify(U))),j.addEventListener("message",W=>{m($,JSON.parse(W.data))}),window.addEventListener("beforeunload",()=>j.close()),$.client=j}return setupEvents($),$}e.of=t;async function r(w,b){const O=await fetchJSON(w);return e.of(O,b)}e.ofAsync=r;function o(w,b){const O=DOM.element("div",{id:"css-inheritance-barrier"});DOM.append(O,b.container),DOM.append(w,O),DOM.setStyles(O,{all:"revert",width:"100%",height:"100%"}),e.resize(b)}e.append=o;function l(w,b){const{plotsContainer:O,marker:_,plots:E,plotIndicesByType:T}=w;Reactive.listen(b,"activated",()=>{for(const R of E)R!=b&&Reactive.dispatch(R,"deactivate");const k=E.indexOf(b);w.activePlotIndex=k}),Reactive.listen(b,"lock-others",()=>{for(const k of E)k!==b&&(exports.Plot.clearUserFrame(k),Reactive.dispatch(k,"lock"))}),Reactive.listen(b,"set-selected",k=>{Marker.update(_,k.cases)}),Reactive.listen(b,"clear-transient",()=>{for(const k of E)exports.Plot.clearUserFrame(k);Marker.clearTransient(_)}),Reactive.listen(b,"render-all",()=>{for(const k of E)Reactive.dispatch(k,"render")});const{type:F}=b;T[F]||(T[F]=[]),T[F].push(E.length),E.push(b),exports.Plot.append(O,b),b.queryTable=w.queryTable,d(w),i(w),e.resize(w)}e.addPlot=l;function u(w,b){const{type:O,variables:_,reducer:E,queries:T}=b??{};if(!O||O==="unknown"||!_)return;for(const P of _)if(!Object.keys(w.data).includes(P))throw new Error(`Variable '${P}' is not present in the data`);const F=keysToSelectors(_),k={};if(k.ratio=b==null?void 0:b.ratio,E&&(k.reducer=exports.Reducer.parse(E)),T)if(isStringArray(T))k.queries=keysToSelectors(T);else{const P=L=>T.map(([G,H])=>[L[G],exports.Reducer.parse(H)]);k.queries=P}const R=exports.Plot[O](w,F,k);e.addPlot(w,R)}e.addPlotBySpec=u;function d(w){for(let b=0;b<w.plots.length;b++)w.plots[b].container.id=`plot${b+1}`}function n(w){const b=last(w.plots);b&&a(w,b)}e.popPlot=n;function s(w,b){const O=c(w,b);O&&a(w,O)}e.removePlot=s;function a(w,b){const{plots:O,plotIndicesByType:_,plotsContainer:E}=w,T=O.indexOf(b);for(const F of Object.values(_))if(F.indexOf(T)!==-1){remove(F,T);break}remove(O,b),E.removeChild(b.container),Reactive.removeAllListeners(b),d(w),i(w),e.resize(w)}function f(w,b){return b==="scene"?w:c(w,b)}e.getTarget=f;function p(w){const b={},O=[];for(const _ of w.plots){const{type:E}=_;b[E]===void 0&&(b[E]=0),O.push(`${E}${b[E]}`),b[E]++}return O}e.getPlotIds=p;function c(w,b){const{plots:O,plotIndicesByType:_}=w;let[E,T]=splitNumericSuffix(b);const F=parseInt(T,10)-1;if(E==="plot"||E==="p")return O[F];if(E=E.replace("plot","").replace("gram",""),E in Object.keys(plotIdShort)&&(E=plotIdShort[E]),E in _)return O[_[E][F]]}e.getPlot=c;function i(w){const{plots:b}=w;if(b.length===0)return;const O=Math.ceil(Math.sqrt(b.length)),_=Math.ceil(b.length/O);e.setDimensions(w,_,O)}function h(w,b,O){const{plotsContainer:_}=w;w.rows=b,w.cols=O;const E=Array(b).fill("1fr").join(" "),T=Array(O).fill("1fr").join(" ");DOM.setStyles(_,{gridTemplateRows:E,gridTemplateColumns:T}),e.resize(w)}e.setDimensions=h;function g(w,b){const{plotsContainer:O,plots:_}=w,E=new Set(b.flat()),T=new Set(seq(0,_.length-1));for(const H of E)T.delete(H);T.size>0&&alert("Warning: Some plots are not included in the layout and will be hidden.");for(let H=0;H<_.length;H++)DOM.setStyles(_[H].container,{gridArea:`plot${H}`});let k="";for(const H of b)k+=`"${H.map(N=>`plot${N}`).join(" ")}" `;const[R,P]=[b.length,b[0].length],L=Array(R).fill("1fr").join(" "),G=Array(P).fill("1fr").join(" ");DOM.setStyles(O,{gridTemplateAreas:k,gridTemplateRows:L,gridTemplateColumns:G}),e.resize(w)}e.setLayout=g;function x(w){const{plotsContainer:b,plots:O}=w;DOM.setStyles(b,{gridTemplateAreas:""});for(const _ of O)DOM.setStyles(_.container,{gridArea:"auto"});i(w)}e.clearLayout=x;function m(w,b){const{echo:O}=w;O&&console.log(`Scene recieved message: "${JSON.stringify(b)}"`);const{target:_,data:E}=b,T=b.type,F=f(w,_);F&&T&&Reactive.dispatch(F,T,E)}e.handleMessage=m;function M(w,b,O){const[_,E]=["scene","server"],T=JSON.stringify({sender:_,target:E,type:b,data:O}),{client:F,echo:k}=w;F&&(k&&console.log(`Scene sent message: "${T}"`),F.send(T))}e.sendMessage=M;function y(w,b){const{container:O}=w;let{fontSize:_}=b??{};if(!_){const{clientWidth:E,clientHeight:T}=O,F=Math.min(E,T)/100;_=Math.min(Math.max(8,3*F),16)}DOM.setStyles(O,{fontSize:_+"px"});for(const E of w.plots)Reactive.dispatch(E,"resize")}e.resize=y;function v(w){for(const b of w.plots)exports.Plot.render(b)}e.render=v;function S(w){for(const b of w.plots)Reactive.dispatch(b,"reset");Marker.clearTransient(w.marker)}e.reset=S;function z(w){for(const b of w.plots)Reactive.dispatch(b,"query-mode")}e.setQueryMode=z;function C(w){Marker.setGroup(w.marker,Group.First)}e.setGroupFirst=C;function D(w){Marker.setGroup(w.marker,Group.Second)}e.setGroupSecond=D;function I(w){Marker.setGroup(w.marker,Group.Third)}e.setGroupThird=I,e.keybindings={r:"reset",q:"query-mode",1:"group-1",2:"group-2",3:"group-3"};function A(w,b){exports.Reducer.registerReducer(b)}e.registerReducer=A})(exports.Scene||(exports.Scene={}));function setupEvents(e){const{marker:t,plots:r,container:o,plotsContainer:l,keybindings:u,queryTable:d}=e;document.addEventListener("load",()=>{exports.Scene.resize(e),exports.Scene.render(e)}),document.addEventListener("visibilitychange",()=>{document.hidden||(exports.Scene.resize(e),exports.Scene.render(e))}),window.addEventListener("mousedown",n=>{o.contains(n.target)?e.active=!0:e.active=!1}),o.addEventListener("mousedown",n=>{if(n.target===o)for(const s of r)Reactive.dispatch(s,"deactivate")}),o.addEventListener("dblclick",()=>{for(const n of r)Reactive.dispatch(n,"deactivate"),exports.CanvasFrame.clear(n.frames.user);Marker.clearAll(e.marker),e.activePlotIndex=void 0}),l.addEventListener("mousemove",throttle(n=>{const{clientWidth:s,clientHeight:a}=l,{clientWidth:f,clientHeight:p}=d;let{offsetX:c,offsetY:i}=n,h=n.target;for(;h!==l;){if(h===null)return;c+=h.offsetLeft,i+=h.offsetTop,h=h.parentElement}let[g,x]=[c+2,i+2];c+f>s&&(g=g-f-4),i+p>a&&(x=x-p-4),DOM.setStyles(d,{left:g+"px",top:x+"px"})},20)),window.addEventListener("keydown",n=>{const s=u[n.key],{active:a,activePlotIndex:f}=e;if(!(!s||!a)){if(f!==void 0){const p=r[f];Reactive.dispatch(p,s)}Reactive.dispatch(e,s)}}),window.addEventListener("keyup",()=>{Marker.setGroup(t,Transient);for(const n of e.plots)n.parameters.mode="select",DOM.setStyles(d,{display:"none"})}),window.addEventListener("resize",throttle(()=>exports.Scene.resize(e),10)),Reactive.listen(t,"cleared",()=>{for(const n of r)Reactive.dispatch(n,"unlock")}),Reactive.listen(e,"resize",()=>exports.Scene.resize(e)),Reactive.listen(e,"reset",()=>exports.Scene.reset(e)),Reactive.listen(e,"query-mode",()=>exports.Scene.setQueryMode(e)),Reactive.listen(e,"group-1",()=>exports.Scene.setGroupFirst(e)),Reactive.listen(e,"group-2",()=>exports.Scene.setGroupSecond(e)),Reactive.listen(e,"group-3",()=>exports.Scene.setGroupThird(e)),Reactive.listen(e,"connected",()=>{var n;return console.log(`Connected to Websocket server on: ${(n=e.client)==null?void 0:n.url}`)}),Reactive.listen(e,"set-dims",n=>{!n||!n.rows||!n.columns||exports.Scene.setDimensions(e,n.rows,n.cols)}),Reactive.listen(e,"get-plot-ids",()=>{const n=exports.Scene.getPlotIds(e);exports.Scene.sendMessage(e,"get-plot-ids",{ids:n})}),Reactive.listen(e,"add-plot",n=>{n&&exports.Scene.addPlotBySpec(e,n)}),Reactive.listen(e,"get-plot",n=>{!n||n.id}),Reactive.listen(e,"pop-plot",()=>exports.Scene.popPlot(e)),Reactive.listen(e,"remove-plot",n=>{!n||!n.id||exports.Scene.removePlot(e,n.id)}),Reactive.listen(e,"set-selected",n=>{!n||!n.cases||Marker.update(t,n.cases)}),Reactive.listen(e,"set-assigned",n=>{if(!n||!n.group)return;const s=7-Math.min(n.group,3);Marker.update(t,n.cases,{group:s})}),Reactive.listen(e,"get-selected",()=>{const n=filterIndices(Array.from(t.indices),Marker.isTransient);exports.Scene.sendMessage(e,"get-selected",{cases:n})}),Reactive.listen(e,"get-assigned",n=>{if(!n||!n.group)return;const s=f=>(f|4)===7-Math.min(n.group,3),a=filterIndices(Array.from(t.indices),s);exports.Scene.sendMessage(e,"get-assigned",{cases:a,group:n.group})}),Reactive.listen(e,"clear-selection",()=>Marker.clearAll(t)),Reactive.listen(e,"get-scale",n=>{if(!n||!n.id||!n.scale)return;const s=exports.Scene.getPlot(e,n.id);if(!s)return;const a={...exports.Plot.getScale(s,n.scale)};deepModifyProp(a,"trans",stringifyFunction),deepModifyProp(a,"inv",stringifyFunction),exports.Scene.sendMessage(e,"get-scale",{scale:a})}),Reactive.listen(e,"set-scale",n=>{if(!n||!n.id)return;const s=exports.Scene.getPlot(e,n.id);s&&Reactive.dispatch(s,"set-scale",n)}),Reactive.listen(e,"normalize",n=>{if(!n||!n.id)return;const s=exports.Scene.getPlot(e,n.id);s&&Reactive.dispatch(s,"normalize")}),Reactive.listen(e,"zoom",n=>{if(!n||!n.id)return;const s=exports.Scene.getPlot(e,n.id);s&&Reactive.dispatch(s,"zoom",n)}),Reactive.listen(e,"set-layout",n=>{!n||!n.layout||exports.Scene.setLayout(e,n.layout)}),Reactive.listen(e,"set-parameters",n=>{if(!n||!n.id)return;const s=exports.Scene.getPlot(e,n.id);s&&Reactive.dispatch(s,"set-parameters",n)}),Reactive.listen(e,"clear-layout",()=>exports.Scene.clearLayout(e))}const plotIdShort={s:"scatter",b:"bar",bb:"bibar",h:"histo",f:"fluct",hh:"histo2d",pc:"pcoords"};var Indexable;return(e=>{function t(r){return isSerializable(r)?structuredClone(r):r}e.clone=t})(Indexable||(Indexable={})),exports.Reduce=void 0,(e=>{function t(r){const o=Indexable.clone(r);return Metadata.copy(r,o),Metadata.set(o,{reducer:exports.Reducer.sum}),o}e.sum=t})(exports.Reduce||(exports.Reduce={})),exports.METHODS=METHODS,exports.addIndexed=addIndexed,exports.addTailwind=addTailwind,exports.applyDirection=applyDirection,exports.applyWith=applyWith,exports.areNumberArrays=areNumberArrays,exports.bimap=bimap,exports.binBreaks=binBreaks,exports.call=call,exports.capitalize=capitalize,exports.compareAlphaNumeric=compareAlphaNumeric,exports.convertToSuperscript=convertToSuperscript,exports.copyProps=copyProps,exports.copyValues=copyValues,exports.cumsum=cumsum,exports.cycles=cycles,exports.dec=dec,exports.deepModifyProp=deepModifyProp,exports.diff=diff,exports.exp10=exp10,exports.exponentialToSuperscript=exponentialToSuperscript,exports.fetchJSON=fetchJSON,exports.filterIndices=filterIndices,exports.formatAxisLabels=formatAxisLabels,exports.formatLabel=formatLabel,exports.formatText=formatText,exports.identity=identity,exports.inc=inc,exports.invertRange=invertRange,exports.isCanvas=isCanvas,exports.isDefined=isDefined,exports.isEventTarget=isEventTarget,exports.isFunction=isFunction,exports.isIntegerString=isIntegerString,exports.isNumber=isNumber,exports.isNumberArray=isNumberArray,exports.isObject=isObject,exports.isPrimitive=isPrimitive,exports.isSerializable=isSerializable,exports.isString=isString,exports.isStringArray=isStringArray,exports.isTypedArray=isTypedArray,exports.just=just,exports.keysToSelectors=keysToSelectors,exports.last=last,exports.log10=log10,exports.max=max,exports.merge=merge,exports.minDecimal=minDecimal,exports.minmax=minmax,exports.one=one,exports.orderBy=orderBy,exports.orderIndices=orderIndices,exports.orderIndicesByTable=orderIndicesByTable,exports.ordered=ordered,exports.permuteWithCycles=permuteWithCycles,exports.pointInRect=pointInRect,exports.prettyBreaks=prettyBreaks,exports.prod=prod,exports.randomInteger=randomInteger,exports.rangeInverse=rangeInverse,exports.rectSegmentIntersect=rectSegmentIntersect,exports.rectsIntersect=rectsIntersect,exports.remove=remove,exports.removeTailwind=removeTailwind,exports.rep=rep,exports.round=round,exports.row=row,exports.segmentsIntersect=segmentsIntersect,exports.selector=selector,exports.seq=seq,exports.seqLength=seqLength,exports.splitNumericSuffix=splitNumericSuffix,exports.sqrt=sqrt,exports.square=square,exports.stringArraysMatch=stringArraysMatch,exports.stringifyFunction=stringifyFunction,exports.stripWS=stripWS,exports.subset=subset,exports.sum=sum,exports.swap=swap,exports.throttle=throttle,exports.timeExecution=timeExecution,exports.toLowerCase=toLowerCase,exports.toUpperCase=toUpperCase,exports.trunc=trunc,exports.tw=tw,exports.uniqueIntegers=uniqueIntegers,exports.zero=zero,Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),exports}({});
