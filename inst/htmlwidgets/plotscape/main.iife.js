var plotscape=function(a){"use strict";var Ne=document.createElement("style");Ne.textContent=`*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.left-0{left:0}.right-0{right:0}.top-0{top:0}.z-0{z-index:0}.z-10{z-index:10}.z-30{z-index:30}.z-50{z-index:50}.m-1{margin:.25rem}.mb-6{margin-bottom:1.5rem}.ml-2{margin-left:.5rem}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.grid{display:grid}.hidden{display:none}.size-full{width:100%;height:100%}.h-5\\/6{height:83.333333%}.h-full{height:100%}.h-screen{height:100vh}.w-5\\/6{width:83.333333%}.w-8{width:2rem}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.shrink{flex-shrink:1}.grow{flex-grow:1}.resize{resize:both}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-rows-1{grid-template-rows:repeat(1,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.content-center{align-content:center}.items-center{align-items:center}.justify-center{justify-content:center}.gap-5{gap:1.25rem}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.rounded-bl-md{border-bottom-left-radius:.375rem}.border{border-width:1px}.border-gray-400{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity))}.border-b-black{--tw-border-opacity: 1;border-bottom-color:rgb(0 0 0 / var(--tw-border-opacity))}.border-l-black{--tw-border-opacity: 1;border-left-color:rgb(0 0 0 / var(--tw-border-opacity))}.bg-\\[\\#deded9\\]{--tw-bg-opacity: 1;background-color:rgb(222 222 217 / var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.bg-gray-300{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity))}.bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.bg-slate-200{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity))}.bg-slate-800{--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-opacity-80{--tw-bg-opacity: .8}.p-1{padding:.25rem}.p-10{padding:2.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-bold{font-weight:700}.uppercase{text-transform:uppercase}.lowercase{text-transform:lowercase}.capitalize{text-transform:capitalize}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.outline-2{outline-width:2px}.outline-slate-600{outline-color:#475569}.drop-shadow-md{--tw-drop-shadow: drop-shadow(0 4px 3px rgb(0 0 0 / .07)) drop-shadow(0 2px 2px rgb(0 0 0 / .06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:bg-gray-400:hover{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.hover\\:bg-gray-500:hover{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity))}.hover\\:bg-slate-200:hover{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity))}
`,document.head.appendChild(Ne);function Ut(t){"@babel/helpers - typeof";return Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ut(t)}var pn=/^\s+/,zn=/\s+$/;function L(t,n){if(t=t||"",n=n||{},t instanceof L)return t;if(!(this instanceof L))return new L(t,n);var e=Mn(t);this._originalInput=t,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||e.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=e.ok}L.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),e,i,o,r,g,c;return e=n.r/255,i=n.g/255,o=n.b/255,e<=.03928?r=e/12.92:r=Math.pow((e+.055)/1.055,2.4),i<=.03928?g=i/12.92:g=Math.pow((i+.055)/1.055,2.4),o<=.03928?c=o/12.92:c=Math.pow((o+.055)/1.055,2.4),.2126*r+.7152*g+.0722*c},setAlpha:function(n){return this._a=De(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=Te(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=Te(this._r,this._g,this._b),e=Math.round(n.h*360),i=Math.round(n.s*100),o=Math.round(n.v*100);return this._a==1?"hsv("+e+", "+i+"%, "+o+"%)":"hsva("+e+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var n=Le(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=Le(this._r,this._g,this._b),e=Math.round(n.h*360),i=Math.round(n.s*100),o=Math.round(n.l*100);return this._a==1?"hsl("+e+", "+i+"%, "+o+"%)":"hsla("+e+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(n){return Ce(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return xn(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(K(this._r,255)*100)+"%",g:Math.round(K(this._g,255)*100)+"%",b:Math.round(K(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(K(this._r,255)*100)+"%, "+Math.round(K(this._g,255)*100)+"%, "+Math.round(K(this._b,255)*100)+"%)":"rgba("+Math.round(K(this._r,255)*100)+"%, "+Math.round(K(this._g,255)*100)+"%, "+Math.round(K(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:jn[Ce(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var e="#"+Re(this._r,this._g,this._b,this._a),i=e,o=this._gradientType?"GradientType = 1, ":"";if(n){var r=L(n);i="#"+Re(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+e+",endColorstr="+i+")"},toString:function(n){var e=!!n;n=n||this._format;var i=!1,o=this._a<1&&this._a>=0,r=!e&&o&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return r?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(i=this.toRgbString()),n==="prgb"&&(i=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(i=this.toHexString()),n==="hex3"&&(i=this.toHexString(!0)),n==="hex4"&&(i=this.toHex8String(!0)),n==="hex8"&&(i=this.toHex8String()),n==="name"&&(i=this.toName()),n==="hsl"&&(i=this.toHslString()),n==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return L(this.toString())},_applyModification:function(n,e){var i=n.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Tn,arguments)},brighten:function(){return this._applyModification(Cn,arguments)},darken:function(){return this._applyModification(Rn,arguments)},desaturate:function(){return this._applyModification(Pn,arguments)},saturate:function(){return this._applyModification(Nn,arguments)},greyscale:function(){return this._applyModification(Ln,arguments)},spin:function(){return this._applyModification(Fn,arguments)},_applyCombination:function(n,e){return n.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(On,arguments)},complement:function(){return this._applyCombination(Dn,arguments)},monochromatic:function(){return this._applyCombination(qn,arguments)},splitcomplement:function(){return this._applyCombination(In,arguments)},triad:function(){return this._applyCombination(Fe,[3])},tetrad:function(){return this._applyCombination(Fe,[4])}},L.fromRatio=function(t,n){if(Ut(t)=="object"){var e={};for(var i in t)t.hasOwnProperty(i)&&(i==="a"?e[i]=t[i]:e[i]=Dt(t[i]));t=e}return L(t,n)};function Mn(t){var n={r:0,g:0,b:0},e=1,i=null,o=null,r=null,g=!1,c=!1;return typeof t=="string"&&(t=Wn(t)),Ut(t)=="object"&&(wt(t.r)&&wt(t.g)&&wt(t.b)?(n=An(t.r,t.g,t.b),g=!0,c=String(t.r).substr(-1)==="%"?"prgb":"rgb"):wt(t.h)&&wt(t.s)&&wt(t.v)?(i=Dt(t.s),o=Dt(t.v),n=_n(t.h,i,o),g=!0,c="hsv"):wt(t.h)&&wt(t.s)&&wt(t.l)&&(i=Dt(t.s),r=Dt(t.l),n=En(t.h,i,r),g=!0,c="hsl"),t.hasOwnProperty("a")&&(e=t.a)),e=De(e),{ok:g,format:t.format||c,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:e}}function An(t,n,e){return{r:K(t,255)*255,g:K(n,255)*255,b:K(e,255)*255}}function Le(t,n,e){t=K(t,255),n=K(n,255),e=K(e,255);var i=Math.max(t,n,e),o=Math.min(t,n,e),r,g,c=(i+o)/2;if(i==o)r=g=0;else{var w=i-o;switch(g=c>.5?w/(2-i-o):w/(i+o),i){case t:r=(n-e)/w+(n<e?6:0);break;case n:r=(e-t)/w+2;break;case e:r=(t-n)/w+4;break}r/=6}return{h:r,s:g,l:c}}function En(t,n,e){var i,o,r;t=K(t,360),n=K(n,100),e=K(e,100);function g(u,m,s){return s<0&&(s+=1),s>1&&(s-=1),s<.16666666666666666?u+(m-u)*6*s:s<.5?m:s<.6666666666666666?u+(m-u)*(.6666666666666666-s)*6:u}if(n===0)i=o=r=e;else{var c=e<.5?e*(1+n):e+n-e*n,w=2*e-c;i=g(w,c,t+.3333333333333333),o=g(w,c,t),r=g(w,c,t-.3333333333333333)}return{r:i*255,g:o*255,b:r*255}}function Te(t,n,e){t=K(t,255),n=K(n,255),e=K(e,255);var i=Math.max(t,n,e),o=Math.min(t,n,e),r,g,c=i,w=i-o;if(g=i===0?0:w/i,i==o)r=0;else{switch(i){case t:r=(n-e)/w+(n<e?6:0);break;case n:r=(e-t)/w+2;break;case e:r=(t-n)/w+4;break}r/=6}return{h:r,s:g,v:c}}function _n(t,n,e){t=K(t,360)*6,n=K(n,100),e=K(e,100);var i=Math.floor(t),o=t-i,r=e*(1-n),g=e*(1-o*n),c=e*(1-(1-o)*n),w=i%6,u=[e,g,r,r,c,e][w],m=[c,e,e,g,r,r][w],s=[r,r,c,e,e,g][w];return{r:u*255,g:m*255,b:s*255}}function Ce(t,n,e,i){var o=[dt(Math.round(t).toString(16)),dt(Math.round(n).toString(16)),dt(Math.round(e).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function xn(t,n,e,i,o){var r=[dt(Math.round(t).toString(16)),dt(Math.round(n).toString(16)),dt(Math.round(e).toString(16)),dt(Ie(i))];return o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function Re(t,n,e,i){var o=[dt(Ie(i)),dt(Math.round(t).toString(16)),dt(Math.round(n).toString(16)),dt(Math.round(e).toString(16))];return o.join("")}L.equals=function(t,n){return!t||!n?!1:L(t).toRgbString()==L(n).toRgbString()},L.random=function(){return L.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Pn(t,n){n=n===0?0:n||10;var e=L(t).toHsl();return e.s-=n/100,e.s=Xt(e.s),L(e)}function Nn(t,n){n=n===0?0:n||10;var e=L(t).toHsl();return e.s+=n/100,e.s=Xt(e.s),L(e)}function Ln(t){return L(t).desaturate(100)}function Tn(t,n){n=n===0?0:n||10;var e=L(t).toHsl();return e.l+=n/100,e.l=Xt(e.l),L(e)}function Cn(t,n){n=n===0?0:n||10;var e=L(t).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(n/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(n/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(n/100)))),L(e)}function Rn(t,n){n=n===0?0:n||10;var e=L(t).toHsl();return e.l-=n/100,e.l=Xt(e.l),L(e)}function Fn(t,n){var e=L(t).toHsl(),i=(e.h+n)%360;return e.h=i<0?360+i:i,L(e)}function Dn(t){var n=L(t).toHsl();return n.h=(n.h+180)%360,L(n)}function Fe(t,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var e=L(t).toHsl(),i=[L(t)],o=360/n,r=1;r<n;r++)i.push(L({h:(e.h+r*o)%360,s:e.s,l:e.l}));return i}function In(t){var n=L(t).toHsl(),e=n.h;return[L(t),L({h:(e+72)%360,s:n.s,l:n.l}),L({h:(e+216)%360,s:n.s,l:n.l})]}function On(t,n,e){n=n||6,e=e||30;var i=L(t).toHsl(),o=360/e,r=[L(t)];for(i.h=(i.h-(o*n>>1)+720)%360;--n;)i.h=(i.h+o)%360,r.push(L(i));return r}function qn(t,n){n=n||6;for(var e=L(t).toHsv(),i=e.h,o=e.s,r=e.v,g=[],c=1/n;n--;)g.push(L({h:i,s:o,v:r})),r=(r+c)%1;return g}L.mix=function(t,n,e){e=e===0?0:e||50;var i=L(t).toRgb(),o=L(n).toRgb(),r=e/100,g={r:(o.r-i.r)*r+i.r,g:(o.g-i.g)*r+i.g,b:(o.b-i.b)*r+i.b,a:(o.a-i.a)*r+i.a};return L(g)},L.readability=function(t,n){var e=L(t),i=L(n);return(Math.max(e.getLuminance(),i.getLuminance())+.05)/(Math.min(e.getLuminance(),i.getLuminance())+.05)},L.isReadable=function(t,n,e){var i=L.readability(t,n),o,r;switch(r=!1,o=Un(e),o.level+o.size){case"AAsmall":case"AAAlarge":r=i>=4.5;break;case"AAlarge":r=i>=3;break;case"AAAsmall":r=i>=7;break}return r},L.mostReadable=function(t,n,e){var i=null,o=0,r,g,c,w;e=e||{},g=e.includeFallbackColors,c=e.level,w=e.size;for(var u=0;u<n.length;u++)r=L.readability(t,n[u]),r>o&&(o=r,i=L(n[u]));return L.isReadable(t,i,{level:c,size:w})||!g?i:(e.includeFallbackColors=!1,L.mostReadable(t,["#fff","#000"],e))};var se=L.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},jn=L.hexNames=Hn(se);function Hn(t){var n={};for(var e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}function De(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function K(t,n){$n(t)&&(t="100%");var e=Bn(t);return t=Math.min(n,Math.max(0,parseFloat(t))),e&&(t=parseInt(t*n,10)/100),Math.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function Xt(t){return Math.min(1,Math.max(0,t))}function ut(t){return parseInt(t,16)}function $n(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function Bn(t){return typeof t=="string"&&t.indexOf("%")!=-1}function dt(t){return t.length==1?"0"+t:""+t}function Dt(t){return t<=1&&(t=t*100+"%"),t}function Ie(t){return Math.round(parseFloat(t)*255).toString(16)}function Oe(t){return ut(t)/255}var ht=function(){var t="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",e="(?:"+n+")|(?:"+t+")",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",o="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function wt(t){return!!ht.CSS_UNIT.exec(t)}function Wn(t){t=t.replace(pn,"").replace(zn,"").toLowerCase();var n=!1;if(se[t])t=se[t],n=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=ht.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=ht.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=ht.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=ht.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=ht.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=ht.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=ht.hex8.exec(t))?{r:ut(e[1]),g:ut(e[2]),b:ut(e[3]),a:Oe(e[4]),format:n?"name":"hex8"}:(e=ht.hex6.exec(t))?{r:ut(e[1]),g:ut(e[2]),b:ut(e[3]),format:n?"name":"hex"}:(e=ht.hex4.exec(t))?{r:ut(e[1]+""+e[1]),g:ut(e[2]+""+e[2]),b:ut(e[3]+""+e[3]),a:Oe(e[4]+""+e[4]),format:n?"name":"hex8"}:(e=ht.hex3.exec(t))?{r:ut(e[1]+""+e[1]),g:ut(e[2]+""+e[2]),b:ut(e[3]+""+e[3]),format:n?"name":"hex"}:!1}function Un(t){var n,e;return t=t||{level:"AA",size:"small"},n=(t.level||"AA").toUpperCase(),e=(t.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),e!=="small"&&e!=="large"&&(e="small"),{level:n,size:e}}const mt={radius:5,expandX:.1,expandY:.1,gapPct:.8,gapPx:1,axisLabelFontsize:1,axisTitleFontsize:1.5,marginLines:[3.5,3.5,1,1],groupColors:["#984ea3","#e41a1c","#4daf4a","#377eb8"],plotBackground:"#fefffe"},le=[];for(const t of mt.groupColors){const n=L(t).darken(10).saturate(20).toString();le.push(n)}for(const t of mt.groupColors){const n=L(t).lighten(20).saturate(20).toString();le.push(n)}const Pt=Symbol("name"),ue=Symbol("length"),Yt=Symbol("min"),Qt=Symbol("max"),fe=Symbol("queryable"),Xn=Symbol("parentValues"),Kt={name:Pt,length:ue,min:Yt,max:Qt,queryable:fe,parent:Xn};var _;(t=>{function n(l,f,y){const d=y??Object.keys(Kt);for(const b of d)f[Kt[b]]=l[Kt[b]]}t.copy=n;function e(l,f){return!!l[Kt[f]]}t.has=e;function i(l){return!!l[Pt]}t.hasName=i;function o(l){return l[Pt]??"unknown"}t.getName=o;function r(l,f){l[Pt]=f}t.setName=r;function g(l,f){f[Pt]=l[Pt]}t.copyName=g;function c(l){return at(l)?l.length:l[ue]}t.getLength=c;function w(l,f){l[ue]=f}t.setLength=w;function u(l){return!!l[Yt]&&!!l[Qt]}t.hasMinMax=u;function m(l){return u(l)?[l[Yt],l[Qt]]:void 0}t.getMinMax=m;function s(l,f,y){l[Yt]=f,l[Qt]=y}t.setMinMax=s;function h(l){return l[fe]}t.isQueryable=h;function v(l,f){l[fe]=f}t.setQueryable=v})(_||(_={}));var yt;(t=>{function n(r){if(typeof r=="function")return r;if(at(r)){const g=c=>r[c];return _.setLength(g,r.length),g}else return()=>r}t.of=n;function e(r){return()=>r}t.constant=e;function i(r,g){const c=t.of(r),w=u=>c(g[u]);return _.copy(r,w),_.setLength(w,g.length),w}t.proxy=i;function o(r){const g=r.map(t.of),c=w=>g.map(u=>u(w));return _.setLength(c,_.getLength(r[0])),c}t.multi=o})(yt||(yt={}));function Vt(t){return t}const de=t=>()=>t,vt=de(0),kt=de(1);function Yn(t){return t+1}function Qn(t){return t-1}function Kn(t){return t()}function he(t){return t**2}const It=Math.sqrt,Vn=Math.log10;function Zn(t){return 10**t}const Ot=Math.max;function gt(t,n){return t-n}function Jn(t,n){return t+n}function Gn(t,n){return t*n}function zt(t,n=0,e=1){return Math.min(Math.max(t,n),e)}function Nt(t,n){return 1/(n-t)}function Zt(t,n){const e=Nt(t,n);return[-t*e,e-t*e]}function qt(t,n=0){return Math.round(t*10**n)/10**n}function Lt(t,n){return t.localeCompare(n,"en",{numeric:!0})}function qe(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ta(t){return t.toLocaleLowerCase()}function ea(t){return t.toLocaleUpperCase()}function na(t){return t.replace(/\s/g,"")}function Mt(t){return t[t.length-1]}function aa(t,n){return Array(n).fill(t)}function ra(t,n,e){const i=Math.abs(n-t);e=e??Math.ceil(i)+1;const o=i/(e-1),r=n>=t?1:-1;return Array.from(Array(e),(g,c)=>t+r*o*c)}function St(t,n){const e=Array(n.length);for(let i=0;i<n.length;i++)e[i]=t[n[i]];return e}function Tt(t,n){t.splice(t.indexOf(n),1)}function At(t,n){const e=Array(n.length);for(let i=0;i<n.length;i++)e[n[i]]=t[i];return e}function je(t){const n=t.toSorted(gt),e={},i={};for(let o=0;o<n.length;o++){const r=t[o];i[r]=i[r]+1||0,e[o]=n.indexOf(r)+i[r]}return Object.values(e)}function ia(t,n){const e=Array(t.length);for(let i=0;i<t.length;i++)e[i]=t[n[i]];for(let i=0;i<t.length;i++)t[i]=e[i]}function He(t,n){const e=Array(t.length);for(let i=0;i<t.length;i++)e[i]=n.indexOf(t[i]);return e}function Et(t){let[n,e]=[1/0,-1/0];for(let i=0;i<t.length;i++)n=Math.min(n,t[i]),e=Math.max(e,t[i]);return[n,e]}function _t(t){const n=Array(t.length);n[0]=t[0];for(let e=1;e<t.length;e++)n[e]=t[e]+n[e-1];return n}function me(t,n){return Math.floor(t+Math.random()*n)}function oa(t,n,e=n-t){const i=n-t,o=[],r=new Set;for(;o.length<Math.min(e,i);){let g=me(t,n);for(;r.has(g);)g=me(t,n);o.push(g),r.add(g)}return o}async function ca(t){return await(await fetch(t)).json()}function $e(t,n){return{...t,...n}}function Z(t,n){if(t!==n){n.length=0;for(let e=0;e<t.length;e++)n.push(t[e])}}function ge(t,n){for(const[e,i]of Object.entries(t))at(i)&&at(t[e])?Z(i,t[e]):n[e]=i}function Ct(t,n){return .5*(1-n)+n*t}function Be(t,n,e=4){const i=(n-t)/e,o=Math.floor(Math.log10(i)),r=[1,2,4,5,10];let[g,c]=[1/0,0];for(let v=0;v<r.length;v++){const l=(r[v]*10**o-i)**2;l<g&&([g,c]=[l,r[v]])}const w=10**o*c,u=Math.ceil(t/w)*w,m=Math.floor(n/w)*w,s=Math.round((m-u)/w),h=[];for(let v=0;v<s+1;v++){const l=u+v*w;h.push(l)}return h}function We(t,n){let{width:e,anchor:i,nBins:o}=n||{};const[r,g]=Et(t),c=g-r;o=o??(e?Math.ceil(c/e)+1:10),e=e??c/(o-1),i=i??r;const w=r-e+(i-r)%e,u=g+e-(g-i)%e,m=Array(o+2);m[0]=w,m[m.length-1]=u;for(let s=1;s<m.length-1;s++)m[s]=w+s*e;return m}function Ue(){const{marginLines:t,axisTitleFontsize:n}=mt,e=parseFloat(getComputedStyle(document.documentElement).fontSize);return t.map(i=>i*e*n)}function be(t,n){for(const e of n.split(" "))t.classList.add(e)}function ye(t,n){for(const e of n.split(" "))t.classList.remove(e)}function we(t,n){let e=0;return function(...i){const o=new Date().getTime();o-e<n||(e=o,t(...i))}}function sa(t){const n=performance.now();return t(),performance.now()-n}function Rt(t){return typeof t=="function"?t:at(t)?n=>t[n]:()=>t}function Xe(t){const[n,e,i,o]=t;return[n,e,i-n,o-e]}function Ye(t,n,e){return!(t<n)&&!(t>e)}function jt(t,n){let[e,i,o,r]=Xe(t),[g,c,w,u]=Xe(n);const m=w*r-o*u,s=((e-g)*r-(i-c)*o)/m,h=-(-(e-g)*u+(i-c)*w)/m;return Ye(s,0,1)&&Ye(h,0,1)}function ve(t,n){const[e,i,o,r]=t;return jt([e,i,o,i],n)||jt([e,i,e,r],n)||jt([o,i,o,r],n)||jt([e,r,o,r],n)}function Jt(t,n){const[e,i]=t,[o,r,g,c]=n;return!(e<o||e>g||i<r||i>c)}function Gt(t,n){const[e,i]=[t[0],t[2]].sort(gt),[o,r]=[t[1],t[3]].sort(gt),[g,c]=[n[0],n[2]].sort(gt),[w,u]=[n[1],n[3]].sort(gt);return!(i<g||e>c||r<w||o>u)}function la(t,n,e){const o=Object.keys(t).filter(c=>c.replace(/[0-9]*$/,"")===n);if(o.length===0){t[`${n}1`]=e;return}const r=o.map(c=>parseInt(c.match(/[0-9]*$/)[0],10)),g=Math.max(...r);t[`${n}${g+1}`]=e}function Qe(t){let n=1/0;for(let e=0;e<t.length;e++)t[e]!==0&&(n=Math.min(n,Math.log10(Math.abs(t[e]))));return n>3?0:Math.floor(Math.abs(n))+2}function ua(t,n={lowercase:!0,capitalize:!0,split:!0}){return n!=null&&n.split&&(t=t.replace(/_/g," ")),n!=null&&n.lowercase&&(t=t.toLocaleLowerCase()),n!=null&&n.capitalize&&(t=qe(t)),t}function Ke(t){if(typeof t=="string")return t;if(t===0)return t.toString();const n=Math.floor(Math.log10(Math.abs(t)));return n>=3?qt(t).toString():n<=-3?qt(t,-n+1).toString():qt(t,2).toString()}function ke(t,n){if(!Se(t))return t;const e=(n==null?void 0:n.tens)??4,i=c=>c!=0&&Math.abs(Math.log10(c))>e,o=(n==null?void 0:n.decimals)??Qe(t);t=t.map(c=>qt(c,o));const g=Et(t).some(i)?fa:da;return t.map(g)}function fa(t){return t===0?"0":Ve(t.toExponential())}function da(t){return t===0?"0":parseFloat(t.toPrecision(12)).toString()}function Ve(t){let[n,e]=t.split("e");return e=Ze(e),n+"×10"+e}const ha={"-":"⁻","+":"",0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹"};function Ze(t){return t.split("").map(n=>ha[n]).join("")}const ma=["string","number","boolean","undefined"];function ga(t){return t===null||ma.includes(typeof t)}const at=Array.isArray;function ba(t){return typeof t=="number"}function Je(t){return/^[0-9]+/.test(t)}function Se(t){return typeof t[0]=="number"&&typeof Mt(t)=="number"}function Ge(t){return typeof t[0]=="string"&&typeof Mt(t)=="string"}function ft(t){for(const e of t){if(!e)continue;const i=_.getLength(e);if(i)return i}const n="At least one variable needs to be of fixed length";throw new Error(n)}function ya(...t){return function(n){return n(...t)}}function wa(t,n){const e={};for(const[i,o]of Object.entries(t))e[i]=yt.of(o)(n);return e}function va(t){return function(n){return n[t]}}function pe(t){return function(n){return t.map(e=>n[e])}}function tn(t){let n=t.length-1;for(;n>0&&/[0-9]/.test(t[n]);)n--;return n+=1,[t.substring(0,n),t.substring(n,t.length)]}function ze(t,n){const e=[];for(let i=0;i<t.length;i++)n(t[i])&&e.push(i);return e}function en(t,n){if(t.length!==n.length)return!1;const e=t.toSorted(Lt).join(""),i=n.toSorted(Lt).join("");return e===i}function nn(t){t.innerHTML=""}var te=(t=>(t[t.Forwards=1]="Forwards",t[t.Backwards=-1]="Backwards",t))(te||{}),Ht=(t=>(t[t.Middle=.5]="Middle",t[t.Top=1]="Top",t[t.Bottom=0]="Bottom",t))(Ht||{}),ee=(t=>(t[t.Center=.5]="Center",t[t.Left=1]="Left",t[t.Right=0]="Right",t))(ee||{});const ka=[0,1,2,3,4,5,6,7],an=[4,5,6,7];var B;(t=>{function n(l){if(!Sa(l))throw new Error("Node must be a HTML5 canvas element");const f=l.getContext("2d"),{clientWidth:y,clientHeight:d,clientLeft:b,clientTop:k}=l,S=y-b,z=d-k;return{canvas:l,context:f,width:S,height:z,margins:[0,0,0,0],scalingFactor:2,contextProps:{}}}t.of=n;function e(l,f){f.appendChild(l.canvas),l.parent=f}t.append=e;function i(l,f){for(const[y,d]of Object.entries(f))l.contextProps[y]=d,l.context[y]=d}t.setContext=i;function o(l){const{context:f,canvas:y,scalingFactor:d}=l,{clientWidth:b,clientHeight:k,clientLeft:S,clientTop:z}=y,E=b-S,p=k-z;l.width=E,l.height=p,l.canvas.width=E*d,l.canvas.height=p*d;for(const[M,x]of Object.entries(l.contextProps))l.context[M]=x;f.scale(d,d),t.clip(l)}t.resize=o;function r(l){const{context:f}=l;let{width:y,height:d}=l;const[b,k,S,z]=l.margins;y=Math.max(y-k-z,0),d=Math.max(d-S-b,0),f.beginPath(),f.rect(k,S,y,d),f.clip()}t.clip=r;function g(l){l.context.clearRect(0,0,l.width,l.height)}t.clear=g;function c(l,f){return l.context.measureText(f).width}t.textWidth=c;function w(l,f){const y=l.context.measureText(f);return y.actualBoundingBoxAscent+y.actualBoundingBoxDescent}t.textHeight=w;function u(l,f,y,d){const{context:b}=l,k=l.canvas.clientHeight,S=(d==null?void 0:d.radius)??mt.radius,z=(d==null?void 0:d.hAnchor)??ee.Center,E=(d==null?void 0:d.vAnchor)??Ht.Middle;f=f+2*(z-.5)*S,y=k-y+2*(.5-E)*S,b.beginPath(),b.arc(f,y,S,0,Math.PI*2),b.fill()}t.point=u;function m(l,f,y,d,b){const{context:k,height:S}=l;k.fillRect(f,S-y,d-f,y-b)}t.rectangleXY=m;function s(l,f,y,d,b,k){const{context:S,height:z}=l,E=(k==null?void 0:k.hAnchor)??ee.Center,p=(k==null?void 0:k.vAnchor)??Ht.Middle;f=f-E*d,y=z-y+p*b,S.fillRect(f,y,d,-b)}t.rectangleWH=s;function h(l,f,y){const{context:d,height:b}=l;d.beginPath(),d.moveTo(f[0],b-y[0]);for(let k=0;k<f.length;k++)d.lineTo(f[k],b-y[k]);d.stroke()}t.line=h;function v(l,f,y,d,b){const{context:k,height:S}=l;k.save(),k.translate(f,S-y),b!=null&&b.vertical&&k.rotate(-Math.PI/2),k.fillText(d,0,0),k.translate(-f,-(S-y)),k.restore()}t.text=v})(B||(B={}));function Sa(t){return t.nodeName==="CANVAS"}const Me=Symbol("listeners"),rn=Symbol("deferred");var T;(t=>{function n(s){const h={},v={};return{...s,[Me]:h,[rn]:v}}t.of=n,t.listen=u(),t.dispatch=m();function e(s){return s[Me]}t.getListeners=e;function i(s){return s[rn]}t.getDeferred=i;function o(s,h,v){const l=()=>t.dispatch(h,"changed");t.listen(s,"changed",l,v)}t.propagateChange=o;function r(s){return s[Me]!==void 0}t.isReactive=r;function g(s,h){h(s),t.dispatch(s,"changed")}t.set=g;function c(s,h){if(!r(s))return;const[v,l]=[e(s)[h],i(s)[h]];if(v)for(const f of v)Tt(v,f);if(l)for(const f of l)Tt(l,f)}t.removeListeners=c;function w(s){if(!r(s))return;const[h,v]=[e(s),i(s)];if(h)for(const l of Object.values(h))l.length=0;if(v)for(const l of Object.values(v))l.length=0}t.removeAllListeners=w;function u(){return function(s,h,v,l){if(!r(s))return;l!=null&&l.throttle&&(v=we(v,l.throttle));const y=!!(l!=null&&l.deferred)?i(s):e(s);y[h]||(y[h]=[]),y[h].includes(v)||y[h].push(v)}}t.makeListenFn=u;function m(){return function(s,h,v){if(!r(s))return;const[l,f]=[e(s)[h],i(s)[h]];if(l)for(const y of l)y(v);if(f)for(const y of f)y(v)}}t.makeDispatchFn=m})(T||(T={}));var pt;(t=>{function n(s=[],h){const v="",l="band",f=a.Expanse.base(h),{zero:y,one:d,direction:b}=f,k=Array.from(Array(s.length),(M,x)=>x),S=(h==null?void 0:h.weights)??Array(s.length).fill(1),z=_t(S),E=!1,p={ordered:E,labels:[...s],order:[...k],weights:[...S],cumulativeWeights:[...z],zero:y,one:d,direction:b};return{value:v,type:l,ordered:E,labels:s,order:k,weights:S,cumulativeWeights:z,...f,defaults:p}}t.of=n;function e(s,h){const{order:v,cumulativeWeights:l}=s;h=v[h];const f=l[h-1]??0,y=l[h],d=Mt(l);return(f+y)/2/d}function i(s,h){if(h=h??Array(s.labels.length).fill(1),h.length!=s.labels.length){const f="The length of the weights must match the length of labels";throw new Error(f)}const{order:v}=s,l=_t(At(h,v));Z(h,s.weights),Z(h,s.defaults.weights),Z(l,s.cumulativeWeights),Z(l,s.defaults.cumulativeWeights),a.Expanse.dispatch(s,"changed")}t.setWeights=i;function o(s,h){const{labels:v,zero:l,one:f,direction:y}=s,d=v.indexOf(h);if(d===-1)throw new Error(`Label ${h} not found in: ${v}`);const b=e(s,d),k=l+b*(f-l);return Ct(k,y)}t.normalize=o;function r(s,h){const{labels:v,zero:l,one:f,direction:y}=s;h=Ct(h,y);const d=(h-l)/(f-l),b=Math.round((2*d*v.length-1)/2);return v[b]}t.unnormalize=r;function g(s,h,v){const{order:l}=s,f=Array.from(new Set(h)).sort(Lt);if(!l.length){for(let k=0;k<f.length;k++)l[k]=k;s.defaults.order=[...l],s.ordered=!1}const y=Array(f.length).fill(1),d=_t(At(y,l)),b={labels:f,weights:y,cumulativeWeights:d};for(const[k,S]of Object.entries(b))at(s[k])&&Z(S,s[k]),v!=null&&v.default&&Z(S,s.defaults[k])}t.train=g;function c(s,h){const{order:v,weights:l,cumulativeWeights:f,defaults:y}=s;if(!h){Z(y.order,v),Z(_t(At(l,v)),f),s.ordered=!1,a.Expanse.dispatch(s,"changed");return}Z(h,v),Z(_t(At(l,h)),f),s.ordered=!0,a.Expanse.dispatch(s,"changed")}t.reorder=c;function w(s){return At(s.labels,s.order)}t.breaks=w;function u(){return!1}t.isContinuous=u;function m(){return!0}t.isDiscrete=m})(pt||(pt={}));var xt;(t=>{function n(c=0,w=1,u){const s="continuous",h=a.Expanse.base(u),[v,l]=[Vt,Vt],f=(u==null?void 0:u.scale)??1,y=(u==null?void 0:u.mult)??1,d=(u==null?void 0:u.offset)??0,b=(u==null?void 0:u.ratio)??!1,k={min:c,max:w,scale:f,mult:y,...h,offset:d,trans:v,inv:l};return{value:0,type:s,min:c,max:w,scale:f,mult:y,offset:d,ratio:b,...h,trans:v,inv:l,defaults:k}}t.of=n;function e(c,w){const{min:u,max:m,zero:s,one:h}=c,{direction:v,scale:l,mult:f,offset:y,trans:d}=c;w=w/(l*f)-y;const b=d(m)-d(u);let k=(d(w-y)-d(u))/b;return k=s+k*(h-s),Ct(k,v)}t.normalize=e;function i(c,w){const{min:u,max:m,zero:s,one:h}=c,{scale:v,mult:l,offset:f,trans:y,inv:d}=c,b=(w-s)/(h-s),k=y(m)-y(u);return d(y(u)+b*k)*(v*l)+f}t.unnormalize=i;function o(c){const{min:w,max:u}=c;return u-w}t.range=o;function r(c,w,u){let[m,s]=_.getMinMax(w)??Et(w);m=c.ratio||u!=null&&u.ratio?0:m,a.Expanse.set(c,h=>(h.min=m,h.max=s),u)}t.train=r;function g(c,w=4){const[u,m]=[0,1].map(h=>t.unnormalize(c,h)).sort(gt);return Be(u,m,w)}t.breaks=g})(xt||(xt={}));var ne;(t=>{function n(c=[],w){const u=[],m="compound",s=a.Expanse.continuous(0,1,w),{zero:h,one:v,direction:l}=s,f={zero:h,one:v,direction:l};for(const d of c)Object.assign(d,{zero:h,one:v,direction:l}),Object.assign(d.defaults,{zero:h,one:v,direction:l});const y={expanses:c,...s,value:u,type:m,defaults:f};return a.Expanse.listen(y,"changed",()=>{const{zero:d,one:b,direction:k}=y;for(const S of c)Object.assign(S,{zero:d,one:b,direction:k}),Object.assign(S.defaults,{zero:d,one:b,direction:k})}),y}t.of=n;function e(c,w){const{expanses:u}=c;return w.map((m,s)=>a.Expanse.normalize(u[s],m))}t.normalize=e;function i(c,w){const{expanses:u}=c;return w.map((m,s)=>a.Expanse.unnormalize(u[s],m))}t.unnormalize=i;function o(c,w){const{expanses:u}=c;if(w.length!=u.length){const m="The number of arrays does not match the number of expanses.";throw new Error(m)}for(let m=0;m<w.length;m++)a.Expanse.train(u[m],w[m])}t.train=o;function r(c){return xt.breaks(c)}t.breaks=r;function g(c){for(const w of c.expanses)a.Expanse.restoreDefaults(w)}t.restoreDefaults=g})(ne||(ne={}));var ae;(t=>{function n(c=[],w){const u="",m="point",s=a.Expanse.base(w),{zero:h,one:v,direction:l}=s,f=Array.from(Array(c.length),(b,k)=>k),y=!1,d={ordered:y,labels:[...c],order:[...f],zero:h,one:v,direction:l};return{value:u,type:m,ordered:y,labels:c,order:f,...s,defaults:d}}t.of=n;function e(c,w){const{labels:u,order:m,zero:s,one:h,direction:v}=c,l=m[u.indexOf(w)];if(l===-1)return l;const f=s+l/(u.length-1)*(h-s);return Ct(f,v)}t.normalize=e;function i(c,w){const{labels:u,order:m,zero:s,one:h,direction:v}=c;w=Ct(w,v);const l=(w-s)/(h-s),f=Math.round(l*(u.length-1));return u[m[f]]}t.unnormalize=i;function o(c,w,u){const{order:m}=c,s=Array.from(new Set(w)).sort(Lt);if(!m.length){for(let h=0;h<s.length;h++)m[h]=h;c.defaults.order=[...m],c.ordered=!1}Z(s,c.labels),u!=null&&u.default&&Z(s,c.defaults.labels)}t.train=o;function r(c,w){const{order:u,defaults:m}=c;if(!w){Z(m.order,u),c.ordered=!1,a.Expanse.dispatch(c,"changed");return}Z(w,u),c.ordered=!0,a.Expanse.dispatch(c,"changed")}t.reorder=r;function g(c){return At(c.labels,c.order)}t.breaks=g})(ae||(ae={}));var re;(t=>{function n(g){const c=[],w="split",u=g.type;return{...g,value:c,type:w,innerType:u}}t.of=n;function e(g,c){return at(c)?c.map(w=>a.Expanse.methods[g.innerType].normalize(g,w)):a.Expanse.methods[g.innerType].normalize(g,c)}t.normalize=e;function i(g,c){return at(c)?c.map(w=>a.Expanse.methods[g.innerType].unnormalize(g,w)):a.Expanse.methods[g.innerType].unnormalize(g,c)}t.unnormalize=i;function o(g,c){a.Expanse.methods[g.innerType].train(g,c)}t.train=o;function r(g){return a.Expanse.methods[g.innerType].breaks(g)}t.breaks=r})(re||(re={})),a.Expanse=void 0,(t=>{t.methods={continuous:xt,point:ae,band:pt,compound:ne,split:re},t.continuous=xt.of,t.point=ae.of,t.band=pt.of,t.compound=ne.of,t.split=re.of;function n(p){const M=(p==null?void 0:p.zero)??0,x=(p==null?void 0:p.one)??1,O=(p==null?void 0:p.direction)??te.Forwards,N=[],C=[];return T.of({zero:M,one:x,direction:O,frozen:N,linked:C})}t.base=n;function e(p,M,x){const{linked:O,frozen:N}=p,C={...p};M(C);for(const I of N)delete C[I];for(const I of Object.keys(C))C[I]===p[I]&&delete C[I];ge(C,p);for(const I of O)t.set(I,M);x!=null&&x.default&&ge(C,p.defaults),x!=null&&x.silent||t.dispatch(p,"changed")}t.set=e;function i(p,M={train:!0}){const x=Se(p)?t.continuous():t.point();return M.train&&t.train(x,p),x}t.infer=i;function o(p,M){for(const x of M)p.frozen.includes(x)||p.frozen.push(x)}t.freeze=o;function r(p,M){p.linked.includes(M)||p.linked.push(M)}t.linkTo=r;function g(p){const{defaults:M}=p;for(const[x,O]of Object.entries(M))at(O)&&at(p[x])?Z(O,p[x]):p[x]=O;t.dispatch(p,"changed")}t.restoreDefaults=g,t.dispatch=T.makeDispatchFn(),t.listen=T.makeListenFn();function c(p,M){return t.methods[p.type].normalize(p,M)}t.normalize=c;function w(p,M){return t.methods[p.type].unnormalize(p,M)}t.unnormalize=w;function u(p,M,x){return t.methods[p.type].train(p,M,x)}t.train=u;function m(p){return t.methods[p.type].breaks(p)}t.breaks=m;function s(p,M){const{direction:x}=p,O=M;t.set(p,N=>(N.zero+=x*O,N.one+=x*O))}t.move=s;function h(p,M,x,O){const{zero:N,one:C,direction:I}=p,J=C-N;I===te.Backwards&&([M,x]=[1-M,1-x]);let[tt,A]=[M,x].map(P=>(P-N)/J);[tt,A]=Zt(tt,A),I===te.Backwards&&([tt,A]=[1-tt,1-A]),t.set(p,P=>(P.zero=tt,P.one=A),O)}t.expand=h;function v(p){t.set(p,M=>M.direction*=-1)}t.flip=v;function l(p,M){if(!k(p))throw new Error("Expanse must be discrete");t.methods[p.type].reorder(p,M)}t.reorder=l;function f(p){return p.one-p.zero}t.unitRange=f;function y(p){if(!d(p))throw new Error("Can only compute range on a continuous expanse");return xt.range(p)}t.range=y;function d(p){return p.type==="continuous"||p.type==="split"}t.isContinuous=d;function b(p){return p.type==="point"}t.isPoint=b;function k(p){return p.type==="point"||p.type==="band"}t.isDiscrete=k;function S(p){return p.type==="band"}t.isBand=S;function z(p){return p.type==="compound"}t.isCompound=z;function E(p){return p.type==="split"}t.isSplit=E})(a.Expanse||(a.Expanse={})),a.Scale=void 0,(t=>{function n(f,y){const d=T.of({domain:f,codomain:y});return a.Expanse.listen(f,"changed",()=>t.dispatch(d,"changed")),a.Expanse.listen(y,"changed",()=>t.dispatch(d,"changed")),d}t.of=n,t.dispatch=T.makeDispatchFn(),t.listen=T.makeListenFn();function e(f,y){f.domain=y,a.Expanse.listen(y,"changed",()=>t.dispatch(f,"changed"))}t.setDomain=e;function i(f,y){f.codomain=y,a.Expanse.listen(y,"changed",()=>t.dispatch(f,"changed"))}t.setCoomain=i;function o(f,y){const{domain:d,codomain:b}=f;return a.Expanse.unnormalize(b,a.Expanse.normalize(d,y))}t.pushforward=o;function r(f,y){const{domain:d,codomain:b}=f;return a.Expanse.unnormalize(d,a.Expanse.normalize(b,y))}t.pullback=r;function g(f,y,d,b){a.Expanse.expand(f.domain,y,d,b)}t.expand=g;function c(f,y,d){if(((d==null?void 0:d.name)??!0)&&_.hasName(y)&&_.copy(y,f),typeof y[0]=="string"&&a.Expanse.isContinuous(f.domain)){const k=Array.from(new Set(y));f.domain=a.Expanse.band(k)}a.Expanse.train(f.domain,y,d)}t.train=c;function w(f){a.Expanse.restoreDefaults(f.domain),a.Expanse.restoreDefaults(f.codomain)}t.restoreDefaults=w;function u(f){const y=a.Expanse.breaks(f.domain);let d=ke(y);if(a.Expanse.isCompound(f.domain)){d=ke(y,{decimals:1});const k=y.map(S=>a.Expanse.unnormalize(f.codomain,xt.normalize(f.domain,S)));return{labels:d,positions:k}}else if(a.Expanse.isSplit(f.codomain)){const k=t.pushforward(f,y);return{labels:d,positions:k}}const b=y.map(k=>t.pushforward(f,k));return{labels:d,positions:b}}t.breaks=u;function m(f,y){a.Expanse.move(f.domain,y)}t.move=m;function s(f,y){y.codomain=f.codomain}t.shareCodomain=s;function h(f){return a.Expanse.range(f.domain)/a.Expanse.unitRange(f.domain)}t.domainRange=h;function v(f){return a.Expanse.range(f.codomain)*a.Expanse.unitRange(f.codomain)}t.codomainRange=v;function l(f){const{domain:y,codomain:d}=f;if([y,d].map(a.Expanse.isContinuous).includes(!1))throw new Error("Both domain and codomain need to be continuous");const b=a.Expanse.range(y);return a.Expanse.range(d)*a.Expanse.unitRange(d)/b}t.unitRatio=l})(a.Scale||(a.Scale={}));const bt=Symbol("positions");a.Factor=void 0,(t=>{(u=>{u[u.Constant=0]="Constant",u[u.Bijection=1]="Bijection",u[u.Surjection=2]="Surjection"})(t.Type||(t.Type={}));function n(u,m,s,h){return T.of({type:u,cardinality:m,indices:s,data:h})}t.of=n,t.listen=T.makeListenFn(),t.dispatch=T.makeDispatchFn();function e(u,m){m.cardinality=u.cardinality,Z(u.indices,m.indices);for(const s of Reflect.ownKeys(u.data))at(u.data[s])&&at(m.data[s])?(Z(u.data[s],m.data[s]),_.copy(u.data[s],m.data[s])):m.data[s]=u.data[s]}t.copyFrom=e;function i(u){const s=[],h=f=>[f],l={...u,[bt]:h};return n(1,1/0,s,l)}t.bijection=i;function o(u){const s=Array(u).fill(0),h=()=>s,v=0,l={[bt]:h};return n(v,1,s,l)}t.mono=o;function r(u,m){const s=u.map(y=>y.toString());m=m??Array.from(new Set(s)).sort(Lt),_.hasName(u)&&_.copy(u,m);const h=[],v={};for(let y=0;y<s.length;y++){const d=m.indexOf(s[y]);v[d]||(v[d]=[]),h.push(d),v[d].push(y)}const l=2,f={label:m,[bt]:Object.values(v)};return n(l,m.length,h,f)}t.from=r;function g(u,m){function s(){const v=(m==null?void 0:m.breaks)??We(u,m),l=new Set,f=[],y={};for(let M=0;M<u.length;M++){const x=v.findIndex(O=>O>=u[M])-1;y[x]||(y[x]=[]),f.push(x),y[x].push(M),l.add(x)}const d=Array.from(l).sort(gt);for(let M=0;M<f.length;M++)f[M]=d.indexOf(f[M]);const[b,k]=[[],[]];for(let M=0;M<d.length;M++)b.push(v[d[M]]),k.push(v[d[M]+1]);const[S,z]=[v[d[0]],v[Mt(d)+1]];_.setMinMax(b,S,z),_.setMinMax(k,S,z),_.setName(b,`min of ${_.getName(u)}`),_.setName(k,`max of ${_.getName(u)}`),_.setName(v,_.getName(u));const E=2,p={binMin:b,binMax:k,breaks:v,[bt]:Object.values(y)};return n(E,d.length,f,p)}const h=s();return m&&T.isReactive(m)&&T.listen(m,"changed",()=>{const v=s();t.copyFrom(v,h),t.dispatch(h,"changed")}),h}t.bin=g;function c(u,m){function s(){if(u.type===1){const N={};for(const A of Reflect.ownKeys(u.data))N[A]=yt.of(u.data[A]);for(const A of Reflect.ownKeys(m.data))N[A]=yt.proxy(m.data[A],m.indices);const C=1,I=m.indices.length,tt=n(C,I,[],N);return tt.parent=u,tt}if(u.type===0){const{type:N,data:C,cardinality:I,indices:J}=m,tt=n(N,I,J,C);return tt.parent=u,tt}const v=Math.max(u.cardinality,m.cardinality)+1,l=new Set,f=[],y={},d={},b={},k=Rt(u.indices),S=Rt(m.indices);for(let N=0;N<u.indices.length;N++){const[C,I]=[k(N),S(N)],J=v*C+I;J in d||(d[J]=C,b[J]=I,y[J]=[]),f.push(J),y[J].push(N),l.add(J)}const z=Array.from(l).sort(gt);for(let N=0;N<f.length;N++)f[N]=z.indexOf(f[N]);const E=Object.values(d),p=Object.values(b),M={};for(let N of Reflect.ownKeys(u.data)){let C=N;if(typeof N=="string")for(;C in M;)N+="$";const[I,J]=[u.data[N],E],tt=at(I)?St(I,J):yt.proxy(I,J);_.copy(I,tt),M[C]=tt}for(let N of Reflect.ownKeys(m.data)){let C=N;if(typeof N=="string")for(;C in M;)C+="$";const[I,J]=[m.data[N],p],tt=at(I)?St(I,J):yt.proxy(I,J);_.copy(I,tt),M[C]=tt}const x=2;M[bt]=Object.values(y);const O=n(x,z.length,f,M);return O.parent=u,O}const h=s();return t.listen(u,"changed",()=>{const v=s();t.copyFrom(v,h)}),t.listen(m,"changed",()=>{const v=s();t.copyFrom(v,h)}),T.propagateChange(u,h,{deferred:!0}),T.propagateChange(m,h,{deferred:!0}),h}t.product=c;function w(u,m){const s={};for(let h=0;h<m.indices.length&&(s[m.indices[h]]=u.indices[h],!(Object.keys(s).length>=m.cardinality));h++);return Object.values(s)}t.parentIndices=w})(a.Factor||(a.Factor={}));const Ae=255;var ie=(t=>(t[t.Base=7]="Base",t[t.First=6]="First",t[t.Second=5]="Second",t[t.Third=4]="Third",t[t.BaseTransient=3]="BaseTransient",t[t.FirstTransient=2]="FirstTransient",t[t.SecondTransient=1]="SecondTransient",t[t.ThirdTransient=0]="ThirdTransient",t))(ie||{}),ot;(t=>{function n(m){const s=Ae,h=Array(m).fill(7),v=[],l=a.Factor.Type.Surjection,f=a.Factor.of(l,8,h,{[Ft]:[0,1,2,3,4,5,6,7]}),y=T.of({group:s,indices:h,transientIndices:v,factor:f});return t.listen(y,"updated",()=>a.Factor.dispatch(f,"changed")),t.listen(y,"cleared",()=>a.Factor.dispatch(f,"changed")),y}t.of=n,t.listen=T.makeListenFn(),t.dispatch=T.makeDispatchFn();function e(m,s){m.group=s}t.setGroup=e;function i(m,s,h){const v=(h==null?void 0:h.group)??m.group;if(r(m,{silent:!0}),v===Ae){for(let l=0;l<s.length;l++){const f=s[l];m.indices[f]=w(m.indices[f])}m.transientIndices=s}else for(let l=0;l<s.length;l++){const f=s[l];m.indices[f]=v}h!=null&&h.silent||t.dispatch(m,"updated")}t.update=i;function o(m,s){for(let h=0;h<m.indices.length;h++)m.indices[h]=7;s!=null&&s.silent||t.dispatch(m,"cleared")}t.clearAll=o;function r(m,s){for(let h=0;h<m.transientIndices.length;h++){const v=m.transientIndices[h];m.indices[v]=u(m.indices[v])}s!=null&&s.silent||t.dispatch(m,"cleared")}t.clearTransient=r;function g(m){const{factor:s,indices:h}=m;return v=>s.data[Ft][h[v]]}t.getLayer=g;function c(m){return!(m&4)}t.isTransient=c;function w(m){return m&-5}function u(m){return m|4}})(ot||(ot={}));const Ft=Symbol("layer");var $t;(t=>{function n(r){const g={},c=[],w=H.Type.Bars,u=(r==null?void 0:r.vAnchor)??Ht.Bottom,m=(r==null?void 0:r.hAnchor)??ee.Center,s=(r==null?void 0:r.postfn)??Vt;return{type:w,data:c,scales:g,postfn:s,vAnchor:u,hAnchor:m}}t.of=n;function e(r,g){const{scales:c,postfn:w,hAnchor:u,vAnchor:m}=r,s=H.groupedData(r),h=ft(Object.values(s)),v=["x","y","width","height",Ft],[l,f,y,d,b]=H.getters(s,v);for(let k=0;k<h;k++){let S=a.Scale.pushforward(c.x,l(k)),z=a.Scale.pushforward(c.y,f(k)),E=a.Scale.pushforward(c.width,y(k)),p=a.Scale.pushforward(c.height,d(k));const M=g[b(k)],x=[S,z,E,p];w(x),B.rectangleWH(M,...x,{hAnchor:u,vAnchor:m})}}t.render=e;function i(r,g){const{scales:c,postfn:w,hAnchor:u,vAnchor:m}=r,s=H.flatData(r),h=ft(Object.values(s)),v=["x","y","width","height",bt],[l,f,y,d,b]=H.getters(s,v),k=[];for(let S=0;S<h;S++){let z=a.Scale.pushforward(c.x,l(S)),E=a.Scale.pushforward(c.y,f(S)),p=a.Scale.pushforward(c.width,y(S)),M=a.Scale.pushforward(c.height,d(S));const x=[z,E,p,M];w(x),[z,E,p,M]=x;const O=[z-p*u,E-M*m,z+p*u,E+M*(1-m)];if(Gt(g,O)){const N=b(S);for(let C=0;C<N.length;C++)k.push(N[C])}}return k}t.check=i;function o(r,g){const{scales:c,postfn:w,hAnchor:u,vAnchor:m}=r,s=H.flatData(r),h=ft(Object.values(s)),v=["x","y","width","height"],[l,f,y,d]=H.getters(s,v);for(let b=0;b<h;b++){let k=a.Scale.pushforward(c.x,l(b)),S=a.Scale.pushforward(c.y,f(b)),z=a.Scale.pushforward(c.width,y(b)),E=a.Scale.pushforward(c.height,d(b));const p=[k,S,z,E];w(p),[k,S,z,E]=p;const M=[k-z*u,S-E*m,k+z*u,S+E*(1-m)];if(Jt(g,M)){const x={};_.hasName(s.x)&&(x[_.getName(s.x)]=l(b)),_.hasName(s.y)&&(x[_.getName(s.y)]=f(b)),_.hasName(s.height)&&(x[_.getName(s.height)]=d(b));for(const[O,N]of Object.entries(s))["x","y","width","height"].includes(O)||N&&_.hasName(N)&&(x[_.getName(N)]=H.getter(N)(b));return x}}}t.query=o})($t||($t={}));var oe;(t=>{function n(){const r={},g=[];return{type:H.Type.Lines,data:g,scales:r}}t.of=n;function e(r,g){const{scales:c}=r,w=H.groupedData(r),u=ft(Object.values(w)),m=["x","y",Ft],[s,h,v]=H.getters(w,m);for(let l=0;l<u;l++){const f=a.Scale.pushforward(c.x,s(l)),y=a.Scale.pushforward(c.y,h(l)),d=g[v(l)];B.line(d,f,y)}}t.render=e;function i(r,g){const{scales:c}=r,w=H.flatData(r),u=ft(Object.values(w)),m=["x","y",bt],[s,h,v]=H.getters(w,m),l=[];for(let f=0;f<u;f++){const y=a.Scale.pushforward(c.x,s(f)),d=a.Scale.pushforward(c.y,h(f));for(let b=1;b<y.length;b++){const k=[y[b-1],d[b-1],y[b],d[b]];if(ve(g,k)){const S=v(f);for(let z=0;z<S.length;z++)l.push(S[z])}}}return l}t.check=i;function o(r,g){let{scales:c}=r;const w=H.flatData(r),u=ft(Object.values(w)),m=["x","y",bt],[s,h]=H.getters(w,m),v=[g[0]-1,g[1]-1,g[0]+1,g[1]+1];for(let l=0;l<u;l++){const f=a.Scale.pushforward(c.x,s(l)),y=a.Scale.pushforward(c.y,h(l));for(let d=1;d<f.length;d++){const b=[f[d-1],y[d-1],f[d],y[d]];if(ve(v,b)){const k={},[S,z]=[s(l),h(l)];for(let E=0;E<S.length;E++)k[S[E]]=z[E];for(const[E,p]of Object.entries(w))E==="x"||E==="y"||p&&_.hasName(p)&&(k[_.getName(p)]=H.getter(p)(l));return k}}}}t.query=o})(oe||(oe={}));var ce;(t=>{function n(){const r={},g=[];return{type:H.Type.Points,data:g,scales:r}}t.of=n;function e(r,g){const{scales:c}=r,w=H.groupedData(r),u=ft(Object.values(w)),m=["x","y","size",Ft],[s,h,v,l]=H.getters(w,m);for(let f=0;f<u;f++){const y=a.Scale.pushforward(c.x,s(f)),d=a.Scale.pushforward(c.y,h(f)),b=a.Scale.pushforward(c.size,v(f)),k=g[l(f)];B.point(k,y,d,{radius:b})}}t.render=e;function i(r,g){const{scales:c}=r,w=H.flatData(r),u=ft(Object.values(w)),m=["x","y","size",bt],[s,h,v,l]=H.getters(w,m),f=[];for(let y=0;y<u;y++){const d=a.Scale.pushforward(c.x,s(y)),b=a.Scale.pushforward(c.y,h(y));let k=a.Scale.pushforward(c.size,v(y));k=k/Math.sqrt(2);const S=[d-k,b-k,d+k,b+k];if(Gt(g,S)){const z=l(y);for(let E=0;E<z.length;E++)f.push(z[E])}}return f}t.check=i;function o(r,g){const{scales:c}=r,w=H.flatData(r),u=ft(Object.values(w)),m=["x","y","size"],[s,h,v]=H.getters(w,m);for(let l=0;l<u;l++){const f=a.Scale.pushforward(c.x,s(l)),y=a.Scale.pushforward(c.y,h(l));let d=a.Scale.pushforward(c.size,v(l));d=d/Math.sqrt(2);const b=[f-d,y-d,f+d,y+d];if(Jt(g,b)){const k={};k[_.getName(w.x)]=s(l),k[_.getName(w.y)]=h(l);for(const[S,z]of Object.entries(w))S==="x"||S==="y"||z&&_.hasName(z)&&(k[_.getName(z)]=H.getter(z)(l));return k}}}t.query=o})(ce||(ce={}));var Bt;(t=>{function n(){const r={},g=[];return{type:H.Type.Rectangles,data:g,scales:r}}t.of=n;function e(r,g){const{scales:c}=r,w=H.groupedData(r),u=ft(Object.values(w)),m=["x0","y0","x1","y1","area",Ft],[s,h,v,l,f,y]=H.getters(w,m);for(let d=0;d<u;d++){let b=a.Scale.pushforward(c.x,s(d)),k=a.Scale.pushforward(c.y,h(d)),S=a.Scale.pushforward(c.x,v(d)),z=a.Scale.pushforward(c.y,l(d));const E=g[y(d)];if(w.area){const p=a.Scale.pushforward(c.area,f(d)),M=S-b,x=z-k;b=b+(1-p)/2*M,S=S-(1-p)/2*M,k=k+(1-p)/2*x,z=z-(1-p)/2*x}B.rectangleXY(E,b,k,S,z)}}t.render=e;function i(r,g){const{scales:c}=r,w=H.flatData(r),u=ft(Object.values(w)),m=["x0","y0","x1","y1","area",bt],[s,h,v,l,f,y]=H.getters(w,m),d=[];for(let b=0;b<u;b++){let k=a.Scale.pushforward(c.x,s(b)),S=a.Scale.pushforward(c.y,h(b)),z=a.Scale.pushforward(c.x,v(b)),E=a.Scale.pushforward(c.y,l(b));if(w.area){const p=a.Scale.pushforward(c.area,f(b)),M=z-k,x=E-S;k=k+(1-p)/2*M,z=z-(1-p)/2*M,S=S+(1-p)/2*x,E=E-(1-p)/2*x}if(Gt(g,[k,S,z,E])){const p=y(b);for(let M=0;M<p.length;M++)d.push(p[M])}}return d}t.check=i;function o(r,g){const{scales:c}=r,w=H.flatData(r),u=ft(Object.values(w)),m=["x0","y0","x1","y1","area"],[s,h,v,l,f]=H.getters(w,m);for(let y=0;y<u;y++){let d=a.Scale.pushforward(c.x,s(y)),b=a.Scale.pushforward(c.y,h(y)),k=a.Scale.pushforward(c.x,v(y)),S=a.Scale.pushforward(c.y,l(y));if(w.area){const z=a.Scale.pushforward(c.area,f(y)),E=k-d,p=S-b;d=d+(1-z)/2*E,k=k-(1-z)/2*E,b=b+(1-z)/2*p,S=S-(1-z)/2*p}if(Jt(g,[d,b,k,S])){const z={};for(const E of Object.values(w))E&&_.hasName(E)&&(z[_.getName(E)]=H.getter(E)(y));return z}}}t.query=o})(Bt||(Bt={}));var H;(t=>{(u=>{u[u.Points=0]="Points",u[u.Bars=1]="Bars",u[u.Rectangles=2]="Rectangles",u[u.Lines=3]="Lines"})(t.Type||(t.Type={}));const n={0:ce,1:$t,2:Bt,3:oe};function e(u){return u.data[u.data.length-2]}t.flatData=e;function i(u){return u.data[u.data.length-1]}t.groupedData=i;function o(u,m=()=>.5){return Rt(u??m)}t.getter=o;function r(u,m,s=()=>.5){return m.map(h=>t.getter(u[h],s))}t.getters=r;function g(u,m){n[u.type].render(u,m)}t.render=g;function c(u,m){return n[u.type].check(u,m)}t.check=c;function w(u,m){return n[u.type].query(u,m)}t.query=w})(H||(H={}));const Ee=Symbol("parent"),_e=Symbol("values"),on=Symbol("indices"),xe=Symbol("factor"),cn=Symbol("reducer");var U;(t=>{function n(h,v,l,f){const y=h;return y[_e]=h,y[xe]=v,y[cn]=l,f&&e(y,f),y}t.of=n,t.listen=T.makeListenFn(),t.dispatch=T.makeDispatchFn();function e(h,v){h[Ee]=v}t.setParent=e;function i(h){const[,v,l,f]=s(h);if(!f)throw new Error("Parent missing");const y=a.Factor.parentIndices(c(f),v),d=St(f,y),b=n(d,c(f),l,w(f));return u(b,f),m(b,y),_.copyName(h,b),b}t.parent=i;function o(h){const[v,l,f,y,d]=s(h);if(!y)throw new Error("Cannot stack a without a parent");const b=a.Factor.parentIndices(c(y),l),{reducefn:k,initialfn:S}=f,[z,E]=[v.length,[]],p=Array.from(Array(z),()=>S()),M=yt.of(b);for(let N=0;N<v.length;N++){const C=M(N);E[C]===void 0&&(E[C]=S()),E[C]=k(E[C],v[N]),p[N]=E[C]}const x=d?St(p,d):p,O=t.of(x,l,f,y);return u(O,p),d&&m(O,d),_.copyName(h,O),O}t.stack=o;function r(h,v){const[l,f,y,d,b]=s(h);if(!d)throw new Error("Cannot normalize a without a parent");const k=a.Factor.parentIndices(c(d),f),S=St(d,k),z=[...l];for(let M=0;M<h.length;M++)z[M]=v(z[M],S[M]);const E=b?St(z,b):z,p=t.of(E,f,y,d);return u(p,z),b&&m(p,b),_.copyName(h,p),p}t.normalize=r;function g(h){const[v,l,f,y,d]=s(h),b=[];b.push(f.initialfn());for(let z=0;z<v.length-1;z++)b.push(v[z]);const k=d?St(b,d):b,S=t.of(k,l,f,y);return u(S,b),d&&m(S,d),_.copyName(h,S),S}t.shiftLeft=g;function c(h){return h[xe]}function w(h){return h[Ee]}t.getParent=w;function u(h,v){h[_e]=v}function m(h,v){h[on]=v}function s(h){return[h[_e],h[xe],h[cn],h[Ee],h[on]]}})(U||(U={})),a.Reducer=void 0,(t=>{t.sum={name:"sum",fallback:"count",initialfn:()=>0,reducefn:(o,r)=>o+r},t.max={name:"max",initialfn:()=>-1/0,reducefn:(o,r)=>Math.max(o,r)},t.product={name:"product",initialfn:()=>1,reducefn:(o,r)=>o*r},t.table={name:"table",initialfn:()=>({}),reducefn:(o,r)=>(o[r]=o[r]+1||0,o)};function n(o){return typeof o=="string"?t[o]:o}t.get=n;function e(o,r,g){const{indices:c,cardinality:w}=r,{initialfn:u,reducefn:m}=g,s=Array.from(Array(w),()=>u()),h=Rt(c),v=Rt(o);for(let f=0;f<c.length;f++)s[h(f)]=m(s[h(f)],v(f));const l=U.of(s,r,g);return _.copy(o,l),_.setName(l,i(s,g)??"[unknown summary]"),l}t.reduce=e;function i(o,r){return _.hasName(o)?`${r.name} of ${_.getName(o)}`:r.fallback}t.getName=i})(a.Reducer||(a.Reducer={}));var G;(t=>{function n(r,g){const c=[];for(let w=0;w<g.length;w++){const u=g[w],m=e(r,u),s=T.of($e(m,u.data));if(c.push(s),w>0)for(const h of Object.keys(m)){const v=c[w-1][h];U.setParent(m[h],v)}a.Factor.listen(u,"changed",()=>{const h=e(r,u);for(const v of Object.keys(h))Z(h[v],m[v])}),T.propagateChange(u,s,{deferred:!0})}return c}t.of=n;function e(r,g){const c={};for(const[w,u]of Object.entries(r)){const[m,s]=u;c[w]=a.Reducer.reduce(m,g,s)}return c}function i(r,g){const c=[];for(let w=0;w<r.length;w++){let u=function(s){const h=g[w](s),v=Reflect.ownKeys(s);for(const l of v)(typeof l=="symbol"||Je(l))&&(h[l]=s[l]);return h};const m=T.of(u(r[w]));c.push(m),T.listen(r[w],"changed",()=>{const s=u(r[w]);for(const h of Reflect.ownKeys(s))at(s[h])&&at(m[h])&&Z(s[h],m[h]);T.dispatch(m,"changed")})}return c}t.translate=i;function o(r,g){const c={};let w=0;for(const[u,m]of r)c[`q${w++}`]=[u(g),m];return c}t.formatQueries=o})(G||(G={}));function pa(t,n,e){const{data:i,marker:o}=t;let[r,g]=n(i);const c=g&&(e!=null&&e.reducer)?e.reducer:a.Reducer.sum,w=g||(()=>1),u=a.Factor.from(r),m=a.Factor.product(u,o.factor),s=[u,m],h=e!=null&&e.queries?e.queries(i):{},v=G.of({stat:[w,c],...h},s),l=[],f=0,y={type:"bar",scales:{x:"band"}},d={representation:f,...a.Plot.of(y),summaries:v,coordinates:l};return a.Plot.listen(d,"n",()=>za(d)),ln(d),a.Plot.addGeom(d,$t.of()),d}function sn(t,n){if(t.ordered)pt.reorder(t);else{const e=je(n);pt.reorder(t,e)}}function za(t){t.representation===0?Ma(t):ln(t)}function ln(t){const{summaries:n,scales:e}=t,i=G.translate(n,[c=>({x:c.label,y:vt,height:c.stat,width:kt}),c=>({x:c.label,y:vt,height:U.stack(c.stat),width:kt})]),[o]=i,r={default:!0,ratio:!0};a.Scale.train(e.x,o.x,r),a.Scale.train(e.y,o.height,r),a.Scale.train(e.width,[0,1],r),a.Scale.train(e.height,o.height,r),a.Expanse.freeze(e.y.domain,["zero"]),a.Expanse.freeze(e.height.domain,["zero"]),pt.setWeights(e.x.domain);const g=1/new Set(o.x).size;a.Expanse.linkTo(e.y.domain,e.height.domain),a.Expanse.set(e.width.codomain,c=>{c.scale=g,c.mult=.9,c.offset=0},{default:!0}),_.setName(e.y,_.getName(o.height)),T.removeListeners(t,"o"),a.Plot.listen(t,"o",()=>sn(e.x.domain,o.height)),t.representation=0,a.Plot.setData(t,i),a.Plot.render(t),a.Plot.renderAxes(t)}function Ma(t){const{summaries:n,scales:e}=t,i=G.translate(n,[g=>({x:g.label,y:vt,height:kt,width:g.stat}),g=>({x:g.label,y:vt,height:U.normalize(U.stack(g.stat),(c,w)=>c/w),width:U.parent(g.stat)})]),[o]=i,r={default:!0,ratio:!0};a.Scale.train(e.x,o.x,r),a.Scale.train(e.y,[0,1],r),a.Scale.train(e.width,_t(o.width),r),a.Scale.train(e.height,[0,1],r),a.Expanse.freeze(e.y.domain,["zero"]),a.Expanse.freeze(e.height.domain,["zero"]),pt.setWeights(e.x.domain,o.width),a.Expanse.linkTo(e.y.domain,e.height.domain),a.Expanse.set(e.width.codomain,g=>{g.scale=1,g.mult=1,g.offset=-1},{default:!0}),_.setName(e.y,"proportion"),T.removeListeners(t,"o"),a.Plot.listen(t,"o",()=>sn(e.x.domain,o.width)),t.representation=1,a.Plot.setData(t,i),a.Plot.render(t),a.Plot.renderAxes(t)}function Aa(t,n,e){const{data:i,marker:o}=t;let[r,g,c]=n(i);const w=c&&(e!=null&&e.reducer)?e.reducer:a.Reducer.sum,u=c?[...c]:()=>1,m=a.Factor.product(a.Factor.from(r),a.Factor.from(g)),s=a.Factor.product(m,o.factor),h=[m,s],v=G.formatQueries((e==null?void 0:e.queries)??[],i),l=G.of({stat:[u,w],...v},h),f=[],y=0,d={type:"fluct",scales:{x:"band",y:"band"}},b={representation:y,...a.Plot.of(d),summaries:l,coordinates:f};return a.Scale.shareCodomain(b.scales.area,b.scales.width),a.Scale.shareCodomain(b.scales.area,b.scales.height),a.Plot.listen(b,"n",()=>Ea(b)),un(b),a.Plot.addGeom(b,$t.of({vAnchor:Ht.Middle})),b}function Ea(t){t.representation===0?_a(t):un(t)}function un(t){const{summaries:n,scales:e}=t,i=G.translate(n,[c=>({x:c.label,y:c.label$,height:c.stat,width:c.stat}),c=>({x:c.label,y:c.label$,height:U.stack(c.stat),width:U.stack(c.stat)})]),[o]=i,r={default:!0,ratio:!0};a.Scale.train(e.x,o.x,r),a.Scale.train(e.y,o.y,r),a.Scale.train(e.width,o.width,r),a.Scale.train(e.height,o.height,r);const g=Ot(new Set(o.x).size,new Set(o.y).size);a.Expanse.set(e.area.codomain,c=>{c.scale=1/g,c.mult=.9,c.offset=0},{default:!0}),a.Plot.setData(t,i),t.representation=0,a.Plot.render(t)}function _a(t){const{summaries:n,scales:e}=t,i=G.translate(n,[c=>({x:c.label,y:c.label$,height:kt,width:kt}),c=>({x:c.label,y:c.label$,height:U.normalize(U.stack(c.stat),(w,u)=>w/u),width:U.normalize(U.stack(c.stat),(w,u)=>w/u)})]),[o]=i,r={default:!0,ratio:!0};a.Scale.train(e.x,o.x,r),a.Scale.train(e.y,o.y,r),a.Scale.train(e.width,[0,1],r),a.Scale.train(e.height,[0,1],r);const g=Ot(new Set(o.x).size,new Set(o.y).size);a.Expanse.set(e.area.codomain,c=>{c.scale=1/g,c.mult=.9,c.offset=-1},{default:!0}),a.Plot.setData(t,i),t.representation=1,a.Plot.render(t)}function xa(t,n,e){const{data:i,marker:o}=t;let[r,g]=n(i);const c=g&&(e!=null&&e.reducer)?e.reducer:a.Reducer.sum,w=g||(()=>1),[u,m]=Et(r),s=m-u,h=T.of({anchor:u,width:s/15}),v=a.Factor.mono(r.length),l=a.Factor.product(v,a.Factor.bin(r,h)),f=a.Factor.product(l,o.factor),y=[v,l,f],d=e!=null&&e.queries?e.queries(i):{},b=G.of({stat:[w,c],...d},y),k=0,S=[],z={type:"histo"},E={representation:k,...a.Plot.of(z),summaries:b,coordinates:S};a.Plot.listen(E,"n",()=>Pa(E));const p=s/10;return a.Plot.listen(E,"=",()=>T.set(h,M=>M.width*=1.1111111111111112)),a.Plot.listen(E,"-",()=>T.set(h,M=>M.width*=.9)),a.Plot.listen(E,"'",()=>T.set(h,M=>M.anchor+=p)),a.Plot.listen(E,";",()=>T.set(h,M=>M.anchor-=p)),a.Plot.listen(E,"r",()=>{T.set(h,M=>(M.anchor=u,M.width=s/15))}),fn(E),a.Plot.addGeom(E,Bt.of()),E}function Pa(t){t.representation===0?Na(t):fn(t)}function fn(t){const{summaries:n}=t,e=G.translate(n,[r=>r,r=>({x0:r.binMin,y0:vt,x1:r.binMax,y1:r.stat}),r=>({x0:r.binMin,y0:vt,x1:r.binMax,y1:U.stack(r.stat)})]),{scales:i}=t,[,o]=e;a.Scale.train(i.x,o.x1,{default:!0,name:!1}),a.Scale.train(i.y,o.y1,{default:!0,ratio:!0});for(const r of t.data)T.removeListeners(r,"changed");T.listen(o,"changed",()=>{a.Scale.train(i.x,o.x1,{default:!0,name:!1}),a.Scale.train(i.y,o.y1,{default:!0,ratio:!0})}),a.Expanse.freeze(i.y.domain,["zero"]),_.setName(i.x,_.getName(n[1].breaks)),_.setName(i.y,_.getName(o.y1)),t.representation=0,a.Plot.setData(t,e),a.Plot.render(t),a.Plot.renderAxes(t)}function Na(t){const{summaries:n}=t,e=G.translate(n,[r=>r,r=>({x0:U.shiftLeft(U.stack(r.stat)),y0:vt,x1:U.stack(r.stat),y1:kt,query1:r.binMin,query2:r.binMax}),r=>({x0:U.shiftLeft(U.stack(U.parent(r.stat))),y0:vt,x1:U.stack(U.parent(r.stat)),y1:U.normalize(U.stack(r.stat),(g,c)=>g/c)})]),{scales:i}=t,[,o]=e;a.Scale.train(i.x,[0,...o.x1],{default:!0,name:!1}),a.Scale.train(i.y,[0,1],{default:!0,ratio:!0}),T.listen(o,"changed",()=>{a.Scale.train(i.x,[0,...o.x1],{default:!0,name:!1})}),a.Expanse.freeze(i.y.domain,["zero"]),_.setName(i.x,"cumulative count"),_.setName(i.y,"proportion"),a.Plot.setData(t,e),t.representation=1,a.Plot.render(t),a.Plot.renderAxes(t)}function La(t,n,e){const{data:i,marker:o}=t;let[r,g,c]=n(i);const w=c&&(e!=null&&e.reducer)?e.reducer:a.Reducer.sum,u=c||(()=>1),[m,s]=Et(r),[h,v]=Et(g),[l,f]=[s-m,v-h],y=T.of({anchor:m,width:l/15}),d=T.of({anchor:h,width:f/15}),b=a.Factor.bin(r,y),k=a.Factor.bin(g,d),S=a.Factor.product(b,k),z=a.Factor.product(S,o.factor),E=[S,z],p=e!=null&&e.queries?e.queries(i):{},M=G.of({stat:[u,w],...p},E),x=0,O=[],N={type:"histo2d",ratio:e==null?void 0:e.ratio},C={representation:x,...a.Plot.of(N),summaries:M,coordinates:O};return a.Plot.listen(C,"n",()=>Ta(C)),a.Plot.listen(C,"=",()=>{T.set(y,I=>I.width*=1.1111111111111112),T.set(d,I=>I.width*=1.1111111111111112)}),a.Plot.listen(C,"-",()=>{T.set(y,I=>I.width*=.9),T.set(d,I=>I.width*=.9)}),a.Plot.listen(C,"r",()=>{T.set(y,I=>(I.anchor=m,I.width=l/15)),T.set(d,I=>(I.anchor=h,I.width=f/15))}),dn(C),a.Plot.addGeom(C,Bt.of()),C}function Ta(t){t.representation===0?Ca(t):dn(t)}function dn(t){const{summaries:n}=t,e=G.translate(n,[r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:r.stat}),r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:U.stack(r.stat)})]),{scales:i}=t,[,o]=e;a.Scale.train(i.x,o.x1,{default:!0}),a.Scale.train(i.y,o.y1,{default:!0}),a.Scale.train(i.area,o.area,{default:!0}),a.Expanse.set(i.area.codomain,r=>(r.min=0,r.max=1),{default:!0}),a.Expanse.freeze(i.area.codomain,["min","max"]);for(const r of t.data)T.removeListeners(r,"changed");T.listen(o,"changed",()=>{a.Scale.train(i.x,o.x1,{default:!0,name:!1}),a.Scale.train(i.y,o.y1,{default:!0,name:!1}),a.Scale.train(i.area,o.area,{default:!0})}),t.representation=0,a.Plot.setData(t,e),_.setName(i.x,_.getName(n[1].breaks)),_.setName(i.y,_.getName(n[1].breaks$)),a.Plot.render(t),a.Plot.renderAxes(t)}function Ca(t){const{summaries:n}=t,e=G.translate(n,[r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:kt}),r=>({x0:r.binMin,y0:r.binMin$,x1:r.binMax,y1:r.binMax$,area:U.normalize(U.stack(r.stat),(g,c)=>g/c)})]),{scales:i}=t,[,o]=e;a.Scale.train(i.x,o.x1,{default:!0}),a.Scale.train(i.y,o.y1,{default:!0}),a.Scale.train(i.area,[0,1],{default:!0}),a.Expanse.set(i.area.codomain,r=>(r.min=0,r.max=1),{default:!0}),a.Expanse.freeze(i.area.codomain,["min","max"]);for(const r of t.data)T.removeListeners(r,"changed");T.listen(o,"changed",()=>{a.Scale.train(i.x,o.x1,{default:!0,name:!1}),a.Scale.train(i.y,o.y1,{default:!0,name:!1})}),t.representation=1,a.Plot.setData(t,e),_.setName(i.x,_.getName(n[1].breaks)),_.setName(i.y,_.getName(n[1].breaks$)),a.Plot.render(t),a.Plot.renderAxes(t)}function Ra(t,n,e){const{data:i,marker:o}=t,r=n(i),g=r.map(_.getName),c=yt.constant(g),w=yt.multi(r),u=e!=null&&e.queries?e.queries(i):{},m=a.Factor.bijection({x:c,y:w,...u}),s=a.Factor.product(m,o.factor),h=G.of({},[m,s]),v=G.translate(h,[z=>z,z=>z]),l=a.Plot.of({type:"pcoords"}),{scales:f}=l,{expandX:y,expandY:d}=mt,b={zero:y,one:1-y},k={zero:d,one:1-d};a.Scale.setDomain(f.x,a.Expanse.split(a.Expanse.point(g,b))),a.Scale.setCoomain(f.x,a.Expanse.split(f.x.codomain));const S=r.map(z=>a.Expanse.infer(z));return a.Scale.setDomain(f.y,a.Expanse.compound(S,k)),a.Scale.setCoomain(f.y,a.Expanse.split(f.y.codomain)),_.setName(f.x,"variable"),_.setName(f.y,"value"),a.Plot.setData(l,v),a.Plot.addGeom(l,oe.of()),l}function Fa(t,n,e){const{data:i,marker:o}=t,[r,g,c]=n(i),w=e!=null&&e.queries?e==null?void 0:e.queries(i):{},u={x:r,y:g,size:c??(()=>.5),...w},m=a.Factor.bijection(u),s=a.Factor.product(m,o.factor),h=G.of({},[m,s]),v=G.translate(h,[y=>y,y=>y]),l=a.Plot.of({type:"scatter",ratio:e==null?void 0:e.ratio}),{scales:f}=l;return a.Scale.train(f.x,r,{default:!0}),a.Scale.train(f.y,g,{default:!0}),c&&a.Scale.train(f.size,c,{default:!0}),a.Plot.setData(l,v),a.Plot.addGeom(l,ce.of()),{...l,summaries:h}}const V={createElement(t,n,...e){const i=document.createElement(t);for(const[o,r]of Object.entries(n||{}))o.startsWith("on")&&o.toLowerCase()in window?i.addEventListener(o.toLowerCase().slice(2),r):i.setAttribute(o,r);return hn(i,...e),i}};function hn(t,...n){if(n.length===0)return;if(n.length>1){for(const o of n)hn(t,o);return}const e=n[0],i=Da(e)?e:document.createTextNode(e);t.appendChild(i)}function Da(t){return t.nodeType!=null}function Ia(t){mn(t,"x"),mn(t,"y")}function mn(t,n){const e=t.scales[n],i=n==="x"?t.scales.y:t.scales.x,o=t.frames[`${n}Axis`],{context:r}=o,{labels:g,positions:c}=a.Scale.breaks(e),[w,u,m,s]=t.margins,h=parseInt(r.font.match(/^[0-9]*/)[0],10),v=i.codomain.min-h/2,{width:l,height:f}=o;if(B.clear(o),n==="x"){let[y,d]=[0,0];for(let b=0;b<g.length;b++){const k=g[b],S=c[b],z=B.textWidth(o,k)+1;bn(S,u,l-s)||yn(y,S,d,z)||([y,d]=[S,z],B.text(o,S,v,k))}}else if(n==="y"){let[y,d]=[0,0];for(let b=0;b<g.length;b++){const k=g[b],S=c[b],z=B.textWidth(o,k)+1,E=B.textHeight(o,k)+1;t.margins[1]/2<z&&(t.margins[1]=2*z,a.Plot.resize(t)),!bn(S,w,f-m)&&(yn(y,S,d,E)||([y,d]=[S,E],B.text(o,v,S,k)))}}}function Oa(t){gn(t,"x"),gn(t,"y")}function gn(t,n){const{scales:e,frames:i,margins:o}=t,r=e[n],g=n==="x"?t.scales.y:t.scales.x,c=i.base,w=_.getName(r),u=n==="x"?o[0]:o[1],m=a.Expanse.unnormalize(r.codomain,.5),s=a.Expanse.unnormalize(g.codomain,0)-u*2/3;n==="x"&&B.text(c,m,s,w),n==="y"&&B.text(c,s,m,w,{vertical:!0})}function bn(t,n,e){return t<n||t>e}function yn(t,n,e,i){const[o,r]=[t-e/2,t+e/2],[g,c]=[n-i/2,n+i/2];return o<c&&r>=g}a.Plot=void 0,(t=>{function n(A){const P=(A==null?void 0:A.type)??"unknown",R=V.createElement("div",{id:"plot",class:"relative h-full w-full drop-shadow-md"}),D=V.createElement("table",{class:"relative z-30 hidden bg-gray-50 shadow-md"});R.appendChild(D);const F=[],q={},X={},$=[],j=[],Q=[],{expandX:Y,expandY:W}=mt,rt=[[Y,W,1-Y,1-W]],it={active:!1,locked:!1,mousedown:!1,mousebutton:0,mode:"select",mousecoords:[0,0,0,0],lastkey:"",ratio:(A==null?void 0:A.ratio)??void 0},et=Ue(),lt=T.of({type:P,data:F,container:R,queryTable:D,frames:q,scales:X,renderables:$,selectables:j,queryables:Q,zoomStack:rt,parameters:it,margins:et});return qa(lt),Ha(lt,A),ja(lt),lt}t.of=n,t.listen=T.makeListenFn(),t.dispatch=T.makeDispatchFn(),t.scatter=Fa,t.bar=pa,t.fluct=Aa,t.histo=xa,t.histo2d=La,t.pcoords=Ra;function e(A,P){A.appendChild(P.container),t.resize(P)}t.append=e;function i(A,P){for(const R of A.data)T.removeListeners(R,"changed");A.data.length=0;for(let R=0;R<P.length;R++)A.data.push(P[R]);T.listen(Mt(P),"changed",()=>t.render(A))}t.setData=i;function o(A,P){P.scales=A.scales,P.data=A.data;const{renderables:R,selectables:D,queryables:F}=A;for(const q of[R,D,F])q.push(P)}t.addGeom=o;function r(A,P){const{renderables:R,selectables:D,queryables:F}=A;for(const q of[R,D,F])Tt(q,P)}t.deleteGeom=r;function g(A){be(A.container,"outline outline-2 outline-slate-600"),A.parameters.active=!0,t.dispatch(A,"activated")}t.activate=g;function c(A){ye(A.container,"outline outline-2 outline-slate-600"),A.parameters.active=!1}t.deactivate=c;function w(A){A.parameters.locked=!0}t.lock=w;function u(A){A.parameters.locked=!1}t.unlock=u;function m(A){for(const P of ka)B.clear(A.frames[P]);for(const P of A.renderables)H.render(P,A.frames)}t.render=m;function s(A){for(const P of["base","xAxis","yAxis"])B.clear(A.frames[P]);Ia(A),Oa(A)}t.renderAxes=s;function h(A){B.clear(A.frames.user)}t.clearUserFrame=h;function v(A){for(const nt of Object.values(A.frames))B.resize(nt);const{container:P,scales:R,margins:D,frames:F,parameters:q}=A,{clientWidth:X,clientHeight:$}=P,{x:j,y:Q,width:Y,height:W,area:rt}=R,[it,et]=[D[0],D[1]],[lt,ct]=[$-D[2],X-D[3]],st={default:!0};F.under.canvas.style.width=`calc(100% - ${et}px - ${D[3]}px)`,F.under.canvas.style.height=`calc(100% - ${it}px - ${D[2]}px)`,F.over.canvas.style.width=`calc(100% - ${et}px - ${D[3]}px)`,F.over.canvas.style.height=`calc(100% - ${it}px - ${D[2]}px)`;for(const nt of Object.values(F))B.clip(nt);a.Expanse.set(j.codomain,nt=>(nt.min=et,nt.max=ct),st),a.Expanse.set(Q.codomain,nt=>(nt.min=it,nt.max=lt),st);const[vn,kn]=[ct-et,lt-it];if(a.Expanse.set(Y.codomain,nt=>nt.max=vn,st),a.Expanse.set(W.codomain,nt=>nt.max=kn,st),a.Expanse.set(rt.codomain,nt=>nt.max=Math.min(vn,kn),st),q.ratio){const{expandX:nt,expandY:Sn}=mt;a.Expanse.set(j.domain,Wt=>(Wt.zero=nt,Wt.one=1-nt),st),a.Expanse.set(Q.domain,Wt=>(Wt.zero=Sn,Wt.one=1-Sn),st),t.applyRatio(A,q.ratio)}}t.resize=v;function l(A){const{selectables:P,parameters:R,frames:D}=A,F=new Set;for(const q of P){const X=H.check(q,R.mousecoords);for(let $=0;$<X.length;$++)F.add(X[$])}t.dispatch(A,"set-selected",{cases:Array.from(F)}),t.dispatch(A,"lock-others"),B.clear(D.user),B.rectangleXY(D.user,...R.mousecoords)}t.checkSelection=l;function f(A,P){A.parameters.mode=P}t.setMode=f;function y(A,P){A.parameters.mousedown=P}t.setMousedown=y;function d(A,P){A.parameters.mousebutton=P}t.setMouseButton=d,t.mousemoveHandlers={select:b,pan:k,query:S};function b(A,P){const{container:R,parameters:D}=A;if(!D.active||!D.mousedown)return;t.dispatch(A,"clear-transient");const{mousecoords:F}=D,{clientHeight:q}=R,X=P.offsetX,$=q-P.offsetY;F[2]=X,F[3]=$,t.checkSelection(A)}function k(A,P){const{container:R,scales:D,parameters:F}=A;if(!F.active||!F.mousedown)return;const{mousecoords:q}=F,{clientWidth:X,clientHeight:$}=R,[j,Q]=q,Y=P.offsetX,W=$-P.offsetY,rt=(Y-j)/X,it=(W-Q)/$;a.Scale.move(D.x,rt),a.Scale.move(D.y,it),q[0]=Y,q[1]=W,t.clearUserFrame(A)}function S(A,P){const{offsetX:R,offsetY:D}=P,{container:F,queryTable:q,queryables:X}=A,{clientWidth:$,clientHeight:j}=F;q.style.display="none";const Q=R,Y=j-D;let W;for(const lt of X)if(W=H.query(lt,[Q,Y]),W)break;if(!W)return;nn(q);for(const[lt,ct]of Object.entries(W)){const st=V.createElement("tr",null,V.createElement("td",{class:"border border-gray-400 px-3"},lt),V.createElement("td",{class:"border border-gray-400 px-3 font-mono"},Ke(ct)));q.appendChild(st)}q.style.display="inline-block";const rt=getComputedStyle(q),it=parseFloat(rt.width.slice(0,-2)),{clientWidth:et}=q;Q+it>$?(q.style.left="auto",q.style.right=`${et-R+5}px`):(q.style.left=`${Q+5}px`,q.style.right="auto"),q.style.top=D+"px"}t.keydownHandlers={r:x,"=":z,"-":E,"]":M,"[":p,z:N,x:C,q:O},x.description="Reset the plot",z.description="Increase size",E.description="Decrease size",p.description="Decrease opacity",M.description="Increase opacity",N.description="Zoom",C.description="Pop one level of zoom",O.description="Query";function z(A){const{area:P,size:R,width:D}=A.scales;a.Expanse.set(P.codomain,F=>(F.min*=1.1111111111111112,F.max*=1.1111111111111112)),a.Expanse.set(R.codomain,F=>(F.min*=1.1111111111111112,F.max*=1.1111111111111112)),a.Expanse.set(D.codomain,F=>F.mult<1?F.mult*=1.1111111111111112:null)}function E(A){const{area:P,width:R,size:D}=A.scales;a.Expanse.set(P.codomain,F=>(F.min*=.9,F.max*=.9)),a.Expanse.set(D.codomain,F=>(F.min*=.9,F.max*=.9)),a.Expanse.set(R.codomain,F=>F.mult*=.9)}function p(A){for(const P of an){const R=A.frames[P],D=R.context.globalAlpha;R.context.globalAlpha=zt(D*9/10,0,1)}t.render(A)}function M(A){for(const P of an){const R=A.frames[P],D=R.context.globalAlpha;R.context.globalAlpha=zt(D*10/9,0,1)}t.render(A)}function x(A){for(const P of Object.values(A.scales))a.Scale.restoreDefaults(P);A.zoomStack.length=1,t.clearUserFrame(A)}t.reset=x;function O(A){t.setMode(A,"query")}t.setQueryMode=O;function N(A,P){const{scales:R,parameters:D,zoomStack:F}=A;let{coords:q,units:X}=P??{};X=X??"screen";let[$,j,Q,Y]=q??D.mousecoords;const{x:W,y:rt}=R;if(X==="data"){const ct={silent:!0};a.Expanse.set(W.domain,st=>(st.zero=0,st.one=1),ct),a.Expanse.set(rt.domain,st=>(st.zero=0,st.one=1),ct),$=a.Expanse.normalize(W.domain,$),Q=a.Expanse.normalize(W.domain,Q),j=a.Expanse.normalize(rt.domain,j),Y=a.Expanse.normalize(rt.domain,Y)}if(X==="screen"){if(Math.abs(Q-$)<10||Math.abs(Y-j)<10)return;$=zt(a.Expanse.normalize(W.codomain,$)),Q=zt(a.Expanse.normalize(W.codomain,Q)),j=zt(a.Expanse.normalize(rt.codomain,j)),Y=zt(a.Expanse.normalize(rt.codomain,Y))}[$,Q]=[$,Q].sort(gt),[j,Y]=[j,Y].sort(gt),a.Scale.expand(R.x,$,Q),a.Scale.expand(R.y,j,Y);const it=Nt($,Q),et=Nt(j,Y),lt=It(Ot(it,et));a.Expanse.set(R.width.codomain,ct=>ct.max*=it),a.Expanse.set(R.height.codomain,ct=>ct.max*=et),a.Expanse.set(R.area.codomain,ct=>ct.max*=lt),a.Expanse.set(R.size.codomain,ct=>ct.max*=lt),F.push([$,j,Q,Y]),t.dispatch(A,"clear-transient"),t.render(A)}t.zoom=N;function C(A){const{scales:P,zoomStack:R}=A;if(R.length===1)return;const[D,F,q,X]=R[R.length-1],[$,j]=Zt(D,q),[Q,Y]=Zt(F,X);a.Scale.expand(P.x,$,j),a.Scale.expand(P.y,Q,Y);const W=Nt($,j),rt=Nt(Q,Y),it=1/It(Ot(1/W,1/rt));a.Expanse.set(P.width.codomain,et=>et.max*=W),a.Expanse.set(P.height.codomain,et=>et.max*=rt),a.Expanse.set(P.area.codomain,et=>et.max*=it),a.Expanse.set(P.size.codomain,et=>et.max*=it),R.pop(),t.clearUserFrame(A),t.render(A)}t.popZoom=C;function I(A,P){const{x:R,y:D}=A.scales;if(!a.Expanse.isContinuous(R.domain)||!a.Expanse.isContinuous(D.domain))throw new Error("Both axes need to be continuous to set a ratio");A.parameters.ratio=P,t.resize(A)}t.setRatio=I;function J(A,P){const{scales:R}=A,{x:D,y:F}=R,q=a.Scale.unitRatio(D),X=a.Scale.unitRatio(F)*P;if(q>X){const $=X/q*a.Expanse.unitRange(F.domain);a.Expanse.set(D.domain,j=>(j.zero=(1-$)/2,j.one=(1+$)/2),{default:!0})}else{const $=q/X*a.Expanse.unitRange(D.domain);a.Expanse.set(F.domain,j=>(j.zero=(1-$)/2,j.one=(1+$)/2),{default:!0})}}t.applyRatio=J;function tt(A,P){let{scale:R,min:D,max:F,mult:q,labels:X,direction:$}=P;const j=A.scales[R].domain,Q=A.scales[R].codomain;if(!["x","y","area","size"].includes(R))throw new Error(`Unrecognized scale '${R}'`);const Y={default:P.default??!1};if(D||F){if(!a.Expanse.isContinuous(j))throw new Error("Limits can only be set with a continuous scale");D=D??j.min,F=F??j.max,a.Expanse.set(j,W=>(W.min=D,W.max=F),Y),A.parameters.ratio=void 0}if(X){if(!a.Expanse.isDiscrete(j))throw new Error("Labels can be ordered with a discrete scale only");if(!en(j.labels,X))throw new Error("Labels must match the scale's labels");const W=He(j.labels,X);a.Expanse.reorder(j,W)}$&&a.Expanse.set(j,W=>W.direction=$,Y),q&&a.Expanse.set(Q,W=>W.mult=q,Y)}t.setScale=tt})(a.Plot||(a.Plot={}));function qa(t){const{container:n,frames:e,margins:i}=t,[o,r,g,c]=i,w=[7,6,5,4,3,2,1,0],u="absolute top-0 right-0 w-full h-full";for(const m of w){const s=V.createElement("canvas",{class:u});s.style.zIndex=`${7-m+2}`;const h=B.of(s),v=le[m];B.setContext(h,{fillStyle:v,strokeStyle:v}),h.margins=i,e[m]=h}e.base=B.of(V.createElement("canvas",{class:u+" z-0 bg-gray-100"})),B.setContext(e.base,{font:`${mt.axisTitleFontsize}rem sans-serif`,textBaseline:"middle",textAlign:"center"}),e.under=B.of(V.createElement("canvas",{class:u+" z-1 bg-white"})),e.under.canvas.style.width=`calc(100% - ${r}px - ${c}px)`,e.under.canvas.style.height=`calc(100% - ${o}px - ${g}px)`,e.under.canvas.style.top=g+"px",e.under.canvas.style.right=c+"px",e.over=B.of(V.createElement("canvas",{class:u+"relative z-10 border border-b-black border-l-black"})),e.over.canvas.style.width=`calc(100% - ${r}px - ${c}px)`,e.over.canvas.style.height=`calc(100% - ${o}px - ${g}px)`,e.over.canvas.style.top=g+"px",e.over.canvas.style.right=c+"px",e.user=B.of(V.createElement("canvas",{class:u+" z-10"})),e.user.margins=i,B.setContext(e.user,{globalAlpha:.06666666666666667}),e.xAxis=B.of(V.createElement("canvas",{class:u})),B.setContext(e.xAxis,{fillStyle:"#3B4854",textBaseline:"top",textAlign:"center",font:`${mt.axisLabelFontsize}rem serif`}),e.yAxis=B.of(V.createElement("canvas",{class:u})),B.setContext(e.yAxis,{fillStyle:"#3B4854",textBaseline:"middle",textAlign:"right",font:`${mt.axisLabelFontsize}rem serif`});for(let[m,s]of Object.entries(e))isNaN(parseFloat(m))||(m="data-"+m),s.canvas.id=`frame-${m}`,B.append(s,n)}function ja(t){const{container:n,parameters:e,frames:i}=t,{mousecoords:o}=e;window.addEventListener("resize",()=>a.Plot.resize(t)),window.addEventListener("keydown",r=>{if(r.key in a.Plot.keydownHandlers){const g=a.Plot.keydownHandlers[r.key];(e.active||g===a.Plot.setQueryMode)&&g(t)}}),window.addEventListener("keyup",()=>{e.mode="select",t.queryTable.style.display="none"}),n.addEventListener("mousedown",r=>{r.stopPropagation();const{locked:g}=e;a.Plot.activate(t),a.Plot.setMousedown(t,!0),a.Plot.setMouseButton(t,r.button),r.button===0?a.Plot.setMode(t,"select"):r.button===2&&a.Plot.setMode(t,"pan");const c=r.offsetX,w=n.clientHeight-r.offsetY;Z([c,w,c,w],o),!g&&e.mode==="select"&&(a.Plot.dispatch(t,"clear-transient"),a.Plot.checkSelection(t)),a.Plot.unlock(t)}),n.addEventListener("contextmenu",r=>{r.preventDefault(),a.Plot.setMousedown(t,!0),a.Plot.setMouseButton(t,2),a.Plot.setMode(t,"pan"),e.mousecoords[0]=r.offsetX,e.mousecoords[1]=n.clientHeight-r.offsetY,B.clear(i.user)}),n.addEventListener("mouseup",()=>a.Plot.setMousedown(t,!1)),n.addEventListener("mousemove",we(r=>{a.Plot.mousemoveHandlers[e.mode](t,r)},10)),a.Plot.listen(t,"reset",()=>a.Plot.reset(t)),a.Plot.listen(t,"resize",()=>a.Plot.resize(t)),a.Plot.listen(t,"activate",()=>a.Plot.activate(t)),a.Plot.listen(t,"deactivate",()=>a.Plot.deactivate(t)),a.Plot.listen(t,"render",()=>a.Plot.render(t)),a.Plot.listen(t,"lock",()=>a.Plot.lock(t)),a.Plot.listen(t,"unlock",()=>a.Plot.unlock(t)),a.Plot.listen(t,"set-mode-query",()=>a.Plot.setMode(t,"query")),a.Plot.listen(t,"render-axes",()=>a.Plot.renderAxes(t)),a.Plot.listen(t,"clear-transient",()=>a.Plot.clearUserFrame(t)),a.Plot.listen(t,"set-scale",r=>a.Plot.setScale(t,r)),a.Plot.listen(t,"zoom",r=>{r.units=r.units??"data",a.Plot.zoom(t,r)});for(const r of Object.values(t.scales))a.Scale.listen(r,"changed",()=>{a.Plot.render(t),a.Plot.renderAxes(t)})}function Ha(t,n){var b,k;const{scales:e,container:i}=t,{clientWidth:o,clientHeight:r}=i,g=a.Expanse[((b=n==null?void 0:n.scales)==null?void 0:b.x)??"continuous"](),c=a.Expanse[((k=n==null?void 0:n.scales)==null?void 0:k.y)??"continuous"]();e.x=a.Scale.of(g,a.Expanse.continuous(0,o)),e.y=a.Scale.of(c,a.Expanse.continuous(0,r)),e.height=a.Scale.of(a.Expanse.continuous(),a.Expanse.continuous(0,r)),e.width=a.Scale.of(a.Expanse.continuous(),a.Expanse.continuous(0,o)),e.area=a.Scale.of(a.Expanse.continuous(),a.Expanse.continuous()),e.size=a.Scale.of(a.Expanse.continuous(),a.Expanse.continuous(0,10));const{x:w,y:u,width:m,height:s,size:h,area:v}=e,l={default:!0,silent:!0},{expandX:f,expandY:y}=mt;a.Expanse.set(v.domain,S=>S.ratio=!0,l),a.Expanse.set(h.domain,S=>S.ratio=!0,l),a.Expanse.set(v.codomain,S=>(S.trans=he,S.inv=It),l),a.Expanse.set(h.codomain,S=>(S.trans=he,S.inv=It),l),a.Expanse.set(w.domain,S=>(S.zero=f,S.one=1-f),l),a.Expanse.set(u.domain,S=>(S.zero=y,S.one=1-y),l),a.Expanse.set(m.domain,S=>S.one=1-2*f,l),a.Expanse.set(s.domain,S=>S.one=1-2*y,l),a.Expanse.set(v.domain,S=>S.one=1-2*Math.max(f,y),l);const d=S=>Math.max(S,0);a.Expanse.set(m.codomain,S=>S.inv=d,l),a.Expanse.set(s.codomain,S=>S.inv=d,l)}function $a(){const t=V.createElement("div",null,V.createElement("div",null,V.createElement("div",{id:"modal",class:"absolute left-0 top-0 z-50 hidden size-full flex-col items-center justify-center bg-slate-800 bg-opacity-80"},V.createElement("div",{id:"bindings",class:"relative flex h-full w-fit flex-col justify-center"},V.createElement("h1",{class:"relative mb-6 ml-2 text-3xl font-bold text-white"},"Key bindings"))),V.createElement("button",{class:"absolute right-0 top-0 z-30 rounded-bl-md bg-gray-300 p-1 px-2 text-sm text-white hover:bg-gray-400"},"keybindings"))),n=t.querySelector("#modal"),e=t.querySelector("#bindings"),i=t.querySelector("button");let o=!1;function r(){n.style.display="flex"}function g(){o||(n.style.display="none")}i.addEventListener("click",r),n.addEventListener("click",g);for(const[c,w]of Object.entries(a.Plot.keydownHandlers)){const u=V.createElement("span",{class:"m-1 flex flex-row"},V.createElement("button",{class:"m-1 w-8 rounded-md bg-gray-400 p-1 px-2 text-center text-white outline-none hover:bg-gray-500"},c),V.createElement("div",{class:"m-1 p-1 px-2 text-white"},w.description??"")),m=u.querySelector("div"),s=u.querySelector("button");m.addEventListener("click",v=>v.stopPropagation()),s.addEventListener("click",v=>{o||(v.stopPropagation(),be(s,"text-black bg-slate-200 hover:bg-slate-200"),window.addEventListener("keydown",h),o=!0)});const h=v=>{const{key:l}=v,f=s.innerText;l in a.Plot.keydownHandlers&&l!==f||(a.Plot.keydownHandlers[v.key]=w,delete a.Plot.keydownHandlers[f],s.innerText=v.key,ye(s,"text-black bg-slate-200 hover:bg-slate-200"),window.removeEventListener("keydown",h),o=!1)};e.appendChild(u)}return t}a.Scene=void 0,(t=>{function n(d,b){const k=V.createElement("div",{id:"scene",class:"pr-15 relative flex h-full w-full content-center items-center justify-center bg-[#deded9] p-10"},V.createElement("div",{id:"plot-container",class:"grid h-full w-full grid-cols-1 grid-rows-1 gap-5"}),$a()),S=k.querySelector("#plot-container"),[z,E]=[1,1],p=ot.of(Object.values(d)[0].length),M=[],x={};for(const[C,I]of Object.entries(d))_.hasName(I)||_.setName(I,C);const O={send:console.log},N=T.of({data:d,container:k,plotContainer:S,rows:z,cols:E,marker:p,client:O,plots:M,plotsByType:x});if(b!=null&&b.websocketURL){const C=new WebSocket(b.websocketURL),I={sender:"scene",target:"session",type:"connected"};C.addEventListener("open",()=>C.send(JSON.stringify(I))),C.addEventListener("message",J=>{f(N,JSON.parse(J.data))}),window.addEventListener("beforeunload",()=>C.close()),N.client=C}return Ba(N),N}t.of=n,t.listen=T.makeListenFn(),t.dispatch=T.makeDispatchFn();function e(d,b){d.appendChild(b.container),t.resize(b)}t.append=e;function i(d,b){const{plotContainer:k,marker:S,plots:z,plotsByType:E}=d;a.Plot.listen(b,"activated",()=>{for(const M of z)M!=b&&a.Plot.dispatch(M,"deactivate")}),a.Plot.listen(b,"lock-others",()=>{for(const M of z)M!==b&&a.Plot.dispatch(M,"lock")}),a.Plot.listen(b,"set-selected",M=>{ot.update(S,M.cases)}),a.Plot.listen(b,"clear-transient",()=>{for(const M of z)a.Plot.clearUserFrame(M);ot.clearTransient(S)}),z.push(b);const{type:p}=b;E[p]||(E[p]=[]),E[p].push(b),a.Plot.append(k,b),r(d),o(d),t.resize(d)}t.addPlot=i;function o(d){const{plots:b}=d;if(b.length===0)return;const k=Math.ceil(Math.sqrt(b.length)),S=Math.ceil(b.length/k);t.setDimensions(d,S,k)}function r(d){for(let b=0;b<d.plots.length;b++)d.plots[b].container.id=`plot${b+1}`}function g(d,b){const{type:k,variables:S,reducer:z,queries:E}=b??{};if(!k||k==="unknown"||!S)return;for(const O of S)if(!Object.keys(d.data).includes(O))throw new Error(`Variable '${O}' is not present in the data`);const p=pe(S),M=b;if(z&&(M.reducer=a.Reducer.get(z)),E)if(Ge(E))M.queries=pe(E);else{const O=N=>E.map(([C,I])=>[N[C],a.Reducer.get(I)]);M.queries=O}const x=a.Plot[k](d,p,M);t.addPlot(d,x)}t.addPlotBySpec=g;function c(d){const b=Mt(d.plots);b&&u(d,b)}t.popPlot=c;function w(d,b){const k=l(d,b);k&&u(d,k)}t.removePlot=w;function u(d,b){Tt(d.plots,b),Tt(d.plotsByType[b.type],b),d.plotContainer.removeChild(b.container),T.removeAllListeners(b),r(d),o(d),t.resize(d)}function m(d,b,k){const{plotContainer:S}=d;d.rows=b,d.cols=k,S.style.gridTemplateRows=Array(b).fill("1fr").join(" "),S.style.gridTemplateColumns=Array(k).fill("1fr").join(" "),t.resize(d)}t.setDimensions=m;function s(d){for(const b of d.plots)a.Plot.dispatch(b,"resize")}t.resize=s;function h(d){for(const b of d.plots)a.Plot.dispatch(b,"reset")}t.reset=h;function v(d,b){return b==="scene"?d:l(d,b)}t.getTarget=v;function l(d,b){const{plots:k,plotsByType:S}=d;let[z,E]=tn(b);const p=parseInt(E,10)-1;if(z==="plot"||z==="p")return k[p];if(z=z.replace("plot","").replace("gram",""),z in Object.keys(wn)&&(z=wn[z]),z in S)return S[z][p]}t.getPlot=l;function f(d,b){const{client:k}=d;if(!k)return;const{type:S,target:z,data:E}=b,p=v(d,z);p&&T.dispatch(p,S,E)}t.handleMessage=f;function y(d,b,k){const[S,z]=["scene","session"],E=JSON.stringify({sender:S,target:z,type:b,data:k});d.client.send(E)}t.sendMessage=y})(a.Scene||(a.Scene={}));function Ba(t){const{marker:n,plots:e,plotContainer:i}=t;i.addEventListener("mousedown",()=>{for(const o of e)a.Plot.dispatch(o,"deactivate")}),i.addEventListener("dblclick",()=>{for(const o of e)a.Plot.dispatch(o,"deactivate"),B.clear(o.frames.user);ot.clearAll(t.marker)}),window.addEventListener("keydown",o=>{var r;return(r=Pe[o.code])==null?void 0:r.call(Pe,t)}),window.addEventListener("keyup",()=>ot.setGroup(n,Ae)),ot.listen(n,"cleared",()=>{for(const o of e)a.Plot.dispatch(o,"unlock")}),a.Scene.listen(t,"resize",()=>a.Scene.resize(t)),a.Scene.listen(t,"reset",()=>a.Scene.reset(t)),a.Scene.listen(t,"connected",()=>{var o;return console.log(`Connected to Websocket server on: ${(o=t.client)==null?void 0:o.url}`)}),a.Scene.listen(t,"set-dims",o=>{a.Scene.setDimensions(t,o.rows,o.cols)}),a.Scene.listen(t,"add-plot",o=>a.Scene.addPlotBySpec(t,o)),a.Scene.listen(t,"pop-plot",()=>a.Scene.popPlot(t)),a.Scene.listen(t,"remove-plot",o=>{a.Scene.removePlot(t,o.id)}),a.Scene.listen(t,"set-selected",o=>ot.update(n,o.cases)),a.Scene.listen(t,"set-assigned",o=>{const r=7-Math.min(o.group,3);ot.update(n,o.cases,{group:r})}),a.Scene.listen(t,"get-selected",()=>{const o=ze(n.indices,ot.isTransient);a.Scene.sendMessage(t,"get-selected",{cases:o})}),a.Scene.listen(t,"get-assigned",o=>{const r=c=>(c|4)===7-Math.min(o.group,3),g=ze(n.indices,r);a.Scene.sendMessage(t,"get-assigned",{cases:g,group:o.group})}),a.Scene.listen(t,"clear-selection",()=>ot.clearAll(n)),a.Scene.listen(t,"set-scale",o=>{const r=a.Scene.getPlot(t,o.id);r&&a.Plot.dispatch(r,"set-scale",o)}),a.Scene.listen(t,"zoom",o=>{const r=a.Scene.getPlot(t,o.id);r&&a.Plot.dispatch(r,"zoom",o)})}const Pe={Digit1:t=>ot.setGroup(t.marker,ie.First),Digit2:t=>ot.setGroup(t.marker,ie.Second),Digit3:t=>ot.setGroup(t.marker,ie.Third)},wn={s:"scatter",b:"bar",h:"histo",f:"fluct",hh:"histo2d",pc:"pcoords"};return a.POSITIONS=bt,a.addIndexed=la,a.addTailwind=be,a.applyDirection=Ct,a.applyWith=ya,a.binBreaks=We,a.call=Kn,a.capitalize=qe,a.clearNodeChildren=nn,a.compareAlphaNumeric=Lt,a.convertToSuperscript=Ze,a.copyProps=ge,a.copyValues=Z,a.cumsum=_t,a.dec=Qn,a.diff=gt,a.exp10=Zn,a.exponentialToSuperscript=Ve,a.fetchJSON=ca,a.filterIndices=ze,a.findLength=ft,a.formatAxisLabels=ke,a.formatLabel=Ke,a.formatText=ua,a.getMargins=Ue,a.identity=Vt,a.inc=Yn,a.invertRange=Zt,a.isArray=at,a.isIntegerString=Je,a.isNumber=ba,a.isNumberArray=Se,a.isPrimitive=ga,a.isStringArray=Ge,a.just=de,a.keysToSelectors=pe,a.last=Mt,a.log10=Vn,a.makeGetter=Rt,a.max=Ot,a.merge=$e,a.minDecimal=Qe,a.minmax=Et,a.one=kt,a.orderBy=ia,a.orderIndices=je,a.orderIndicesByTable=He,a.ordered=At,a.pointInRect=Jt,a.prettyBreaks=Be,a.prod=Gn,a.randomInteger=me,a.rangeInverse=Nt,a.rectSegmentIntersect=ve,a.rectsIntersect=Gt,a.remove=Tt,a.removeTailwind=ye,a.rep=aa,a.round=qt,a.row=wa,a.segmentsIntersect=jt,a.selector=va,a.seq=ra,a.splitNumericSuffix=tn,a.sqrt=It,a.square=he,a.stringArraysMatch=en,a.stripWS=na,a.subset=St,a.sum=Jn,a.throttle=we,a.timeExecution=sa,a.toLowerCase=ta,a.toUpperCase=ea,a.trunc=zt,a.uniqueIntegers=oa,a.zero=vt,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),a}({});
